(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const u of a)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function n(a){const u={};return a.integrity&&(u.integrity=a.integrity),a.referrerPolicy&&(u.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?u.credentials="include":a.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(a){if(a.ep)return;a.ep=!0;const u=n(a);fetch(a.href,u)}})();var oh={exports:{}},Yo={},ah={exports:{}},Pe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mp;function qv(){if(Mp)return Pe;Mp=1;var i=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),h=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),A=Symbol.iterator;function R(N){return N===null||typeof N!="object"?null:(N=A&&N[A]||N["@@iterator"],typeof N=="function"?N:null)}var L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U=Object.assign,$={};function b(N,H,fe){this.props=N,this.context=H,this.refs=$,this.updater=fe||L}b.prototype.isReactComponent={},b.prototype.setState=function(N,H){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,H,"setState")},b.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function Q(){}Q.prototype=b.prototype;function K(N,H,fe){this.props=N,this.context=H,this.refs=$,this.updater=fe||L}var re=K.prototype=new Q;re.constructor=K,U(re,b.prototype),re.isPureReactComponent=!0;var ce=Array.isArray,Ce=Object.prototype.hasOwnProperty,Ie={current:null},x={key:!0,ref:!0,__self:!0,__source:!0};function S(N,H,fe){var Re,Ae={},De=null,ze=null;if(H!=null)for(Re in H.ref!==void 0&&(ze=H.ref),H.key!==void 0&&(De=""+H.key),H)Ce.call(H,Re)&&!x.hasOwnProperty(Re)&&(Ae[Re]=H[Re]);var be=arguments.length-2;if(be===1)Ae.children=fe;else if(1<be){for(var He=Array(be),vt=0;vt<be;vt++)He[vt]=arguments[vt+2];Ae.children=He}if(N&&N.defaultProps)for(Re in be=N.defaultProps,be)Ae[Re]===void 0&&(Ae[Re]=be[Re]);return{$$typeof:i,type:N,key:De,ref:ze,props:Ae,_owner:Ie.current}}function C(N,H){return{$$typeof:i,type:N.type,key:H,ref:N.ref,props:N.props,_owner:N._owner}}function k(N){return typeof N=="object"&&N!==null&&N.$$typeof===i}function D(N){var H={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(fe){return H[fe]})}var O=/\/+/g;function T(N,H){return typeof N=="object"&&N!==null&&N.key!=null?D(""+N.key):H.toString(36)}function ve(N,H,fe,Re,Ae){var De=typeof N;(De==="undefined"||De==="boolean")&&(N=null);var ze=!1;if(N===null)ze=!0;else switch(De){case"string":case"number":ze=!0;break;case"object":switch(N.$$typeof){case i:case e:ze=!0}}if(ze)return ze=N,Ae=Ae(ze),N=Re===""?"."+T(ze,0):Re,ce(Ae)?(fe="",N!=null&&(fe=N.replace(O,"$&/")+"/"),ve(Ae,H,fe,"",function(vt){return vt})):Ae!=null&&(k(Ae)&&(Ae=C(Ae,fe+(!Ae.key||ze&&ze.key===Ae.key?"":(""+Ae.key).replace(O,"$&/")+"/")+N)),H.push(Ae)),1;if(ze=0,Re=Re===""?".":Re+":",ce(N))for(var be=0;be<N.length;be++){De=N[be];var He=Re+T(De,be);ze+=ve(De,H,fe,He,Ae)}else if(He=R(N),typeof He=="function")for(N=He.call(N),be=0;!(De=N.next()).done;)De=De.value,He=Re+T(De,be++),ze+=ve(De,H,fe,He,Ae);else if(De==="object")throw H=String(N),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.");return ze}function _e(N,H,fe){if(N==null)return N;var Re=[],Ae=0;return ve(N,Re,"","",function(De){return H.call(fe,De,Ae++)}),Re}function je(N){if(N._status===-1){var H=N._result;H=H(),H.then(function(fe){(N._status===0||N._status===-1)&&(N._status=1,N._result=fe)},function(fe){(N._status===0||N._status===-1)&&(N._status=2,N._result=fe)}),N._status===-1&&(N._status=0,N._result=H)}if(N._status===1)return N._result.default;throw N._result}var pe={current:null},ee={transition:null},de={ReactCurrentDispatcher:pe,ReactCurrentBatchConfig:ee,ReactCurrentOwner:Ie};function ne(){throw Error("act(...) is not supported in production builds of React.")}return Pe.Children={map:_e,forEach:function(N,H,fe){_e(N,function(){H.apply(this,arguments)},fe)},count:function(N){var H=0;return _e(N,function(){H++}),H},toArray:function(N){return _e(N,function(H){return H})||[]},only:function(N){if(!k(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},Pe.Component=b,Pe.Fragment=n,Pe.Profiler=a,Pe.PureComponent=K,Pe.StrictMode=s,Pe.Suspense=g,Pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=de,Pe.act=ne,Pe.cloneElement=function(N,H,fe){if(N==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+N+".");var Re=U({},N.props),Ae=N.key,De=N.ref,ze=N._owner;if(H!=null){if(H.ref!==void 0&&(De=H.ref,ze=Ie.current),H.key!==void 0&&(Ae=""+H.key),N.type&&N.type.defaultProps)var be=N.type.defaultProps;for(He in H)Ce.call(H,He)&&!x.hasOwnProperty(He)&&(Re[He]=H[He]===void 0&&be!==void 0?be[He]:H[He])}var He=arguments.length-2;if(He===1)Re.children=fe;else if(1<He){be=Array(He);for(var vt=0;vt<He;vt++)be[vt]=arguments[vt+2];Re.children=be}return{$$typeof:i,type:N.type,key:Ae,ref:De,props:Re,_owner:ze}},Pe.createContext=function(N){return N={$$typeof:h,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},N.Provider={$$typeof:u,_context:N},N.Consumer=N},Pe.createElement=S,Pe.createFactory=function(N){var H=S.bind(null,N);return H.type=N,H},Pe.createRef=function(){return{current:null}},Pe.forwardRef=function(N){return{$$typeof:m,render:N}},Pe.isValidElement=k,Pe.lazy=function(N){return{$$typeof:w,_payload:{_status:-1,_result:N},_init:je}},Pe.memo=function(N,H){return{$$typeof:v,type:N,compare:H===void 0?null:H}},Pe.startTransition=function(N){var H=ee.transition;ee.transition={};try{N()}finally{ee.transition=H}},Pe.unstable_act=ne,Pe.useCallback=function(N,H){return pe.current.useCallback(N,H)},Pe.useContext=function(N){return pe.current.useContext(N)},Pe.useDebugValue=function(){},Pe.useDeferredValue=function(N){return pe.current.useDeferredValue(N)},Pe.useEffect=function(N,H){return pe.current.useEffect(N,H)},Pe.useId=function(){return pe.current.useId()},Pe.useImperativeHandle=function(N,H,fe){return pe.current.useImperativeHandle(N,H,fe)},Pe.useInsertionEffect=function(N,H){return pe.current.useInsertionEffect(N,H)},Pe.useLayoutEffect=function(N,H){return pe.current.useLayoutEffect(N,H)},Pe.useMemo=function(N,H){return pe.current.useMemo(N,H)},Pe.useReducer=function(N,H,fe){return pe.current.useReducer(N,H,fe)},Pe.useRef=function(N){return pe.current.useRef(N)},Pe.useState=function(N){return pe.current.useState(N)},Pe.useSyncExternalStore=function(N,H,fe){return pe.current.useSyncExternalStore(N,H,fe)},Pe.useTransition=function(){return pe.current.useTransition()},Pe.version="18.3.1",Pe}var Fp;function qh(){return Fp||(Fp=1,ah.exports=qv()),ah.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Up;function Hv(){if(Up)return Yo;Up=1;var i=qh(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function h(m,g,v){var w,A={},R=null,L=null;v!==void 0&&(R=""+v),g.key!==void 0&&(R=""+g.key),g.ref!==void 0&&(L=g.ref);for(w in g)s.call(g,w)&&!u.hasOwnProperty(w)&&(A[w]=g[w]);if(m&&m.defaultProps)for(w in g=m.defaultProps,g)A[w]===void 0&&(A[w]=g[w]);return{$$typeof:e,type:m,key:R,ref:L,props:A,_owner:a.current}}return Yo.Fragment=n,Yo.jsx=h,Yo.jsxs=h,Yo}var zp;function Wv(){return zp||(zp=1,oh.exports=Hv()),oh.exports}var Ue=Wv(),q=qh(),bl={},lh={exports:{}},Gt={},uh={exports:{}},ch={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bp;function Qv(){return bp||(bp=1,function(i){function e(ee,de){var ne=ee.length;ee.push(de);e:for(;0<ne;){var N=ne-1>>>1,H=ee[N];if(0<a(H,de))ee[N]=de,ee[ne]=H,ne=N;else break e}}function n(ee){return ee.length===0?null:ee[0]}function s(ee){if(ee.length===0)return null;var de=ee[0],ne=ee.pop();if(ne!==de){ee[0]=ne;e:for(var N=0,H=ee.length,fe=H>>>1;N<fe;){var Re=2*(N+1)-1,Ae=ee[Re],De=Re+1,ze=ee[De];if(0>a(Ae,ne))De<H&&0>a(ze,Ae)?(ee[N]=ze,ee[De]=ne,N=De):(ee[N]=Ae,ee[Re]=ne,N=Re);else if(De<H&&0>a(ze,ne))ee[N]=ze,ee[De]=ne,N=De;else break e}}return de}function a(ee,de){var ne=ee.sortIndex-de.sortIndex;return ne!==0?ne:ee.id-de.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var h=Date,m=h.now();i.unstable_now=function(){return h.now()-m}}var g=[],v=[],w=1,A=null,R=3,L=!1,U=!1,$=!1,b=typeof setTimeout=="function"?setTimeout:null,Q=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function re(ee){for(var de=n(v);de!==null;){if(de.callback===null)s(v);else if(de.startTime<=ee)s(v),de.sortIndex=de.expirationTime,e(g,de);else break;de=n(v)}}function ce(ee){if($=!1,re(ee),!U)if(n(g)!==null)U=!0,je(Ce);else{var de=n(v);de!==null&&pe(ce,de.startTime-ee)}}function Ce(ee,de){U=!1,$&&($=!1,Q(S),S=-1),L=!0;var ne=R;try{for(re(de),A=n(g);A!==null&&(!(A.expirationTime>de)||ee&&!D());){var N=A.callback;if(typeof N=="function"){A.callback=null,R=A.priorityLevel;var H=N(A.expirationTime<=de);de=i.unstable_now(),typeof H=="function"?A.callback=H:A===n(g)&&s(g),re(de)}else s(g);A=n(g)}if(A!==null)var fe=!0;else{var Re=n(v);Re!==null&&pe(ce,Re.startTime-de),fe=!1}return fe}finally{A=null,R=ne,L=!1}}var Ie=!1,x=null,S=-1,C=5,k=-1;function D(){return!(i.unstable_now()-k<C)}function O(){if(x!==null){var ee=i.unstable_now();k=ee;var de=!0;try{de=x(!0,ee)}finally{de?T():(Ie=!1,x=null)}}else Ie=!1}var T;if(typeof K=="function")T=function(){K(O)};else if(typeof MessageChannel<"u"){var ve=new MessageChannel,_e=ve.port2;ve.port1.onmessage=O,T=function(){_e.postMessage(null)}}else T=function(){b(O,0)};function je(ee){x=ee,Ie||(Ie=!0,T())}function pe(ee,de){S=b(function(){ee(i.unstable_now())},de)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(ee){ee.callback=null},i.unstable_continueExecution=function(){U||L||(U=!0,je(Ce))},i.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<ee?Math.floor(1e3/ee):5},i.unstable_getCurrentPriorityLevel=function(){return R},i.unstable_getFirstCallbackNode=function(){return n(g)},i.unstable_next=function(ee){switch(R){case 1:case 2:case 3:var de=3;break;default:de=R}var ne=R;R=de;try{return ee()}finally{R=ne}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(ee,de){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var ne=R;R=ee;try{return de()}finally{R=ne}},i.unstable_scheduleCallback=function(ee,de,ne){var N=i.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?N+ne:N):ne=N,ee){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=ne+H,ee={id:w++,callback:de,priorityLevel:ee,startTime:ne,expirationTime:H,sortIndex:-1},ne>N?(ee.sortIndex=ne,e(v,ee),n(g)===null&&ee===n(v)&&($?(Q(S),S=-1):$=!0,pe(ce,ne-N))):(ee.sortIndex=H,e(g,ee),U||L||(U=!0,je(Ce))),ee},i.unstable_shouldYield=D,i.unstable_wrapCallback=function(ee){var de=R;return function(){var ne=R;R=de;try{return ee.apply(this,arguments)}finally{R=ne}}}}(ch)),ch}var Bp;function Kv(){return Bp||(Bp=1,uh.exports=Qv()),uh.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jp;function Gv(){if(jp)return Gt;jp=1;var i=qh(),e=Kv();function n(t){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+t,o=1;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function u(t,r){h(t,r),h(t+"Capture",r)}function h(t,r){for(a[t]=r,t=0;t<r.length;t++)s.add(r[t])}var m=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w={},A={};function R(t){return g.call(A,t)?!0:g.call(w,t)?!1:v.test(t)?A[t]=!0:(w[t]=!0,!1)}function L(t,r,o,c){if(o!==null&&o.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return c?!1:o!==null?!o.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function U(t,r,o,c){if(r===null||typeof r>"u"||L(t,r,o,c))return!0;if(c)return!1;if(o!==null)switch(o.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function $(t,r,o,c,d,p,_){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=c,this.attributeNamespace=d,this.mustUseProperty=o,this.propertyName=t,this.type=r,this.sanitizeURL=p,this.removeEmptyString=_}var b={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){b[t]=new $(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var r=t[0];b[r]=new $(r,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){b[t]=new $(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){b[t]=new $(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){b[t]=new $(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){b[t]=new $(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){b[t]=new $(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){b[t]=new $(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){b[t]=new $(t,5,!1,t.toLowerCase(),null,!1,!1)});var Q=/[\-:]([a-z])/g;function K(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var r=t.replace(Q,K);b[r]=new $(r,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var r=t.replace(Q,K);b[r]=new $(r,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var r=t.replace(Q,K);b[r]=new $(r,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){b[t]=new $(t,1,!1,t.toLowerCase(),null,!1,!1)}),b.xlinkHref=new $("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){b[t]=new $(t,1,!1,t.toLowerCase(),null,!0,!0)});function re(t,r,o,c){var d=b.hasOwnProperty(r)?b[r]:null;(d!==null?d.type!==0:c||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(U(r,o,d,c)&&(o=null),c||d===null?R(r)&&(o===null?t.removeAttribute(r):t.setAttribute(r,""+o)):d.mustUseProperty?t[d.propertyName]=o===null?d.type===3?!1:"":o:(r=d.attributeName,c=d.attributeNamespace,o===null?t.removeAttribute(r):(d=d.type,o=d===3||d===4&&o===!0?"":""+o,c?t.setAttributeNS(c,r,o):t.setAttribute(r,o))))}var ce=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ce=Symbol.for("react.element"),Ie=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),D=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),ve=Symbol.for("react.suspense_list"),_e=Symbol.for("react.memo"),je=Symbol.for("react.lazy"),pe=Symbol.for("react.offscreen"),ee=Symbol.iterator;function de(t){return t===null||typeof t!="object"?null:(t=ee&&t[ee]||t["@@iterator"],typeof t=="function"?t:null)}var ne=Object.assign,N;function H(t){if(N===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);N=r&&r[1]||""}return`
`+N+t}var fe=!1;function Re(t,r){if(!t||fe)return"";fe=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(B){var c=B}Reflect.construct(t,[],r)}else{try{r.call()}catch(B){c=B}t.call(r.prototype)}else{try{throw Error()}catch(B){c=B}t()}}catch(B){if(B&&c&&typeof B.stack=="string"){for(var d=B.stack.split(`
`),p=c.stack.split(`
`),_=d.length-1,I=p.length-1;1<=_&&0<=I&&d[_]!==p[I];)I--;for(;1<=_&&0<=I;_--,I--)if(d[_]!==p[I]){if(_!==1||I!==1)do if(_--,I--,0>I||d[_]!==p[I]){var P=`
`+d[_].replace(" at new "," at ");return t.displayName&&P.includes("<anonymous>")&&(P=P.replace("<anonymous>",t.displayName)),P}while(1<=_&&0<=I);break}}}finally{fe=!1,Error.prepareStackTrace=o}return(t=t?t.displayName||t.name:"")?H(t):""}function Ae(t){switch(t.tag){case 5:return H(t.type);case 16:return H("Lazy");case 13:return H("Suspense");case 19:return H("SuspenseList");case 0:case 2:case 15:return t=Re(t.type,!1),t;case 11:return t=Re(t.type.render,!1),t;case 1:return t=Re(t.type,!0),t;default:return""}}function De(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case x:return"Fragment";case Ie:return"Portal";case C:return"Profiler";case S:return"StrictMode";case T:return"Suspense";case ve:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case D:return(t.displayName||"Context")+".Consumer";case k:return(t._context.displayName||"Context")+".Provider";case O:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case _e:return r=t.displayName||null,r!==null?r:De(t.type)||"Memo";case je:r=t._payload,t=t._init;try{return De(t(r))}catch{}}return null}function ze(t){var r=t.type;switch(t.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=r.render,t=t.displayName||t.name||"",r.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return De(r);case 8:return r===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function be(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function He(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function vt(t){var r=He(t)?"checked":"value",o=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),c=""+t[r];if(!t.hasOwnProperty(r)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var d=o.get,p=o.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return d.call(this)},set:function(_){c=""+_,p.call(this,_)}}),Object.defineProperty(t,r,{enumerable:o.enumerable}),{getValue:function(){return c},setValue:function(_){c=""+_},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function Yn(t){t._valueTracker||(t._valueTracker=vt(t))}function $i(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var o=r.getValue(),c="";return t&&(c=He(t)?t.checked?"true":"false":t.value),t=c,t!==o?(r.setValue(t),!0):!1}function Tr(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ai(t,r){var o=r.checked;return ne({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??t._wrapperState.initialChecked})}function qi(t,r){var o=r.defaultValue==null?"":r.defaultValue,c=r.checked!=null?r.checked:r.defaultChecked;o=be(r.value!=null?r.value:o),t._wrapperState={initialChecked:c,initialValue:o,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function no(t,r){r=r.checked,r!=null&&re(t,"checked",r,!1)}function ro(t,r){no(t,r);var o=be(r.value),c=r.type;if(o!=null)c==="number"?(o===0&&t.value===""||t.value!=o)&&(t.value=""+o):t.value!==""+o&&(t.value=""+o);else if(c==="submit"||c==="reset"){t.removeAttribute("value");return}r.hasOwnProperty("value")?Hi(t,r.type,o):r.hasOwnProperty("defaultValue")&&Hi(t,r.type,be(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(t.defaultChecked=!!r.defaultChecked)}function Ra(t,r,o){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var c=r.type;if(!(c!=="submit"&&c!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+t._wrapperState.initialValue,o||r===t.value||(t.value=r),t.defaultValue=r}o=t.name,o!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,o!==""&&(t.name=o)}function Hi(t,r,o){(r!=="number"||Tr(t.ownerDocument)!==t)&&(o==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+o&&(t.defaultValue=""+o))}var Jn=Array.isArray;function Zn(t,r,o,c){if(t=t.options,r){r={};for(var d=0;d<o.length;d++)r["$"+o[d]]=!0;for(o=0;o<t.length;o++)d=r.hasOwnProperty("$"+t[o].value),t[o].selected!==d&&(t[o].selected=d),d&&c&&(t[o].defaultSelected=!0)}else{for(o=""+be(o),r=null,d=0;d<t.length;d++){if(t[d].value===o){t[d].selected=!0,c&&(t[d].defaultSelected=!0);return}r!==null||t[d].disabled||(r=t[d])}r!==null&&(r.selected=!0)}}function io(t,r){if(r.dangerouslySetInnerHTML!=null)throw Error(n(91));return ne({},r,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Wi(t,r){var o=r.value;if(o==null){if(o=r.children,r=r.defaultValue,o!=null){if(r!=null)throw Error(n(92));if(Jn(o)){if(1<o.length)throw Error(n(93));o=o[0]}r=o}r==null&&(r=""),o=r}t._wrapperState={initialValue:be(o)}}function Qi(t,r){var o=be(r.value),c=be(r.defaultValue);o!=null&&(o=""+o,o!==t.value&&(t.value=o),r.defaultValue==null&&t.defaultValue!==o&&(t.defaultValue=o)),c!=null&&(t.defaultValue=""+c)}function so(t){var r=t.textContent;r===t._wrapperState.initialValue&&r!==""&&r!==null&&(t.value=r)}function ct(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ht(t,r){return t==null||t==="http://www.w3.org/1999/xhtml"?ct(r):t==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var er,oo=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,o,c,d){MSApp.execUnsafeLocalFunction(function(){return t(r,o,c,d)})}:t}(function(t,r){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=r;else{for(er=er||document.createElement("div"),er.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=er.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;r.firstChild;)t.appendChild(r.firstChild)}});function Sr(t,r){if(r){var o=t.firstChild;if(o&&o===t.lastChild&&o.nodeType===3){o.nodeValue=r;return}}t.textContent=r}var li={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ui=["Webkit","ms","Moz","O"];Object.keys(li).forEach(function(t){ui.forEach(function(r){r=r+t.charAt(0).toUpperCase()+t.substring(1),li[r]=li[t]})});function ao(t,r,o){return r==null||typeof r=="boolean"||r===""?"":o||typeof r!="number"||r===0||li.hasOwnProperty(t)&&li[t]?(""+r).trim():r+"px"}function lo(t,r){t=t.style;for(var o in r)if(r.hasOwnProperty(o)){var c=o.indexOf("--")===0,d=ao(o,r[o],c);o==="float"&&(o="cssFloat"),c?t.setProperty(o,d):t[o]=d}}var uo=ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function co(t,r){if(r){if(uo[t]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(n(137,t));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(n(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(n(61))}if(r.style!=null&&typeof r.style!="object")throw Error(n(62))}}function ho(t,r){if(t.indexOf("-")===-1)return typeof r.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ci=null;function Ki(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Gi=null,ln=null,Ln=null;function Xi(t){if(t=Mo(t)){if(typeof Gi!="function")throw Error(n(280));var r=t.stateNode;r&&(r=tl(r),Gi(t.stateNode,t.type,r))}}function On(t){ln?Ln?Ln.push(t):Ln=[t]:ln=t}function fo(){if(ln){var t=ln,r=Ln;if(Ln=ln=null,Xi(t),r)for(t=0;t<r.length;t++)Xi(r[t])}}function hi(t,r){return t(r)}function po(){}var tr=!1;function mo(t,r,o){if(tr)return t(r,o);tr=!0;try{return hi(t,r,o)}finally{tr=!1,(ln!==null||Ln!==null)&&(po(),fo())}}function it(t,r){var o=t.stateNode;if(o===null)return null;var c=tl(o);if(c===null)return null;o=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(t=t.type,c=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!c;break e;default:t=!1}if(t)return null;if(o&&typeof o!="function")throw Error(n(231,r,typeof o));return o}var Yi=!1;if(m)try{var vn={};Object.defineProperty(vn,"passive",{get:function(){Yi=!0}}),window.addEventListener("test",vn,vn),window.removeEventListener("test",vn,vn)}catch{Yi=!1}function di(t,r,o,c,d,p,_,I,P){var B=Array.prototype.slice.call(arguments,3);try{r.apply(o,B)}catch(X){this.onError(X)}}var fi=!1,Ji=null,_n=!1,go=null,Lu={onError:function(t){fi=!0,Ji=t}};function Zi(t,r,o,c,d,p,_,I,P){fi=!1,Ji=null,di.apply(Lu,arguments)}function Ca(t,r,o,c,d,p,_,I,P){if(Zi.apply(this,arguments),fi){if(fi){var B=Ji;fi=!1,Ji=null}else throw Error(n(198));_n||(_n=!0,go=B)}}function En(t){var r=t,o=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,r.flags&4098&&(o=r.return),t=r.return;while(t)}return r.tag===3?o:null}function pi(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function wn(t){if(En(t)!==t)throw Error(n(188))}function Aa(t){var r=t.alternate;if(!r){if(r=En(t),r===null)throw Error(n(188));return r!==t?null:t}for(var o=t,c=r;;){var d=o.return;if(d===null)break;var p=d.alternate;if(p===null){if(c=d.return,c!==null){o=c;continue}break}if(d.child===p.child){for(p=d.child;p;){if(p===o)return wn(d),t;if(p===c)return wn(d),r;p=p.sibling}throw Error(n(188))}if(o.return!==c.return)o=d,c=p;else{for(var _=!1,I=d.child;I;){if(I===o){_=!0,o=d,c=p;break}if(I===c){_=!0,c=d,o=p;break}I=I.sibling}if(!_){for(I=p.child;I;){if(I===o){_=!0,o=p,c=d;break}if(I===c){_=!0,c=p,o=d;break}I=I.sibling}if(!_)throw Error(n(189))}}if(o.alternate!==c)throw Error(n(190))}if(o.tag!==3)throw Error(n(188));return o.stateNode.current===o?t:r}function yo(t){return t=Aa(t),t!==null?es(t):null}function es(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var r=es(t);if(r!==null)return r;t=t.sibling}return null}var ts=e.unstable_scheduleCallback,vo=e.unstable_cancelCallback,Pa=e.unstable_shouldYield,Ou=e.unstable_requestPaint,We=e.unstable_now,ka=e.unstable_getCurrentPriorityLevel,mi=e.unstable_ImmediatePriority,Ir=e.unstable_UserBlockingPriority,un=e.unstable_NormalPriority,_o=e.unstable_LowPriority,xa=e.unstable_IdlePriority,gi=null,Jt=null;function Va(t){if(Jt&&typeof Jt.onCommitFiberRoot=="function")try{Jt.onCommitFiberRoot(gi,t,void 0,(t.current.flags&128)===128)}catch{}}var Ut=Math.clz32?Math.clz32:Na,Eo=Math.log,Da=Math.LN2;function Na(t){return t>>>=0,t===0?32:31-(Eo(t)/Da|0)|0}var ns=64,rs=4194304;function Rr(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function yi(t,r){var o=t.pendingLanes;if(o===0)return 0;var c=0,d=t.suspendedLanes,p=t.pingedLanes,_=o&268435455;if(_!==0){var I=_&~d;I!==0?c=Rr(I):(p&=_,p!==0&&(c=Rr(p)))}else _=o&~d,_!==0?c=Rr(_):p!==0&&(c=Rr(p));if(c===0)return 0;if(r!==0&&r!==c&&!(r&d)&&(d=c&-c,p=r&-r,d>=p||d===16&&(p&4194240)!==0))return r;if(c&4&&(c|=o&16),r=t.entangledLanes,r!==0)for(t=t.entanglements,r&=c;0<r;)o=31-Ut(r),d=1<<o,c|=t[o],r&=~d;return c}function Mu(t,r){switch(t){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nr(t,r){for(var o=t.suspendedLanes,c=t.pingedLanes,d=t.expirationTimes,p=t.pendingLanes;0<p;){var _=31-Ut(p),I=1<<_,P=d[_];P===-1?(!(I&o)||I&c)&&(d[_]=Mu(I,r)):P<=r&&(t.expiredLanes|=I),p&=~I}}function Zt(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function vi(){var t=ns;return ns<<=1,!(ns&4194240)&&(ns=64),t}function Cr(t){for(var r=[],o=0;31>o;o++)r.push(t);return r}function Ar(t,r,o){t.pendingLanes|=r,r!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,r=31-Ut(r),t[r]=o}function qe(t,r){var o=t.pendingLanes&~r;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=r,t.mutableReadLanes&=r,t.entangledLanes&=r,r=t.entanglements;var c=t.eventTimes;for(t=t.expirationTimes;0<o;){var d=31-Ut(o),p=1<<d;r[d]=0,c[d]=-1,t[d]=-1,o&=~p}}function Pr(t,r){var o=t.entangledLanes|=r;for(t=t.entanglements;o;){var c=31-Ut(o),d=1<<c;d&r|t[c]&r&&(t[c]|=r),o&=~d}}var xe=0;function kr(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var La,is,Oa,Ma,Fa,wo=!1,Mn=[],It=null,Tn=null,Sn=null,xr=new Map,cn=new Map,Fn=[],Fu="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ua(t,r){switch(t){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":Tn=null;break;case"mouseover":case"mouseout":Sn=null;break;case"pointerover":case"pointerout":xr.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":cn.delete(r.pointerId)}}function jt(t,r,o,c,d,p){return t===null||t.nativeEvent!==p?(t={blockedOn:r,domEventName:o,eventSystemFlags:c,nativeEvent:p,targetContainers:[d]},r!==null&&(r=Mo(r),r!==null&&is(r)),t):(t.eventSystemFlags|=c,r=t.targetContainers,d!==null&&r.indexOf(d)===-1&&r.push(d),t)}function Uu(t,r,o,c,d){switch(r){case"focusin":return It=jt(It,t,r,o,c,d),!0;case"dragenter":return Tn=jt(Tn,t,r,o,c,d),!0;case"mouseover":return Sn=jt(Sn,t,r,o,c,d),!0;case"pointerover":var p=d.pointerId;return xr.set(p,jt(xr.get(p)||null,t,r,o,c,d)),!0;case"gotpointercapture":return p=d.pointerId,cn.set(p,jt(cn.get(p)||null,t,r,o,c,d)),!0}return!1}function za(t){var r=Si(t.target);if(r!==null){var o=En(r);if(o!==null){if(r=o.tag,r===13){if(r=pi(o),r!==null){t.blockedOn=r,Fa(t.priority,function(){Oa(o)});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){t.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}t.blockedOn=null}function rr(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var o=ss(t.domEventName,t.eventSystemFlags,r[0],t.nativeEvent);if(o===null){o=t.nativeEvent;var c=new o.constructor(o.type,o);ci=c,o.target.dispatchEvent(c),ci=null}else return r=Mo(o),r!==null&&is(r),t.blockedOn=o,!1;r.shift()}return!0}function _i(t,r,o){rr(t)&&o.delete(r)}function ba(){wo=!1,It!==null&&rr(It)&&(It=null),Tn!==null&&rr(Tn)&&(Tn=null),Sn!==null&&rr(Sn)&&(Sn=null),xr.forEach(_i),cn.forEach(_i)}function In(t,r){t.blockedOn===r&&(t.blockedOn=null,wo||(wo=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ba)))}function Rn(t){function r(d){return In(d,t)}if(0<Mn.length){In(Mn[0],t);for(var o=1;o<Mn.length;o++){var c=Mn[o];c.blockedOn===t&&(c.blockedOn=null)}}for(It!==null&&In(It,t),Tn!==null&&In(Tn,t),Sn!==null&&In(Sn,t),xr.forEach(r),cn.forEach(r),o=0;o<Fn.length;o++)c=Fn[o],c.blockedOn===t&&(c.blockedOn=null);for(;0<Fn.length&&(o=Fn[0],o.blockedOn===null);)za(o),o.blockedOn===null&&Fn.shift()}var ir=ce.ReactCurrentBatchConfig,Vr=!0;function Xe(t,r,o,c){var d=xe,p=ir.transition;ir.transition=null;try{xe=1,To(t,r,o,c)}finally{xe=d,ir.transition=p}}function zu(t,r,o,c){var d=xe,p=ir.transition;ir.transition=null;try{xe=4,To(t,r,o,c)}finally{xe=d,ir.transition=p}}function To(t,r,o,c){if(Vr){var d=ss(t,r,o,c);if(d===null)Xu(t,r,c,Ei,o),Ua(t,c);else if(Uu(d,t,r,o,c))c.stopPropagation();else if(Ua(t,c),r&4&&-1<Fu.indexOf(t)){for(;d!==null;){var p=Mo(d);if(p!==null&&La(p),p=ss(t,r,o,c),p===null&&Xu(t,r,c,Ei,o),p===d)break;d=p}d!==null&&c.stopPropagation()}else Xu(t,r,c,null,o)}}var Ei=null;function ss(t,r,o,c){if(Ei=null,t=Ki(c),t=Si(t),t!==null)if(r=En(t),r===null)t=null;else if(o=r.tag,o===13){if(t=pi(r),t!==null)return t;t=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null);return Ei=t,null}function So(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ka()){case mi:return 1;case Ir:return 4;case un:case _o:return 16;case xa:return 536870912;default:return 16}default:return 16}}var en=null,os=null,$t=null;function Io(){if($t)return $t;var t,r=os,o=r.length,c,d="value"in en?en.value:en.textContent,p=d.length;for(t=0;t<o&&r[t]===d[t];t++);var _=o-t;for(c=1;c<=_&&r[o-c]===d[p-c];c++);return $t=d.slice(t,1<c?1-c:void 0)}function as(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function Un(){return!0}function Ro(){return!1}function Rt(t){function r(o,c,d,p,_){this._reactName=o,this._targetInst=d,this.type=c,this.nativeEvent=p,this.target=_,this.currentTarget=null;for(var I in t)t.hasOwnProperty(I)&&(o=t[I],this[I]=o?o(p):p[I]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Un:Ro,this.isPropagationStopped=Ro,this}return ne(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Un)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Un)},persist:function(){},isPersistent:Un}),r}var Cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ls=Rt(Cn),zn=ne({},Cn,{view:0,detail:0}),bu=Rt(zn),us,sr,Dr,wi=ne({},zn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bn,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Dr&&(Dr&&t.type==="mousemove"?(us=t.screenX-Dr.screenX,sr=t.screenY-Dr.screenY):sr=us=0,Dr=t),us)},movementY:function(t){return"movementY"in t?t.movementY:sr}}),cs=Rt(wi),Co=ne({},wi,{dataTransfer:0}),Ba=Rt(Co),hs=ne({},zn,{relatedTarget:0}),ds=Rt(hs),ja=ne({},Cn,{animationName:0,elapsedTime:0,pseudoElement:0}),or=Rt(ja),$a=ne({},Cn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),qa=Rt($a),Ha=ne({},Cn,{data:0}),Ao=Rt(Ha),fs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Wa={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Qa(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Wa[t])?!!r[t]:!1}function bn(){return Qa}var l=ne({},zn,{key:function(t){if(t.key){var r=fs[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=as(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?zt[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bn,charCode:function(t){return t.type==="keypress"?as(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?as(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),f=Rt(l),y=ne({},wi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),E=Rt(y),M=ne({},zn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bn}),j=Rt(M),te=ne({},Cn,{propertyName:0,elapsedTime:0,pseudoElement:0}),$e=Rt(te),dt=ne({},wi,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ne=Rt(dt),_t=[9,13,27,32],at=m&&"CompositionEvent"in window,hn=null;m&&"documentMode"in document&&(hn=document.documentMode);var tn=m&&"TextEvent"in window&&!hn,Ti=m&&(!at||hn&&8<hn&&11>=hn),ps=" ",kd=!1;function xd(t,r){switch(t){case"keyup":return _t.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vd(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ms=!1;function jy(t,r){switch(t){case"compositionend":return Vd(r);case"keypress":return r.which!==32?null:(kd=!0,ps);case"textInput":return t=r.data,t===ps&&kd?null:t;default:return null}}function $y(t,r){if(ms)return t==="compositionend"||!at&&xd(t,r)?(t=Io(),$t=os=en=null,ms=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Ti&&r.locale!=="ko"?null:r.data;default:return null}}var qy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dd(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!qy[t.type]:r==="textarea"}function Nd(t,r,o,c){On(c),r=Ja(r,"onChange"),0<r.length&&(o=new ls("onChange","change",null,o,c),t.push({event:o,listeners:r}))}var Po=null,ko=null;function Hy(t){Yd(t,0)}function Ka(t){var r=Es(t);if($i(r))return t}function Wy(t,r){if(t==="change")return r}var Ld=!1;if(m){var Bu;if(m){var ju="oninput"in document;if(!ju){var Od=document.createElement("div");Od.setAttribute("oninput","return;"),ju=typeof Od.oninput=="function"}Bu=ju}else Bu=!1;Ld=Bu&&(!document.documentMode||9<document.documentMode)}function Md(){Po&&(Po.detachEvent("onpropertychange",Fd),ko=Po=null)}function Fd(t){if(t.propertyName==="value"&&Ka(ko)){var r=[];Nd(r,ko,t,Ki(t)),mo(Hy,r)}}function Qy(t,r,o){t==="focusin"?(Md(),Po=r,ko=o,Po.attachEvent("onpropertychange",Fd)):t==="focusout"&&Md()}function Ky(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ka(ko)}function Gy(t,r){if(t==="click")return Ka(r)}function Xy(t,r){if(t==="input"||t==="change")return Ka(r)}function Yy(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var An=typeof Object.is=="function"?Object.is:Yy;function xo(t,r){if(An(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var o=Object.keys(t),c=Object.keys(r);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var d=o[c];if(!g.call(r,d)||!An(t[d],r[d]))return!1}return!0}function Ud(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function zd(t,r){var o=Ud(t);t=0;for(var c;o;){if(o.nodeType===3){if(c=t+o.textContent.length,t<=r&&c>=r)return{node:o,offset:r-t};t=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Ud(o)}}function bd(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?bd(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function Bd(){for(var t=window,r=Tr();r instanceof t.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)t=r.contentWindow;else break;r=Tr(t.document)}return r}function $u(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}function Jy(t){var r=Bd(),o=t.focusedElem,c=t.selectionRange;if(r!==o&&o&&o.ownerDocument&&bd(o.ownerDocument.documentElement,o)){if(c!==null&&$u(o)){if(r=c.start,t=c.end,t===void 0&&(t=r),"selectionStart"in o)o.selectionStart=r,o.selectionEnd=Math.min(t,o.value.length);else if(t=(r=o.ownerDocument||document)&&r.defaultView||window,t.getSelection){t=t.getSelection();var d=o.textContent.length,p=Math.min(c.start,d);c=c.end===void 0?p:Math.min(c.end,d),!t.extend&&p>c&&(d=c,c=p,p=d),d=zd(o,p);var _=zd(o,c);d&&_&&(t.rangeCount!==1||t.anchorNode!==d.node||t.anchorOffset!==d.offset||t.focusNode!==_.node||t.focusOffset!==_.offset)&&(r=r.createRange(),r.setStart(d.node,d.offset),t.removeAllRanges(),p>c?(t.addRange(r),t.extend(_.node,_.offset)):(r.setEnd(_.node,_.offset),t.addRange(r)))}}for(r=[],t=o;t=t.parentNode;)t.nodeType===1&&r.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<r.length;o++)t=r[o],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Zy=m&&"documentMode"in document&&11>=document.documentMode,gs=null,qu=null,Vo=null,Hu=!1;function jd(t,r,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Hu||gs==null||gs!==Tr(c)||(c=gs,"selectionStart"in c&&$u(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Vo&&xo(Vo,c)||(Vo=c,c=Ja(qu,"onSelect"),0<c.length&&(r=new ls("onSelect","select",null,r,o),t.push({event:r,listeners:c}),r.target=gs)))}function Ga(t,r){var o={};return o[t.toLowerCase()]=r.toLowerCase(),o["Webkit"+t]="webkit"+r,o["Moz"+t]="moz"+r,o}var ys={animationend:Ga("Animation","AnimationEnd"),animationiteration:Ga("Animation","AnimationIteration"),animationstart:Ga("Animation","AnimationStart"),transitionend:Ga("Transition","TransitionEnd")},Wu={},$d={};m&&($d=document.createElement("div").style,"AnimationEvent"in window||(delete ys.animationend.animation,delete ys.animationiteration.animation,delete ys.animationstart.animation),"TransitionEvent"in window||delete ys.transitionend.transition);function Xa(t){if(Wu[t])return Wu[t];if(!ys[t])return t;var r=ys[t],o;for(o in r)if(r.hasOwnProperty(o)&&o in $d)return Wu[t]=r[o];return t}var qd=Xa("animationend"),Hd=Xa("animationiteration"),Wd=Xa("animationstart"),Qd=Xa("transitionend"),Kd=new Map,Gd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Nr(t,r){Kd.set(t,r),u(r,[t])}for(var Qu=0;Qu<Gd.length;Qu++){var Ku=Gd[Qu],ev=Ku.toLowerCase(),tv=Ku[0].toUpperCase()+Ku.slice(1);Nr(ev,"on"+tv)}Nr(qd,"onAnimationEnd"),Nr(Hd,"onAnimationIteration"),Nr(Wd,"onAnimationStart"),Nr("dblclick","onDoubleClick"),Nr("focusin","onFocus"),Nr("focusout","onBlur"),Nr(Qd,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Do="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nv=new Set("cancel close invalid load scroll toggle".split(" ").concat(Do));function Xd(t,r,o){var c=t.type||"unknown-event";t.currentTarget=o,Ca(c,r,void 0,t),t.currentTarget=null}function Yd(t,r){r=(r&4)!==0;for(var o=0;o<t.length;o++){var c=t[o],d=c.event;c=c.listeners;e:{var p=void 0;if(r)for(var _=c.length-1;0<=_;_--){var I=c[_],P=I.instance,B=I.currentTarget;if(I=I.listener,P!==p&&d.isPropagationStopped())break e;Xd(d,I,B),p=P}else for(_=0;_<c.length;_++){if(I=c[_],P=I.instance,B=I.currentTarget,I=I.listener,P!==p&&d.isPropagationStopped())break e;Xd(d,I,B),p=P}}}if(_n)throw t=go,_n=!1,go=null,t}function Ke(t,r){var o=r[nc];o===void 0&&(o=r[nc]=new Set);var c=t+"__bubble";o.has(c)||(Jd(r,t,2,!1),o.add(c))}function Gu(t,r,o){var c=0;r&&(c|=4),Jd(o,t,c,r)}var Ya="_reactListening"+Math.random().toString(36).slice(2);function No(t){if(!t[Ya]){t[Ya]=!0,s.forEach(function(o){o!=="selectionchange"&&(nv.has(o)||Gu(o,!1,t),Gu(o,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[Ya]||(r[Ya]=!0,Gu("selectionchange",!1,r))}}function Jd(t,r,o,c){switch(So(r)){case 1:var d=Xe;break;case 4:d=zu;break;default:d=To}o=d.bind(null,r,o,t),d=void 0,!Yi||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(d=!0),c?d!==void 0?t.addEventListener(r,o,{capture:!0,passive:d}):t.addEventListener(r,o,!0):d!==void 0?t.addEventListener(r,o,{passive:d}):t.addEventListener(r,o,!1)}function Xu(t,r,o,c,d){var p=c;if(!(r&1)&&!(r&2)&&c!==null)e:for(;;){if(c===null)return;var _=c.tag;if(_===3||_===4){var I=c.stateNode.containerInfo;if(I===d||I.nodeType===8&&I.parentNode===d)break;if(_===4)for(_=c.return;_!==null;){var P=_.tag;if((P===3||P===4)&&(P=_.stateNode.containerInfo,P===d||P.nodeType===8&&P.parentNode===d))return;_=_.return}for(;I!==null;){if(_=Si(I),_===null)return;if(P=_.tag,P===5||P===6){c=p=_;continue e}I=I.parentNode}}c=c.return}mo(function(){var B=p,X=Ki(o),J=[];e:{var G=Kd.get(t);if(G!==void 0){var ie=ls,ae=t;switch(t){case"keypress":if(as(o)===0)break e;case"keydown":case"keyup":ie=f;break;case"focusin":ae="focus",ie=ds;break;case"focusout":ae="blur",ie=ds;break;case"beforeblur":case"afterblur":ie=ds;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ie=cs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ie=Ba;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ie=j;break;case qd:case Hd:case Wd:ie=or;break;case Qd:ie=$e;break;case"scroll":ie=bu;break;case"wheel":ie=Ne;break;case"copy":case"cut":case"paste":ie=qa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ie=E}var le=(r&4)!==0,st=!le&&t==="scroll",F=le?G!==null?G+"Capture":null:G;le=[];for(var V=B,z;V!==null;){z=V;var Z=z.stateNode;if(z.tag===5&&Z!==null&&(z=Z,F!==null&&(Z=it(V,F),Z!=null&&le.push(Lo(V,Z,z)))),st)break;V=V.return}0<le.length&&(G=new ie(G,ae,null,o,X),J.push({event:G,listeners:le}))}}if(!(r&7)){e:{if(G=t==="mouseover"||t==="pointerover",ie=t==="mouseout"||t==="pointerout",G&&o!==ci&&(ae=o.relatedTarget||o.fromElement)&&(Si(ae)||ae[ar]))break e;if((ie||G)&&(G=X.window===X?X:(G=X.ownerDocument)?G.defaultView||G.parentWindow:window,ie?(ae=o.relatedTarget||o.toElement,ie=B,ae=ae?Si(ae):null,ae!==null&&(st=En(ae),ae!==st||ae.tag!==5&&ae.tag!==6)&&(ae=null)):(ie=null,ae=B),ie!==ae)){if(le=cs,Z="onMouseLeave",F="onMouseEnter",V="mouse",(t==="pointerout"||t==="pointerover")&&(le=E,Z="onPointerLeave",F="onPointerEnter",V="pointer"),st=ie==null?G:Es(ie),z=ae==null?G:Es(ae),G=new le(Z,V+"leave",ie,o,X),G.target=st,G.relatedTarget=z,Z=null,Si(X)===B&&(le=new le(F,V+"enter",ae,o,X),le.target=z,le.relatedTarget=st,Z=le),st=Z,ie&&ae)t:{for(le=ie,F=ae,V=0,z=le;z;z=vs(z))V++;for(z=0,Z=F;Z;Z=vs(Z))z++;for(;0<V-z;)le=vs(le),V--;for(;0<z-V;)F=vs(F),z--;for(;V--;){if(le===F||F!==null&&le===F.alternate)break t;le=vs(le),F=vs(F)}le=null}else le=null;ie!==null&&Zd(J,G,ie,le,!1),ae!==null&&st!==null&&Zd(J,st,ae,le,!0)}}e:{if(G=B?Es(B):window,ie=G.nodeName&&G.nodeName.toLowerCase(),ie==="select"||ie==="input"&&G.type==="file")var ue=Wy;else if(Dd(G))if(Ld)ue=Xy;else{ue=Ky;var me=Qy}else(ie=G.nodeName)&&ie.toLowerCase()==="input"&&(G.type==="checkbox"||G.type==="radio")&&(ue=Gy);if(ue&&(ue=ue(t,B))){Nd(J,ue,o,X);break e}me&&me(t,G,B),t==="focusout"&&(me=G._wrapperState)&&me.controlled&&G.type==="number"&&Hi(G,"number",G.value)}switch(me=B?Es(B):window,t){case"focusin":(Dd(me)||me.contentEditable==="true")&&(gs=me,qu=B,Vo=null);break;case"focusout":Vo=qu=gs=null;break;case"mousedown":Hu=!0;break;case"contextmenu":case"mouseup":case"dragend":Hu=!1,jd(J,o,X);break;case"selectionchange":if(Zy)break;case"keydown":case"keyup":jd(J,o,X)}var ge;if(at)e:{switch(t){case"compositionstart":var Ee="onCompositionStart";break e;case"compositionend":Ee="onCompositionEnd";break e;case"compositionupdate":Ee="onCompositionUpdate";break e}Ee=void 0}else ms?xd(t,o)&&(Ee="onCompositionEnd"):t==="keydown"&&o.keyCode===229&&(Ee="onCompositionStart");Ee&&(Ti&&o.locale!=="ko"&&(ms||Ee!=="onCompositionStart"?Ee==="onCompositionEnd"&&ms&&(ge=Io()):(en=X,os="value"in en?en.value:en.textContent,ms=!0)),me=Ja(B,Ee),0<me.length&&(Ee=new Ao(Ee,t,null,o,X),J.push({event:Ee,listeners:me}),ge?Ee.data=ge:(ge=Vd(o),ge!==null&&(Ee.data=ge)))),(ge=tn?jy(t,o):$y(t,o))&&(B=Ja(B,"onBeforeInput"),0<B.length&&(X=new Ao("onBeforeInput","beforeinput",null,o,X),J.push({event:X,listeners:B}),X.data=ge))}Yd(J,r)})}function Lo(t,r,o){return{instance:t,listener:r,currentTarget:o}}function Ja(t,r){for(var o=r+"Capture",c=[];t!==null;){var d=t,p=d.stateNode;d.tag===5&&p!==null&&(d=p,p=it(t,o),p!=null&&c.unshift(Lo(t,p,d)),p=it(t,r),p!=null&&c.push(Lo(t,p,d))),t=t.return}return c}function vs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Zd(t,r,o,c,d){for(var p=r._reactName,_=[];o!==null&&o!==c;){var I=o,P=I.alternate,B=I.stateNode;if(P!==null&&P===c)break;I.tag===5&&B!==null&&(I=B,d?(P=it(o,p),P!=null&&_.unshift(Lo(o,P,I))):d||(P=it(o,p),P!=null&&_.push(Lo(o,P,I)))),o=o.return}_.length!==0&&t.push({event:r,listeners:_})}var rv=/\r\n?/g,iv=/\u0000|\uFFFD/g;function ef(t){return(typeof t=="string"?t:""+t).replace(rv,`
`).replace(iv,"")}function Za(t,r,o){if(r=ef(r),ef(t)!==r&&o)throw Error(n(425))}function el(){}var Yu=null,Ju=null;function Zu(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var ec=typeof setTimeout=="function"?setTimeout:void 0,sv=typeof clearTimeout=="function"?clearTimeout:void 0,tf=typeof Promise=="function"?Promise:void 0,ov=typeof queueMicrotask=="function"?queueMicrotask:typeof tf<"u"?function(t){return tf.resolve(null).then(t).catch(av)}:ec;function av(t){setTimeout(function(){throw t})}function tc(t,r){var o=r,c=0;do{var d=o.nextSibling;if(t.removeChild(o),d&&d.nodeType===8)if(o=d.data,o==="/$"){if(c===0){t.removeChild(d),Rn(r);return}c--}else o!=="$"&&o!=="$?"&&o!=="$!"||c++;o=d}while(o);Rn(r)}function Lr(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return t}function nf(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var o=t.data;if(o==="$"||o==="$!"||o==="$?"){if(r===0)return t;r--}else o==="/$"&&r++}t=t.previousSibling}return null}var _s=Math.random().toString(36).slice(2),Bn="__reactFiber$"+_s,Oo="__reactProps$"+_s,ar="__reactContainer$"+_s,nc="__reactEvents$"+_s,lv="__reactListeners$"+_s,uv="__reactHandles$"+_s;function Si(t){var r=t[Bn];if(r)return r;for(var o=t.parentNode;o;){if(r=o[ar]||o[Bn]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(t=nf(t);t!==null;){if(o=t[Bn])return o;t=nf(t)}return r}t=o,o=t.parentNode}return null}function Mo(t){return t=t[Bn]||t[ar],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Es(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(n(33))}function tl(t){return t[Oo]||null}var rc=[],ws=-1;function Or(t){return{current:t}}function Ge(t){0>ws||(t.current=rc[ws],rc[ws]=null,ws--)}function Qe(t,r){ws++,rc[ws]=t.current,t.current=r}var Mr={},Vt=Or(Mr),qt=Or(!1),Ii=Mr;function Ts(t,r){var o=t.type.contextTypes;if(!o)return Mr;var c=t.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===r)return c.__reactInternalMemoizedMaskedChildContext;var d={},p;for(p in o)d[p]=r[p];return c&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=d),d}function Ht(t){return t=t.childContextTypes,t!=null}function nl(){Ge(qt),Ge(Vt)}function rf(t,r,o){if(Vt.current!==Mr)throw Error(n(168));Qe(Vt,r),Qe(qt,o)}function sf(t,r,o){var c=t.stateNode;if(r=r.childContextTypes,typeof c.getChildContext!="function")return o;c=c.getChildContext();for(var d in c)if(!(d in r))throw Error(n(108,ze(t)||"Unknown",d));return ne({},o,c)}function rl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Mr,Ii=Vt.current,Qe(Vt,t),Qe(qt,qt.current),!0}function of(t,r,o){var c=t.stateNode;if(!c)throw Error(n(169));o?(t=sf(t,r,Ii),c.__reactInternalMemoizedMergedChildContext=t,Ge(qt),Ge(Vt),Qe(Vt,t)):Ge(qt),Qe(qt,o)}var lr=null,il=!1,ic=!1;function af(t){lr===null?lr=[t]:lr.push(t)}function cv(t){il=!0,af(t)}function Fr(){if(!ic&&lr!==null){ic=!0;var t=0,r=xe;try{var o=lr;for(xe=1;t<o.length;t++){var c=o[t];do c=c(!0);while(c!==null)}lr=null,il=!1}catch(d){throw lr!==null&&(lr=lr.slice(t+1)),ts(mi,Fr),d}finally{xe=r,ic=!1}}return null}var Ss=[],Is=0,sl=null,ol=0,dn=[],fn=0,Ri=null,ur=1,cr="";function Ci(t,r){Ss[Is++]=ol,Ss[Is++]=sl,sl=t,ol=r}function lf(t,r,o){dn[fn++]=ur,dn[fn++]=cr,dn[fn++]=Ri,Ri=t;var c=ur;t=cr;var d=32-Ut(c)-1;c&=~(1<<d),o+=1;var p=32-Ut(r)+d;if(30<p){var _=d-d%5;p=(c&(1<<_)-1).toString(32),c>>=_,d-=_,ur=1<<32-Ut(r)+d|o<<d|c,cr=p+t}else ur=1<<p|o<<d|c,cr=t}function sc(t){t.return!==null&&(Ci(t,1),lf(t,1,0))}function oc(t){for(;t===sl;)sl=Ss[--Is],Ss[Is]=null,ol=Ss[--Is],Ss[Is]=null;for(;t===Ri;)Ri=dn[--fn],dn[fn]=null,cr=dn[--fn],dn[fn]=null,ur=dn[--fn],dn[fn]=null}var nn=null,rn=null,Ye=!1,Pn=null;function uf(t,r){var o=yn(5,null,null,0);o.elementType="DELETED",o.stateNode=r,o.return=t,r=t.deletions,r===null?(t.deletions=[o],t.flags|=16):r.push(o)}function cf(t,r){switch(t.tag){case 5:var o=t.type;return r=r.nodeType!==1||o.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(t.stateNode=r,nn=t,rn=Lr(r.firstChild),!0):!1;case 6:return r=t.pendingProps===""||r.nodeType!==3?null:r,r!==null?(t.stateNode=r,nn=t,rn=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(o=Ri!==null?{id:ur,overflow:cr}:null,t.memoizedState={dehydrated:r,treeContext:o,retryLane:1073741824},o=yn(18,null,null,0),o.stateNode=r,o.return=t,t.child=o,nn=t,rn=null,!0):!1;default:return!1}}function ac(t){return(t.mode&1)!==0&&(t.flags&128)===0}function lc(t){if(Ye){var r=rn;if(r){var o=r;if(!cf(t,r)){if(ac(t))throw Error(n(418));r=Lr(o.nextSibling);var c=nn;r&&cf(t,r)?uf(c,o):(t.flags=t.flags&-4097|2,Ye=!1,nn=t)}}else{if(ac(t))throw Error(n(418));t.flags=t.flags&-4097|2,Ye=!1,nn=t}}}function hf(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;nn=t}function al(t){if(t!==nn)return!1;if(!Ye)return hf(t),Ye=!0,!1;var r;if((r=t.tag!==3)&&!(r=t.tag!==5)&&(r=t.type,r=r!=="head"&&r!=="body"&&!Zu(t.type,t.memoizedProps)),r&&(r=rn)){if(ac(t))throw df(),Error(n(418));for(;r;)uf(t,r),r=Lr(r.nextSibling)}if(hf(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(n(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8){var o=t.data;if(o==="/$"){if(r===0){rn=Lr(t.nextSibling);break e}r--}else o!=="$"&&o!=="$!"&&o!=="$?"||r++}t=t.nextSibling}rn=null}}else rn=nn?Lr(t.stateNode.nextSibling):null;return!0}function df(){for(var t=rn;t;)t=Lr(t.nextSibling)}function Rs(){rn=nn=null,Ye=!1}function uc(t){Pn===null?Pn=[t]:Pn.push(t)}var hv=ce.ReactCurrentBatchConfig;function Fo(t,r,o){if(t=o.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(n(309));var c=o.stateNode}if(!c)throw Error(n(147,t));var d=c,p=""+t;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===p?r.ref:(r=function(_){var I=d.refs;_===null?delete I[p]:I[p]=_},r._stringRef=p,r)}if(typeof t!="string")throw Error(n(284));if(!o._owner)throw Error(n(290,t))}return t}function ll(t,r){throw t=Object.prototype.toString.call(r),Error(n(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t))}function ff(t){var r=t._init;return r(t._payload)}function pf(t){function r(F,V){if(t){var z=F.deletions;z===null?(F.deletions=[V],F.flags|=16):z.push(V)}}function o(F,V){if(!t)return null;for(;V!==null;)r(F,V),V=V.sibling;return null}function c(F,V){for(F=new Map;V!==null;)V.key!==null?F.set(V.key,V):F.set(V.index,V),V=V.sibling;return F}function d(F,V){return F=Hr(F,V),F.index=0,F.sibling=null,F}function p(F,V,z){return F.index=z,t?(z=F.alternate,z!==null?(z=z.index,z<V?(F.flags|=2,V):z):(F.flags|=2,V)):(F.flags|=1048576,V)}function _(F){return t&&F.alternate===null&&(F.flags|=2),F}function I(F,V,z,Z){return V===null||V.tag!==6?(V=eh(z,F.mode,Z),V.return=F,V):(V=d(V,z),V.return=F,V)}function P(F,V,z,Z){var ue=z.type;return ue===x?X(F,V,z.props.children,Z,z.key):V!==null&&(V.elementType===ue||typeof ue=="object"&&ue!==null&&ue.$$typeof===je&&ff(ue)===V.type)?(Z=d(V,z.props),Z.ref=Fo(F,V,z),Z.return=F,Z):(Z=Dl(z.type,z.key,z.props,null,F.mode,Z),Z.ref=Fo(F,V,z),Z.return=F,Z)}function B(F,V,z,Z){return V===null||V.tag!==4||V.stateNode.containerInfo!==z.containerInfo||V.stateNode.implementation!==z.implementation?(V=th(z,F.mode,Z),V.return=F,V):(V=d(V,z.children||[]),V.return=F,V)}function X(F,V,z,Z,ue){return V===null||V.tag!==7?(V=Li(z,F.mode,Z,ue),V.return=F,V):(V=d(V,z),V.return=F,V)}function J(F,V,z){if(typeof V=="string"&&V!==""||typeof V=="number")return V=eh(""+V,F.mode,z),V.return=F,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case Ce:return z=Dl(V.type,V.key,V.props,null,F.mode,z),z.ref=Fo(F,null,V),z.return=F,z;case Ie:return V=th(V,F.mode,z),V.return=F,V;case je:var Z=V._init;return J(F,Z(V._payload),z)}if(Jn(V)||de(V))return V=Li(V,F.mode,z,null),V.return=F,V;ll(F,V)}return null}function G(F,V,z,Z){var ue=V!==null?V.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return ue!==null?null:I(F,V,""+z,Z);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case Ce:return z.key===ue?P(F,V,z,Z):null;case Ie:return z.key===ue?B(F,V,z,Z):null;case je:return ue=z._init,G(F,V,ue(z._payload),Z)}if(Jn(z)||de(z))return ue!==null?null:X(F,V,z,Z,null);ll(F,z)}return null}function ie(F,V,z,Z,ue){if(typeof Z=="string"&&Z!==""||typeof Z=="number")return F=F.get(z)||null,I(V,F,""+Z,ue);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case Ce:return F=F.get(Z.key===null?z:Z.key)||null,P(V,F,Z,ue);case Ie:return F=F.get(Z.key===null?z:Z.key)||null,B(V,F,Z,ue);case je:var me=Z._init;return ie(F,V,z,me(Z._payload),ue)}if(Jn(Z)||de(Z))return F=F.get(z)||null,X(V,F,Z,ue,null);ll(V,Z)}return null}function ae(F,V,z,Z){for(var ue=null,me=null,ge=V,Ee=V=0,Tt=null;ge!==null&&Ee<z.length;Ee++){ge.index>Ee?(Tt=ge,ge=null):Tt=ge.sibling;var Fe=G(F,ge,z[Ee],Z);if(Fe===null){ge===null&&(ge=Tt);break}t&&ge&&Fe.alternate===null&&r(F,ge),V=p(Fe,V,Ee),me===null?ue=Fe:me.sibling=Fe,me=Fe,ge=Tt}if(Ee===z.length)return o(F,ge),Ye&&Ci(F,Ee),ue;if(ge===null){for(;Ee<z.length;Ee++)ge=J(F,z[Ee],Z),ge!==null&&(V=p(ge,V,Ee),me===null?ue=ge:me.sibling=ge,me=ge);return Ye&&Ci(F,Ee),ue}for(ge=c(F,ge);Ee<z.length;Ee++)Tt=ie(ge,F,Ee,z[Ee],Z),Tt!==null&&(t&&Tt.alternate!==null&&ge.delete(Tt.key===null?Ee:Tt.key),V=p(Tt,V,Ee),me===null?ue=Tt:me.sibling=Tt,me=Tt);return t&&ge.forEach(function(Wr){return r(F,Wr)}),Ye&&Ci(F,Ee),ue}function le(F,V,z,Z){var ue=de(z);if(typeof ue!="function")throw Error(n(150));if(z=ue.call(z),z==null)throw Error(n(151));for(var me=ue=null,ge=V,Ee=V=0,Tt=null,Fe=z.next();ge!==null&&!Fe.done;Ee++,Fe=z.next()){ge.index>Ee?(Tt=ge,ge=null):Tt=ge.sibling;var Wr=G(F,ge,Fe.value,Z);if(Wr===null){ge===null&&(ge=Tt);break}t&&ge&&Wr.alternate===null&&r(F,ge),V=p(Wr,V,Ee),me===null?ue=Wr:me.sibling=Wr,me=Wr,ge=Tt}if(Fe.done)return o(F,ge),Ye&&Ci(F,Ee),ue;if(ge===null){for(;!Fe.done;Ee++,Fe=z.next())Fe=J(F,Fe.value,Z),Fe!==null&&(V=p(Fe,V,Ee),me===null?ue=Fe:me.sibling=Fe,me=Fe);return Ye&&Ci(F,Ee),ue}for(ge=c(F,ge);!Fe.done;Ee++,Fe=z.next())Fe=ie(ge,F,Ee,Fe.value,Z),Fe!==null&&(t&&Fe.alternate!==null&&ge.delete(Fe.key===null?Ee:Fe.key),V=p(Fe,V,Ee),me===null?ue=Fe:me.sibling=Fe,me=Fe);return t&&ge.forEach(function($v){return r(F,$v)}),Ye&&Ci(F,Ee),ue}function st(F,V,z,Z){if(typeof z=="object"&&z!==null&&z.type===x&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case Ce:e:{for(var ue=z.key,me=V;me!==null;){if(me.key===ue){if(ue=z.type,ue===x){if(me.tag===7){o(F,me.sibling),V=d(me,z.props.children),V.return=F,F=V;break e}}else if(me.elementType===ue||typeof ue=="object"&&ue!==null&&ue.$$typeof===je&&ff(ue)===me.type){o(F,me.sibling),V=d(me,z.props),V.ref=Fo(F,me,z),V.return=F,F=V;break e}o(F,me);break}else r(F,me);me=me.sibling}z.type===x?(V=Li(z.props.children,F.mode,Z,z.key),V.return=F,F=V):(Z=Dl(z.type,z.key,z.props,null,F.mode,Z),Z.ref=Fo(F,V,z),Z.return=F,F=Z)}return _(F);case Ie:e:{for(me=z.key;V!==null;){if(V.key===me)if(V.tag===4&&V.stateNode.containerInfo===z.containerInfo&&V.stateNode.implementation===z.implementation){o(F,V.sibling),V=d(V,z.children||[]),V.return=F,F=V;break e}else{o(F,V);break}else r(F,V);V=V.sibling}V=th(z,F.mode,Z),V.return=F,F=V}return _(F);case je:return me=z._init,st(F,V,me(z._payload),Z)}if(Jn(z))return ae(F,V,z,Z);if(de(z))return le(F,V,z,Z);ll(F,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,V!==null&&V.tag===6?(o(F,V.sibling),V=d(V,z),V.return=F,F=V):(o(F,V),V=eh(z,F.mode,Z),V.return=F,F=V),_(F)):o(F,V)}return st}var Cs=pf(!0),mf=pf(!1),ul=Or(null),cl=null,As=null,cc=null;function hc(){cc=As=cl=null}function dc(t){var r=ul.current;Ge(ul),t._currentValue=r}function fc(t,r,o){for(;t!==null;){var c=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),t===o)break;t=t.return}}function Ps(t,r){cl=t,cc=As=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&r&&(Wt=!0),t.firstContext=null)}function pn(t){var r=t._currentValue;if(cc!==t)if(t={context:t,memoizedValue:r,next:null},As===null){if(cl===null)throw Error(n(308));As=t,cl.dependencies={lanes:0,firstContext:t}}else As=As.next=t;return r}var Ai=null;function pc(t){Ai===null?Ai=[t]:Ai.push(t)}function gf(t,r,o,c){var d=r.interleaved;return d===null?(o.next=o,pc(r)):(o.next=d.next,d.next=o),r.interleaved=o,hr(t,c)}function hr(t,r){t.lanes|=r;var o=t.alternate;for(o!==null&&(o.lanes|=r),o=t,t=t.return;t!==null;)t.childLanes|=r,o=t.alternate,o!==null&&(o.childLanes|=r),o=t,t=t.return;return o.tag===3?o.stateNode:null}var Ur=!1;function mc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function yf(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function dr(t,r){return{eventTime:t,lane:r,tag:0,payload:null,callback:null,next:null}}function zr(t,r,o){var c=t.updateQueue;if(c===null)return null;if(c=c.shared,Me&2){var d=c.pending;return d===null?r.next=r:(r.next=d.next,d.next=r),c.pending=r,hr(t,o)}return d=c.interleaved,d===null?(r.next=r,pc(c)):(r.next=d.next,d.next=r),c.interleaved=r,hr(t,o)}function hl(t,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194240)!==0)){var c=r.lanes;c&=t.pendingLanes,o|=c,r.lanes=o,Pr(t,o)}}function vf(t,r){var o=t.updateQueue,c=t.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var d=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var _={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};p===null?d=p=_:p=p.next=_,o=o.next}while(o!==null);p===null?d=p=r:p=p.next=r}else d=p=r;o={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:p,shared:c.shared,effects:c.effects},t.updateQueue=o;return}t=o.lastBaseUpdate,t===null?o.firstBaseUpdate=r:t.next=r,o.lastBaseUpdate=r}function dl(t,r,o,c){var d=t.updateQueue;Ur=!1;var p=d.firstBaseUpdate,_=d.lastBaseUpdate,I=d.shared.pending;if(I!==null){d.shared.pending=null;var P=I,B=P.next;P.next=null,_===null?p=B:_.next=B,_=P;var X=t.alternate;X!==null&&(X=X.updateQueue,I=X.lastBaseUpdate,I!==_&&(I===null?X.firstBaseUpdate=B:I.next=B,X.lastBaseUpdate=P))}if(p!==null){var J=d.baseState;_=0,X=B=P=null,I=p;do{var G=I.lane,ie=I.eventTime;if((c&G)===G){X!==null&&(X=X.next={eventTime:ie,lane:0,tag:I.tag,payload:I.payload,callback:I.callback,next:null});e:{var ae=t,le=I;switch(G=r,ie=o,le.tag){case 1:if(ae=le.payload,typeof ae=="function"){J=ae.call(ie,J,G);break e}J=ae;break e;case 3:ae.flags=ae.flags&-65537|128;case 0:if(ae=le.payload,G=typeof ae=="function"?ae.call(ie,J,G):ae,G==null)break e;J=ne({},J,G);break e;case 2:Ur=!0}}I.callback!==null&&I.lane!==0&&(t.flags|=64,G=d.effects,G===null?d.effects=[I]:G.push(I))}else ie={eventTime:ie,lane:G,tag:I.tag,payload:I.payload,callback:I.callback,next:null},X===null?(B=X=ie,P=J):X=X.next=ie,_|=G;if(I=I.next,I===null){if(I=d.shared.pending,I===null)break;G=I,I=G.next,G.next=null,d.lastBaseUpdate=G,d.shared.pending=null}}while(!0);if(X===null&&(P=J),d.baseState=P,d.firstBaseUpdate=B,d.lastBaseUpdate=X,r=d.shared.interleaved,r!==null){d=r;do _|=d.lane,d=d.next;while(d!==r)}else p===null&&(d.shared.lanes=0);xi|=_,t.lanes=_,t.memoizedState=J}}function _f(t,r,o){if(t=r.effects,r.effects=null,t!==null)for(r=0;r<t.length;r++){var c=t[r],d=c.callback;if(d!==null){if(c.callback=null,c=o,typeof d!="function")throw Error(n(191,d));d.call(c)}}}var Uo={},jn=Or(Uo),zo=Or(Uo),bo=Or(Uo);function Pi(t){if(t===Uo)throw Error(n(174));return t}function gc(t,r){switch(Qe(bo,r),Qe(zo,t),Qe(jn,Uo),t=r.nodeType,t){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:ht(null,"");break;default:t=t===8?r.parentNode:r,r=t.namespaceURI||null,t=t.tagName,r=ht(r,t)}Ge(jn),Qe(jn,r)}function ks(){Ge(jn),Ge(zo),Ge(bo)}function Ef(t){Pi(bo.current);var r=Pi(jn.current),o=ht(r,t.type);r!==o&&(Qe(zo,t),Qe(jn,o))}function yc(t){zo.current===t&&(Ge(jn),Ge(zo))}var Ze=Or(0);function fl(t){for(var r=t;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if(r.flags&128)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var vc=[];function _c(){for(var t=0;t<vc.length;t++)vc[t]._workInProgressVersionPrimary=null;vc.length=0}var pl=ce.ReactCurrentDispatcher,Ec=ce.ReactCurrentBatchConfig,ki=0,et=null,ft=null,Et=null,ml=!1,Bo=!1,jo=0,dv=0;function Dt(){throw Error(n(321))}function wc(t,r){if(r===null)return!1;for(var o=0;o<r.length&&o<t.length;o++)if(!An(t[o],r[o]))return!1;return!0}function Tc(t,r,o,c,d,p){if(ki=p,et=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,pl.current=t===null||t.memoizedState===null?gv:yv,t=o(c,d),Bo){p=0;do{if(Bo=!1,jo=0,25<=p)throw Error(n(301));p+=1,Et=ft=null,r.updateQueue=null,pl.current=vv,t=o(c,d)}while(Bo)}if(pl.current=vl,r=ft!==null&&ft.next!==null,ki=0,Et=ft=et=null,ml=!1,r)throw Error(n(300));return t}function Sc(){var t=jo!==0;return jo=0,t}function $n(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Et===null?et.memoizedState=Et=t:Et=Et.next=t,Et}function mn(){if(ft===null){var t=et.alternate;t=t!==null?t.memoizedState:null}else t=ft.next;var r=Et===null?et.memoizedState:Et.next;if(r!==null)Et=r,ft=t;else{if(t===null)throw Error(n(310));ft=t,t={memoizedState:ft.memoizedState,baseState:ft.baseState,baseQueue:ft.baseQueue,queue:ft.queue,next:null},Et===null?et.memoizedState=Et=t:Et=Et.next=t}return Et}function $o(t,r){return typeof r=="function"?r(t):r}function Ic(t){var r=mn(),o=r.queue;if(o===null)throw Error(n(311));o.lastRenderedReducer=t;var c=ft,d=c.baseQueue,p=o.pending;if(p!==null){if(d!==null){var _=d.next;d.next=p.next,p.next=_}c.baseQueue=d=p,o.pending=null}if(d!==null){p=d.next,c=c.baseState;var I=_=null,P=null,B=p;do{var X=B.lane;if((ki&X)===X)P!==null&&(P=P.next={lane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),c=B.hasEagerState?B.eagerState:t(c,B.action);else{var J={lane:X,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null};P===null?(I=P=J,_=c):P=P.next=J,et.lanes|=X,xi|=X}B=B.next}while(B!==null&&B!==p);P===null?_=c:P.next=I,An(c,r.memoizedState)||(Wt=!0),r.memoizedState=c,r.baseState=_,r.baseQueue=P,o.lastRenderedState=c}if(t=o.interleaved,t!==null){d=t;do p=d.lane,et.lanes|=p,xi|=p,d=d.next;while(d!==t)}else d===null&&(o.lanes=0);return[r.memoizedState,o.dispatch]}function Rc(t){var r=mn(),o=r.queue;if(o===null)throw Error(n(311));o.lastRenderedReducer=t;var c=o.dispatch,d=o.pending,p=r.memoizedState;if(d!==null){o.pending=null;var _=d=d.next;do p=t(p,_.action),_=_.next;while(_!==d);An(p,r.memoizedState)||(Wt=!0),r.memoizedState=p,r.baseQueue===null&&(r.baseState=p),o.lastRenderedState=p}return[p,c]}function wf(){}function Tf(t,r){var o=et,c=mn(),d=r(),p=!An(c.memoizedState,d);if(p&&(c.memoizedState=d,Wt=!0),c=c.queue,Cc(Rf.bind(null,o,c,t),[t]),c.getSnapshot!==r||p||Et!==null&&Et.memoizedState.tag&1){if(o.flags|=2048,qo(9,If.bind(null,o,c,d,r),void 0,null),wt===null)throw Error(n(349));ki&30||Sf(o,r,d)}return d}function Sf(t,r,o){t.flags|=16384,t={getSnapshot:r,value:o},r=et.updateQueue,r===null?(r={lastEffect:null,stores:null},et.updateQueue=r,r.stores=[t]):(o=r.stores,o===null?r.stores=[t]:o.push(t))}function If(t,r,o,c){r.value=o,r.getSnapshot=c,Cf(r)&&Af(t)}function Rf(t,r,o){return o(function(){Cf(r)&&Af(t)})}function Cf(t){var r=t.getSnapshot;t=t.value;try{var o=r();return!An(t,o)}catch{return!0}}function Af(t){var r=hr(t,1);r!==null&&Dn(r,t,1,-1)}function Pf(t){var r=$n();return typeof t=="function"&&(t=t()),r.memoizedState=r.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$o,lastRenderedState:t},r.queue=t,t=t.dispatch=mv.bind(null,et,t),[r.memoizedState,t]}function qo(t,r,o,c){return t={tag:t,create:r,destroy:o,deps:c,next:null},r=et.updateQueue,r===null?(r={lastEffect:null,stores:null},et.updateQueue=r,r.lastEffect=t.next=t):(o=r.lastEffect,o===null?r.lastEffect=t.next=t:(c=o.next,o.next=t,t.next=c,r.lastEffect=t)),t}function kf(){return mn().memoizedState}function gl(t,r,o,c){var d=$n();et.flags|=t,d.memoizedState=qo(1|r,o,void 0,c===void 0?null:c)}function yl(t,r,o,c){var d=mn();c=c===void 0?null:c;var p=void 0;if(ft!==null){var _=ft.memoizedState;if(p=_.destroy,c!==null&&wc(c,_.deps)){d.memoizedState=qo(r,o,p,c);return}}et.flags|=t,d.memoizedState=qo(1|r,o,p,c)}function xf(t,r){return gl(8390656,8,t,r)}function Cc(t,r){return yl(2048,8,t,r)}function Vf(t,r){return yl(4,2,t,r)}function Df(t,r){return yl(4,4,t,r)}function Nf(t,r){if(typeof r=="function")return t=t(),r(t),function(){r(null)};if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function Lf(t,r,o){return o=o!=null?o.concat([t]):null,yl(4,4,Nf.bind(null,r,t),o)}function Ac(){}function Of(t,r){var o=mn();r=r===void 0?null:r;var c=o.memoizedState;return c!==null&&r!==null&&wc(r,c[1])?c[0]:(o.memoizedState=[t,r],t)}function Mf(t,r){var o=mn();r=r===void 0?null:r;var c=o.memoizedState;return c!==null&&r!==null&&wc(r,c[1])?c[0]:(t=t(),o.memoizedState=[t,r],t)}function Ff(t,r,o){return ki&21?(An(o,r)||(o=vi(),et.lanes|=o,xi|=o,t.baseState=!0),r):(t.baseState&&(t.baseState=!1,Wt=!0),t.memoizedState=o)}function fv(t,r){var o=xe;xe=o!==0&&4>o?o:4,t(!0);var c=Ec.transition;Ec.transition={};try{t(!1),r()}finally{xe=o,Ec.transition=c}}function Uf(){return mn().memoizedState}function pv(t,r,o){var c=$r(t);if(o={lane:c,action:o,hasEagerState:!1,eagerState:null,next:null},zf(t))bf(r,o);else if(o=gf(t,r,o,c),o!==null){var d=Bt();Dn(o,t,c,d),Bf(o,r,c)}}function mv(t,r,o){var c=$r(t),d={lane:c,action:o,hasEagerState:!1,eagerState:null,next:null};if(zf(t))bf(r,d);else{var p=t.alternate;if(t.lanes===0&&(p===null||p.lanes===0)&&(p=r.lastRenderedReducer,p!==null))try{var _=r.lastRenderedState,I=p(_,o);if(d.hasEagerState=!0,d.eagerState=I,An(I,_)){var P=r.interleaved;P===null?(d.next=d,pc(r)):(d.next=P.next,P.next=d),r.interleaved=d;return}}catch{}finally{}o=gf(t,r,d,c),o!==null&&(d=Bt(),Dn(o,t,c,d),Bf(o,r,c))}}function zf(t){var r=t.alternate;return t===et||r!==null&&r===et}function bf(t,r){Bo=ml=!0;var o=t.pending;o===null?r.next=r:(r.next=o.next,o.next=r),t.pending=r}function Bf(t,r,o){if(o&4194240){var c=r.lanes;c&=t.pendingLanes,o|=c,r.lanes=o,Pr(t,o)}}var vl={readContext:pn,useCallback:Dt,useContext:Dt,useEffect:Dt,useImperativeHandle:Dt,useInsertionEffect:Dt,useLayoutEffect:Dt,useMemo:Dt,useReducer:Dt,useRef:Dt,useState:Dt,useDebugValue:Dt,useDeferredValue:Dt,useTransition:Dt,useMutableSource:Dt,useSyncExternalStore:Dt,useId:Dt,unstable_isNewReconciler:!1},gv={readContext:pn,useCallback:function(t,r){return $n().memoizedState=[t,r===void 0?null:r],t},useContext:pn,useEffect:xf,useImperativeHandle:function(t,r,o){return o=o!=null?o.concat([t]):null,gl(4194308,4,Nf.bind(null,r,t),o)},useLayoutEffect:function(t,r){return gl(4194308,4,t,r)},useInsertionEffect:function(t,r){return gl(4,2,t,r)},useMemo:function(t,r){var o=$n();return r=r===void 0?null:r,t=t(),o.memoizedState=[t,r],t},useReducer:function(t,r,o){var c=$n();return r=o!==void 0?o(r):r,c.memoizedState=c.baseState=r,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},c.queue=t,t=t.dispatch=pv.bind(null,et,t),[c.memoizedState,t]},useRef:function(t){var r=$n();return t={current:t},r.memoizedState=t},useState:Pf,useDebugValue:Ac,useDeferredValue:function(t){return $n().memoizedState=t},useTransition:function(){var t=Pf(!1),r=t[0];return t=fv.bind(null,t[1]),$n().memoizedState=t,[r,t]},useMutableSource:function(){},useSyncExternalStore:function(t,r,o){var c=et,d=$n();if(Ye){if(o===void 0)throw Error(n(407));o=o()}else{if(o=r(),wt===null)throw Error(n(349));ki&30||Sf(c,r,o)}d.memoizedState=o;var p={value:o,getSnapshot:r};return d.queue=p,xf(Rf.bind(null,c,p,t),[t]),c.flags|=2048,qo(9,If.bind(null,c,p,o,r),void 0,null),o},useId:function(){var t=$n(),r=wt.identifierPrefix;if(Ye){var o=cr,c=ur;o=(c&~(1<<32-Ut(c)-1)).toString(32)+o,r=":"+r+"R"+o,o=jo++,0<o&&(r+="H"+o.toString(32)),r+=":"}else o=dv++,r=":"+r+"r"+o.toString(32)+":";return t.memoizedState=r},unstable_isNewReconciler:!1},yv={readContext:pn,useCallback:Of,useContext:pn,useEffect:Cc,useImperativeHandle:Lf,useInsertionEffect:Vf,useLayoutEffect:Df,useMemo:Mf,useReducer:Ic,useRef:kf,useState:function(){return Ic($o)},useDebugValue:Ac,useDeferredValue:function(t){var r=mn();return Ff(r,ft.memoizedState,t)},useTransition:function(){var t=Ic($o)[0],r=mn().memoizedState;return[t,r]},useMutableSource:wf,useSyncExternalStore:Tf,useId:Uf,unstable_isNewReconciler:!1},vv={readContext:pn,useCallback:Of,useContext:pn,useEffect:Cc,useImperativeHandle:Lf,useInsertionEffect:Vf,useLayoutEffect:Df,useMemo:Mf,useReducer:Rc,useRef:kf,useState:function(){return Rc($o)},useDebugValue:Ac,useDeferredValue:function(t){var r=mn();return ft===null?r.memoizedState=t:Ff(r,ft.memoizedState,t)},useTransition:function(){var t=Rc($o)[0],r=mn().memoizedState;return[t,r]},useMutableSource:wf,useSyncExternalStore:Tf,useId:Uf,unstable_isNewReconciler:!1};function kn(t,r){if(t&&t.defaultProps){r=ne({},r),t=t.defaultProps;for(var o in t)r[o]===void 0&&(r[o]=t[o]);return r}return r}function Pc(t,r,o,c){r=t.memoizedState,o=o(c,r),o=o==null?r:ne({},r,o),t.memoizedState=o,t.lanes===0&&(t.updateQueue.baseState=o)}var _l={isMounted:function(t){return(t=t._reactInternals)?En(t)===t:!1},enqueueSetState:function(t,r,o){t=t._reactInternals;var c=Bt(),d=$r(t),p=dr(c,d);p.payload=r,o!=null&&(p.callback=o),r=zr(t,p,d),r!==null&&(Dn(r,t,d,c),hl(r,t,d))},enqueueReplaceState:function(t,r,o){t=t._reactInternals;var c=Bt(),d=$r(t),p=dr(c,d);p.tag=1,p.payload=r,o!=null&&(p.callback=o),r=zr(t,p,d),r!==null&&(Dn(r,t,d,c),hl(r,t,d))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var o=Bt(),c=$r(t),d=dr(o,c);d.tag=2,r!=null&&(d.callback=r),r=zr(t,d,c),r!==null&&(Dn(r,t,c,o),hl(r,t,c))}};function jf(t,r,o,c,d,p,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(c,p,_):r.prototype&&r.prototype.isPureReactComponent?!xo(o,c)||!xo(d,p):!0}function $f(t,r,o){var c=!1,d=Mr,p=r.contextType;return typeof p=="object"&&p!==null?p=pn(p):(d=Ht(r)?Ii:Vt.current,c=r.contextTypes,p=(c=c!=null)?Ts(t,d):Mr),r=new r(o,p),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=_l,t.stateNode=r,r._reactInternals=t,c&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=d,t.__reactInternalMemoizedMaskedChildContext=p),r}function qf(t,r,o,c){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,c),r.state!==t&&_l.enqueueReplaceState(r,r.state,null)}function kc(t,r,o,c){var d=t.stateNode;d.props=o,d.state=t.memoizedState,d.refs={},mc(t);var p=r.contextType;typeof p=="object"&&p!==null?d.context=pn(p):(p=Ht(r)?Ii:Vt.current,d.context=Ts(t,p)),d.state=t.memoizedState,p=r.getDerivedStateFromProps,typeof p=="function"&&(Pc(t,r,p,o),d.state=t.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(r=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),r!==d.state&&_l.enqueueReplaceState(d,d.state,null),dl(t,o,d,c),d.state=t.memoizedState),typeof d.componentDidMount=="function"&&(t.flags|=4194308)}function xs(t,r){try{var o="",c=r;do o+=Ae(c),c=c.return;while(c);var d=o}catch(p){d=`
Error generating stack: `+p.message+`
`+p.stack}return{value:t,source:r,stack:d,digest:null}}function xc(t,r,o){return{value:t,source:null,stack:o??null,digest:r??null}}function Vc(t,r){try{console.error(r.value)}catch(o){setTimeout(function(){throw o})}}var _v=typeof WeakMap=="function"?WeakMap:Map;function Hf(t,r,o){o=dr(-1,o),o.tag=3,o.payload={element:null};var c=r.value;return o.callback=function(){Cl||(Cl=!0,Wc=c),Vc(t,r)},o}function Wf(t,r,o){o=dr(-1,o),o.tag=3;var c=t.type.getDerivedStateFromError;if(typeof c=="function"){var d=r.value;o.payload=function(){return c(d)},o.callback=function(){Vc(t,r)}}var p=t.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(o.callback=function(){Vc(t,r),typeof c!="function"&&(Br===null?Br=new Set([this]):Br.add(this));var _=r.stack;this.componentDidCatch(r.value,{componentStack:_!==null?_:""})}),o}function Qf(t,r,o){var c=t.pingCache;if(c===null){c=t.pingCache=new _v;var d=new Set;c.set(r,d)}else d=c.get(r),d===void 0&&(d=new Set,c.set(r,d));d.has(o)||(d.add(o),t=Nv.bind(null,t,r,o),r.then(t,t))}function Kf(t){do{var r;if((r=t.tag===13)&&(r=t.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return t;t=t.return}while(t!==null);return null}function Gf(t,r,o,c,d){return t.mode&1?(t.flags|=65536,t.lanes=d,t):(t===r?t.flags|=65536:(t.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(r=dr(-1,1),r.tag=2,zr(o,r,1))),o.lanes|=1),t)}var Ev=ce.ReactCurrentOwner,Wt=!1;function bt(t,r,o,c){r.child=t===null?mf(r,null,o,c):Cs(r,t.child,o,c)}function Xf(t,r,o,c,d){o=o.render;var p=r.ref;return Ps(r,d),c=Tc(t,r,o,c,p,d),o=Sc(),t!==null&&!Wt?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~d,fr(t,r,d)):(Ye&&o&&sc(r),r.flags|=1,bt(t,r,c,d),r.child)}function Yf(t,r,o,c,d){if(t===null){var p=o.type;return typeof p=="function"&&!Zc(p)&&p.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(r.tag=15,r.type=p,Jf(t,r,p,c,d)):(t=Dl(o.type,null,c,r,r.mode,d),t.ref=r.ref,t.return=r,r.child=t)}if(p=t.child,!(t.lanes&d)){var _=p.memoizedProps;if(o=o.compare,o=o!==null?o:xo,o(_,c)&&t.ref===r.ref)return fr(t,r,d)}return r.flags|=1,t=Hr(p,c),t.ref=r.ref,t.return=r,r.child=t}function Jf(t,r,o,c,d){if(t!==null){var p=t.memoizedProps;if(xo(p,c)&&t.ref===r.ref)if(Wt=!1,r.pendingProps=c=p,(t.lanes&d)!==0)t.flags&131072&&(Wt=!0);else return r.lanes=t.lanes,fr(t,r,d)}return Dc(t,r,o,c,d)}function Zf(t,r,o){var c=r.pendingProps,d=c.children,p=t!==null?t.memoizedState:null;if(c.mode==="hidden")if(!(r.mode&1))r.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qe(Ds,sn),sn|=o;else{if(!(o&1073741824))return t=p!==null?p.baseLanes|o:o,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:t,cachePool:null,transitions:null},r.updateQueue=null,Qe(Ds,sn),sn|=t,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=p!==null?p.baseLanes:o,Qe(Ds,sn),sn|=c}else p!==null?(c=p.baseLanes|o,r.memoizedState=null):c=o,Qe(Ds,sn),sn|=c;return bt(t,r,d,o),r.child}function ep(t,r){var o=r.ref;(t===null&&o!==null||t!==null&&t.ref!==o)&&(r.flags|=512,r.flags|=2097152)}function Dc(t,r,o,c,d){var p=Ht(o)?Ii:Vt.current;return p=Ts(r,p),Ps(r,d),o=Tc(t,r,o,c,p,d),c=Sc(),t!==null&&!Wt?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~d,fr(t,r,d)):(Ye&&c&&sc(r),r.flags|=1,bt(t,r,o,d),r.child)}function tp(t,r,o,c,d){if(Ht(o)){var p=!0;rl(r)}else p=!1;if(Ps(r,d),r.stateNode===null)wl(t,r),$f(r,o,c),kc(r,o,c,d),c=!0;else if(t===null){var _=r.stateNode,I=r.memoizedProps;_.props=I;var P=_.context,B=o.contextType;typeof B=="object"&&B!==null?B=pn(B):(B=Ht(o)?Ii:Vt.current,B=Ts(r,B));var X=o.getDerivedStateFromProps,J=typeof X=="function"||typeof _.getSnapshotBeforeUpdate=="function";J||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(I!==c||P!==B)&&qf(r,_,c,B),Ur=!1;var G=r.memoizedState;_.state=G,dl(r,c,_,d),P=r.memoizedState,I!==c||G!==P||qt.current||Ur?(typeof X=="function"&&(Pc(r,o,X,c),P=r.memoizedState),(I=Ur||jf(r,o,I,c,G,P,B))?(J||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(r.flags|=4194308)):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=P),_.props=c,_.state=P,_.context=B,c=I):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{_=r.stateNode,yf(t,r),I=r.memoizedProps,B=r.type===r.elementType?I:kn(r.type,I),_.props=B,J=r.pendingProps,G=_.context,P=o.contextType,typeof P=="object"&&P!==null?P=pn(P):(P=Ht(o)?Ii:Vt.current,P=Ts(r,P));var ie=o.getDerivedStateFromProps;(X=typeof ie=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(I!==J||G!==P)&&qf(r,_,c,P),Ur=!1,G=r.memoizedState,_.state=G,dl(r,c,_,d);var ae=r.memoizedState;I!==J||G!==ae||qt.current||Ur?(typeof ie=="function"&&(Pc(r,o,ie,c),ae=r.memoizedState),(B=Ur||jf(r,o,B,c,G,ae,P)||!1)?(X||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(c,ae,P),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(c,ae,P)),typeof _.componentDidUpdate=="function"&&(r.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof _.componentDidUpdate!="function"||I===t.memoizedProps&&G===t.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||I===t.memoizedProps&&G===t.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=ae),_.props=c,_.state=ae,_.context=P,c=B):(typeof _.componentDidUpdate!="function"||I===t.memoizedProps&&G===t.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||I===t.memoizedProps&&G===t.memoizedState||(r.flags|=1024),c=!1)}return Nc(t,r,o,c,p,d)}function Nc(t,r,o,c,d,p){ep(t,r);var _=(r.flags&128)!==0;if(!c&&!_)return d&&of(r,o,!1),fr(t,r,p);c=r.stateNode,Ev.current=r;var I=_&&typeof o.getDerivedStateFromError!="function"?null:c.render();return r.flags|=1,t!==null&&_?(r.child=Cs(r,t.child,null,p),r.child=Cs(r,null,I,p)):bt(t,r,I,p),r.memoizedState=c.state,d&&of(r,o,!0),r.child}function np(t){var r=t.stateNode;r.pendingContext?rf(t,r.pendingContext,r.pendingContext!==r.context):r.context&&rf(t,r.context,!1),gc(t,r.containerInfo)}function rp(t,r,o,c,d){return Rs(),uc(d),r.flags|=256,bt(t,r,o,c),r.child}var Lc={dehydrated:null,treeContext:null,retryLane:0};function Oc(t){return{baseLanes:t,cachePool:null,transitions:null}}function ip(t,r,o){var c=r.pendingProps,d=Ze.current,p=!1,_=(r.flags&128)!==0,I;if((I=_)||(I=t!==null&&t.memoizedState===null?!1:(d&2)!==0),I?(p=!0,r.flags&=-129):(t===null||t.memoizedState!==null)&&(d|=1),Qe(Ze,d&1),t===null)return lc(r),t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(r.mode&1?t.data==="$!"?r.lanes=8:r.lanes=1073741824:r.lanes=1,null):(_=c.children,t=c.fallback,p?(c=r.mode,p=r.child,_={mode:"hidden",children:_},!(c&1)&&p!==null?(p.childLanes=0,p.pendingProps=_):p=Nl(_,c,0,null),t=Li(t,c,o,null),p.return=r,t.return=r,p.sibling=t,r.child=p,r.child.memoizedState=Oc(o),r.memoizedState=Lc,t):Mc(r,_));if(d=t.memoizedState,d!==null&&(I=d.dehydrated,I!==null))return wv(t,r,_,c,I,d,o);if(p){p=c.fallback,_=r.mode,d=t.child,I=d.sibling;var P={mode:"hidden",children:c.children};return!(_&1)&&r.child!==d?(c=r.child,c.childLanes=0,c.pendingProps=P,r.deletions=null):(c=Hr(d,P),c.subtreeFlags=d.subtreeFlags&14680064),I!==null?p=Hr(I,p):(p=Li(p,_,o,null),p.flags|=2),p.return=r,c.return=r,c.sibling=p,r.child=c,c=p,p=r.child,_=t.child.memoizedState,_=_===null?Oc(o):{baseLanes:_.baseLanes|o,cachePool:null,transitions:_.transitions},p.memoizedState=_,p.childLanes=t.childLanes&~o,r.memoizedState=Lc,c}return p=t.child,t=p.sibling,c=Hr(p,{mode:"visible",children:c.children}),!(r.mode&1)&&(c.lanes=o),c.return=r,c.sibling=null,t!==null&&(o=r.deletions,o===null?(r.deletions=[t],r.flags|=16):o.push(t)),r.child=c,r.memoizedState=null,c}function Mc(t,r){return r=Nl({mode:"visible",children:r},t.mode,0,null),r.return=t,t.child=r}function El(t,r,o,c){return c!==null&&uc(c),Cs(r,t.child,null,o),t=Mc(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function wv(t,r,o,c,d,p,_){if(o)return r.flags&256?(r.flags&=-257,c=xc(Error(n(422))),El(t,r,_,c)):r.memoizedState!==null?(r.child=t.child,r.flags|=128,null):(p=c.fallback,d=r.mode,c=Nl({mode:"visible",children:c.children},d,0,null),p=Li(p,d,_,null),p.flags|=2,c.return=r,p.return=r,c.sibling=p,r.child=c,r.mode&1&&Cs(r,t.child,null,_),r.child.memoizedState=Oc(_),r.memoizedState=Lc,p);if(!(r.mode&1))return El(t,r,_,null);if(d.data==="$!"){if(c=d.nextSibling&&d.nextSibling.dataset,c)var I=c.dgst;return c=I,p=Error(n(419)),c=xc(p,c,void 0),El(t,r,_,c)}if(I=(_&t.childLanes)!==0,Wt||I){if(c=wt,c!==null){switch(_&-_){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=d&(c.suspendedLanes|_)?0:d,d!==0&&d!==p.retryLane&&(p.retryLane=d,hr(t,d),Dn(c,t,d,-1))}return Jc(),c=xc(Error(n(421))),El(t,r,_,c)}return d.data==="$?"?(r.flags|=128,r.child=t.child,r=Lv.bind(null,t),d._reactRetry=r,null):(t=p.treeContext,rn=Lr(d.nextSibling),nn=r,Ye=!0,Pn=null,t!==null&&(dn[fn++]=ur,dn[fn++]=cr,dn[fn++]=Ri,ur=t.id,cr=t.overflow,Ri=r),r=Mc(r,c.children),r.flags|=4096,r)}function sp(t,r,o){t.lanes|=r;var c=t.alternate;c!==null&&(c.lanes|=r),fc(t.return,r,o)}function Fc(t,r,o,c,d){var p=t.memoizedState;p===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:d}:(p.isBackwards=r,p.rendering=null,p.renderingStartTime=0,p.last=c,p.tail=o,p.tailMode=d)}function op(t,r,o){var c=r.pendingProps,d=c.revealOrder,p=c.tail;if(bt(t,r,c.children,o),c=Ze.current,c&2)c=c&1|2,r.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&sp(t,o,r);else if(t.tag===19)sp(t,o,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}c&=1}if(Qe(Ze,c),!(r.mode&1))r.memoizedState=null;else switch(d){case"forwards":for(o=r.child,d=null;o!==null;)t=o.alternate,t!==null&&fl(t)===null&&(d=o),o=o.sibling;o=d,o===null?(d=r.child,r.child=null):(d=o.sibling,o.sibling=null),Fc(r,!1,d,o,p);break;case"backwards":for(o=null,d=r.child,r.child=null;d!==null;){if(t=d.alternate,t!==null&&fl(t)===null){r.child=d;break}t=d.sibling,d.sibling=o,o=d,d=t}Fc(r,!0,o,null,p);break;case"together":Fc(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function wl(t,r){!(r.mode&1)&&t!==null&&(t.alternate=null,r.alternate=null,r.flags|=2)}function fr(t,r,o){if(t!==null&&(r.dependencies=t.dependencies),xi|=r.lanes,!(o&r.childLanes))return null;if(t!==null&&r.child!==t.child)throw Error(n(153));if(r.child!==null){for(t=r.child,o=Hr(t,t.pendingProps),r.child=o,o.return=r;t.sibling!==null;)t=t.sibling,o=o.sibling=Hr(t,t.pendingProps),o.return=r;o.sibling=null}return r.child}function Tv(t,r,o){switch(r.tag){case 3:np(r),Rs();break;case 5:Ef(r);break;case 1:Ht(r.type)&&rl(r);break;case 4:gc(r,r.stateNode.containerInfo);break;case 10:var c=r.type._context,d=r.memoizedProps.value;Qe(ul,c._currentValue),c._currentValue=d;break;case 13:if(c=r.memoizedState,c!==null)return c.dehydrated!==null?(Qe(Ze,Ze.current&1),r.flags|=128,null):o&r.child.childLanes?ip(t,r,o):(Qe(Ze,Ze.current&1),t=fr(t,r,o),t!==null?t.sibling:null);Qe(Ze,Ze.current&1);break;case 19:if(c=(o&r.childLanes)!==0,t.flags&128){if(c)return op(t,r,o);r.flags|=128}if(d=r.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Qe(Ze,Ze.current),c)break;return null;case 22:case 23:return r.lanes=0,Zf(t,r,o)}return fr(t,r,o)}var ap,Uc,lp,up;ap=function(t,r){for(var o=r.child;o!==null;){if(o.tag===5||o.tag===6)t.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return;o=o.return}o.sibling.return=o.return,o=o.sibling}},Uc=function(){},lp=function(t,r,o,c){var d=t.memoizedProps;if(d!==c){t=r.stateNode,Pi(jn.current);var p=null;switch(o){case"input":d=ai(t,d),c=ai(t,c),p=[];break;case"select":d=ne({},d,{value:void 0}),c=ne({},c,{value:void 0}),p=[];break;case"textarea":d=io(t,d),c=io(t,c),p=[];break;default:typeof d.onClick!="function"&&typeof c.onClick=="function"&&(t.onclick=el)}co(o,c);var _;o=null;for(B in d)if(!c.hasOwnProperty(B)&&d.hasOwnProperty(B)&&d[B]!=null)if(B==="style"){var I=d[B];for(_ in I)I.hasOwnProperty(_)&&(o||(o={}),o[_]="")}else B!=="dangerouslySetInnerHTML"&&B!=="children"&&B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&B!=="autoFocus"&&(a.hasOwnProperty(B)?p||(p=[]):(p=p||[]).push(B,null));for(B in c){var P=c[B];if(I=d!=null?d[B]:void 0,c.hasOwnProperty(B)&&P!==I&&(P!=null||I!=null))if(B==="style")if(I){for(_ in I)!I.hasOwnProperty(_)||P&&P.hasOwnProperty(_)||(o||(o={}),o[_]="");for(_ in P)P.hasOwnProperty(_)&&I[_]!==P[_]&&(o||(o={}),o[_]=P[_])}else o||(p||(p=[]),p.push(B,o)),o=P;else B==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,I=I?I.__html:void 0,P!=null&&I!==P&&(p=p||[]).push(B,P)):B==="children"?typeof P!="string"&&typeof P!="number"||(p=p||[]).push(B,""+P):B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&(a.hasOwnProperty(B)?(P!=null&&B==="onScroll"&&Ke("scroll",t),p||I===P||(p=[])):(p=p||[]).push(B,P))}o&&(p=p||[]).push("style",o);var B=p;(r.updateQueue=B)&&(r.flags|=4)}},up=function(t,r,o,c){o!==c&&(r.flags|=4)};function Ho(t,r){if(!Ye)switch(t.tailMode){case"hidden":r=t.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?t.tail=null:o.sibling=null;break;case"collapsed":o=t.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:c.sibling=null}}function Nt(t){var r=t.alternate!==null&&t.alternate.child===t.child,o=0,c=0;if(r)for(var d=t.child;d!==null;)o|=d.lanes|d.childLanes,c|=d.subtreeFlags&14680064,c|=d.flags&14680064,d.return=t,d=d.sibling;else for(d=t.child;d!==null;)o|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=t,d=d.sibling;return t.subtreeFlags|=c,t.childLanes=o,r}function Sv(t,r,o){var c=r.pendingProps;switch(oc(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nt(r),null;case 1:return Ht(r.type)&&nl(),Nt(r),null;case 3:return c=r.stateNode,ks(),Ge(qt),Ge(Vt),_c(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(t===null||t.child===null)&&(al(r)?r.flags|=4:t===null||t.memoizedState.isDehydrated&&!(r.flags&256)||(r.flags|=1024,Pn!==null&&(Gc(Pn),Pn=null))),Uc(t,r),Nt(r),null;case 5:yc(r);var d=Pi(bo.current);if(o=r.type,t!==null&&r.stateNode!=null)lp(t,r,o,c,d),t.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!c){if(r.stateNode===null)throw Error(n(166));return Nt(r),null}if(t=Pi(jn.current),al(r)){c=r.stateNode,o=r.type;var p=r.memoizedProps;switch(c[Bn]=r,c[Oo]=p,t=(r.mode&1)!==0,o){case"dialog":Ke("cancel",c),Ke("close",c);break;case"iframe":case"object":case"embed":Ke("load",c);break;case"video":case"audio":for(d=0;d<Do.length;d++)Ke(Do[d],c);break;case"source":Ke("error",c);break;case"img":case"image":case"link":Ke("error",c),Ke("load",c);break;case"details":Ke("toggle",c);break;case"input":qi(c,p),Ke("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!p.multiple},Ke("invalid",c);break;case"textarea":Wi(c,p),Ke("invalid",c)}co(o,p),d=null;for(var _ in p)if(p.hasOwnProperty(_)){var I=p[_];_==="children"?typeof I=="string"?c.textContent!==I&&(p.suppressHydrationWarning!==!0&&Za(c.textContent,I,t),d=["children",I]):typeof I=="number"&&c.textContent!==""+I&&(p.suppressHydrationWarning!==!0&&Za(c.textContent,I,t),d=["children",""+I]):a.hasOwnProperty(_)&&I!=null&&_==="onScroll"&&Ke("scroll",c)}switch(o){case"input":Yn(c),Ra(c,p,!0);break;case"textarea":Yn(c),so(c);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(c.onclick=el)}c=d,r.updateQueue=c,c!==null&&(r.flags|=4)}else{_=d.nodeType===9?d:d.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=ct(o)),t==="http://www.w3.org/1999/xhtml"?o==="script"?(t=_.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof c.is=="string"?t=_.createElement(o,{is:c.is}):(t=_.createElement(o),o==="select"&&(_=t,c.multiple?_.multiple=!0:c.size&&(_.size=c.size))):t=_.createElementNS(t,o),t[Bn]=r,t[Oo]=c,ap(t,r,!1,!1),r.stateNode=t;e:{switch(_=ho(o,c),o){case"dialog":Ke("cancel",t),Ke("close",t),d=c;break;case"iframe":case"object":case"embed":Ke("load",t),d=c;break;case"video":case"audio":for(d=0;d<Do.length;d++)Ke(Do[d],t);d=c;break;case"source":Ke("error",t),d=c;break;case"img":case"image":case"link":Ke("error",t),Ke("load",t),d=c;break;case"details":Ke("toggle",t),d=c;break;case"input":qi(t,c),d=ai(t,c),Ke("invalid",t);break;case"option":d=c;break;case"select":t._wrapperState={wasMultiple:!!c.multiple},d=ne({},c,{value:void 0}),Ke("invalid",t);break;case"textarea":Wi(t,c),d=io(t,c),Ke("invalid",t);break;default:d=c}co(o,d),I=d;for(p in I)if(I.hasOwnProperty(p)){var P=I[p];p==="style"?lo(t,P):p==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,P!=null&&oo(t,P)):p==="children"?typeof P=="string"?(o!=="textarea"||P!=="")&&Sr(t,P):typeof P=="number"&&Sr(t,""+P):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(a.hasOwnProperty(p)?P!=null&&p==="onScroll"&&Ke("scroll",t):P!=null&&re(t,p,P,_))}switch(o){case"input":Yn(t),Ra(t,c,!1);break;case"textarea":Yn(t),so(t);break;case"option":c.value!=null&&t.setAttribute("value",""+be(c.value));break;case"select":t.multiple=!!c.multiple,p=c.value,p!=null?Zn(t,!!c.multiple,p,!1):c.defaultValue!=null&&Zn(t,!!c.multiple,c.defaultValue,!0);break;default:typeof d.onClick=="function"&&(t.onclick=el)}switch(o){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return Nt(r),null;case 6:if(t&&r.stateNode!=null)up(t,r,t.memoizedProps,c);else{if(typeof c!="string"&&r.stateNode===null)throw Error(n(166));if(o=Pi(bo.current),Pi(jn.current),al(r)){if(c=r.stateNode,o=r.memoizedProps,c[Bn]=r,(p=c.nodeValue!==o)&&(t=nn,t!==null))switch(t.tag){case 3:Za(c.nodeValue,o,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Za(c.nodeValue,o,(t.mode&1)!==0)}p&&(r.flags|=4)}else c=(o.nodeType===9?o:o.ownerDocument).createTextNode(c),c[Bn]=r,r.stateNode=c}return Nt(r),null;case 13:if(Ge(Ze),c=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ye&&rn!==null&&r.mode&1&&!(r.flags&128))df(),Rs(),r.flags|=98560,p=!1;else if(p=al(r),c!==null&&c.dehydrated!==null){if(t===null){if(!p)throw Error(n(318));if(p=r.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(n(317));p[Bn]=r}else Rs(),!(r.flags&128)&&(r.memoizedState=null),r.flags|=4;Nt(r),p=!1}else Pn!==null&&(Gc(Pn),Pn=null),p=!0;if(!p)return r.flags&65536?r:null}return r.flags&128?(r.lanes=o,r):(c=c!==null,c!==(t!==null&&t.memoizedState!==null)&&c&&(r.child.flags|=8192,r.mode&1&&(t===null||Ze.current&1?pt===0&&(pt=3):Jc())),r.updateQueue!==null&&(r.flags|=4),Nt(r),null);case 4:return ks(),Uc(t,r),t===null&&No(r.stateNode.containerInfo),Nt(r),null;case 10:return dc(r.type._context),Nt(r),null;case 17:return Ht(r.type)&&nl(),Nt(r),null;case 19:if(Ge(Ze),p=r.memoizedState,p===null)return Nt(r),null;if(c=(r.flags&128)!==0,_=p.rendering,_===null)if(c)Ho(p,!1);else{if(pt!==0||t!==null&&t.flags&128)for(t=r.child;t!==null;){if(_=fl(t),_!==null){for(r.flags|=128,Ho(p,!1),c=_.updateQueue,c!==null&&(r.updateQueue=c,r.flags|=4),r.subtreeFlags=0,c=o,o=r.child;o!==null;)p=o,t=c,p.flags&=14680066,_=p.alternate,_===null?(p.childLanes=0,p.lanes=t,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=_.childLanes,p.lanes=_.lanes,p.child=_.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=_.memoizedProps,p.memoizedState=_.memoizedState,p.updateQueue=_.updateQueue,p.type=_.type,t=_.dependencies,p.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),o=o.sibling;return Qe(Ze,Ze.current&1|2),r.child}t=t.sibling}p.tail!==null&&We()>Ns&&(r.flags|=128,c=!0,Ho(p,!1),r.lanes=4194304)}else{if(!c)if(t=fl(_),t!==null){if(r.flags|=128,c=!0,o=t.updateQueue,o!==null&&(r.updateQueue=o,r.flags|=4),Ho(p,!0),p.tail===null&&p.tailMode==="hidden"&&!_.alternate&&!Ye)return Nt(r),null}else 2*We()-p.renderingStartTime>Ns&&o!==1073741824&&(r.flags|=128,c=!0,Ho(p,!1),r.lanes=4194304);p.isBackwards?(_.sibling=r.child,r.child=_):(o=p.last,o!==null?o.sibling=_:r.child=_,p.last=_)}return p.tail!==null?(r=p.tail,p.rendering=r,p.tail=r.sibling,p.renderingStartTime=We(),r.sibling=null,o=Ze.current,Qe(Ze,c?o&1|2:o&1),r):(Nt(r),null);case 22:case 23:return Yc(),c=r.memoizedState!==null,t!==null&&t.memoizedState!==null!==c&&(r.flags|=8192),c&&r.mode&1?sn&1073741824&&(Nt(r),r.subtreeFlags&6&&(r.flags|=8192)):Nt(r),null;case 24:return null;case 25:return null}throw Error(n(156,r.tag))}function Iv(t,r){switch(oc(r),r.tag){case 1:return Ht(r.type)&&nl(),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return ks(),Ge(qt),Ge(Vt),_c(),t=r.flags,t&65536&&!(t&128)?(r.flags=t&-65537|128,r):null;case 5:return yc(r),null;case 13:if(Ge(Ze),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(n(340));Rs()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return Ge(Ze),null;case 4:return ks(),null;case 10:return dc(r.type._context),null;case 22:case 23:return Yc(),null;case 24:return null;default:return null}}var Tl=!1,Lt=!1,Rv=typeof WeakSet=="function"?WeakSet:Set,oe=null;function Vs(t,r){var o=t.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(c){rt(t,r,c)}else o.current=null}function zc(t,r,o){try{o()}catch(c){rt(t,r,c)}}var cp=!1;function Cv(t,r){if(Yu=Vr,t=Bd(),$u(t)){if("selectionStart"in t)var o={start:t.selectionStart,end:t.selectionEnd};else e:{o=(o=t.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var d=c.anchorOffset,p=c.focusNode;c=c.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var _=0,I=-1,P=-1,B=0,X=0,J=t,G=null;t:for(;;){for(var ie;J!==o||d!==0&&J.nodeType!==3||(I=_+d),J!==p||c!==0&&J.nodeType!==3||(P=_+c),J.nodeType===3&&(_+=J.nodeValue.length),(ie=J.firstChild)!==null;)G=J,J=ie;for(;;){if(J===t)break t;if(G===o&&++B===d&&(I=_),G===p&&++X===c&&(P=_),(ie=J.nextSibling)!==null)break;J=G,G=J.parentNode}J=ie}o=I===-1||P===-1?null:{start:I,end:P}}else o=null}o=o||{start:0,end:0}}else o=null;for(Ju={focusedElem:t,selectionRange:o},Vr=!1,oe=r;oe!==null;)if(r=oe,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,oe=t;else for(;oe!==null;){r=oe;try{var ae=r.alternate;if(r.flags&1024)switch(r.tag){case 0:case 11:case 15:break;case 1:if(ae!==null){var le=ae.memoizedProps,st=ae.memoizedState,F=r.stateNode,V=F.getSnapshotBeforeUpdate(r.elementType===r.type?le:kn(r.type,le),st);F.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var z=r.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Z){rt(r,r.return,Z)}if(t=r.sibling,t!==null){t.return=r.return,oe=t;break}oe=r.return}return ae=cp,cp=!1,ae}function Wo(t,r,o){var c=r.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var d=c=c.next;do{if((d.tag&t)===t){var p=d.destroy;d.destroy=void 0,p!==void 0&&zc(r,o,p)}d=d.next}while(d!==c)}}function Sl(t,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&t)===t){var c=o.create;o.destroy=c()}o=o.next}while(o!==r)}}function bc(t){var r=t.ref;if(r!==null){var o=t.stateNode;switch(t.tag){case 5:t=o;break;default:t=o}typeof r=="function"?r(t):r.current=t}}function hp(t){var r=t.alternate;r!==null&&(t.alternate=null,hp(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&(delete r[Bn],delete r[Oo],delete r[nc],delete r[lv],delete r[uv])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function dp(t){return t.tag===5||t.tag===3||t.tag===4}function fp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||dp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Bc(t,r,o){var c=t.tag;if(c===5||c===6)t=t.stateNode,r?o.nodeType===8?o.parentNode.insertBefore(t,r):o.insertBefore(t,r):(o.nodeType===8?(r=o.parentNode,r.insertBefore(t,o)):(r=o,r.appendChild(t)),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=el));else if(c!==4&&(t=t.child,t!==null))for(Bc(t,r,o),t=t.sibling;t!==null;)Bc(t,r,o),t=t.sibling}function jc(t,r,o){var c=t.tag;if(c===5||c===6)t=t.stateNode,r?o.insertBefore(t,r):o.appendChild(t);else if(c!==4&&(t=t.child,t!==null))for(jc(t,r,o),t=t.sibling;t!==null;)jc(t,r,o),t=t.sibling}var Ct=null,xn=!1;function br(t,r,o){for(o=o.child;o!==null;)pp(t,r,o),o=o.sibling}function pp(t,r,o){if(Jt&&typeof Jt.onCommitFiberUnmount=="function")try{Jt.onCommitFiberUnmount(gi,o)}catch{}switch(o.tag){case 5:Lt||Vs(o,r);case 6:var c=Ct,d=xn;Ct=null,br(t,r,o),Ct=c,xn=d,Ct!==null&&(xn?(t=Ct,o=o.stateNode,t.nodeType===8?t.parentNode.removeChild(o):t.removeChild(o)):Ct.removeChild(o.stateNode));break;case 18:Ct!==null&&(xn?(t=Ct,o=o.stateNode,t.nodeType===8?tc(t.parentNode,o):t.nodeType===1&&tc(t,o),Rn(t)):tc(Ct,o.stateNode));break;case 4:c=Ct,d=xn,Ct=o.stateNode.containerInfo,xn=!0,br(t,r,o),Ct=c,xn=d;break;case 0:case 11:case 14:case 15:if(!Lt&&(c=o.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){d=c=c.next;do{var p=d,_=p.destroy;p=p.tag,_!==void 0&&(p&2||p&4)&&zc(o,r,_),d=d.next}while(d!==c)}br(t,r,o);break;case 1:if(!Lt&&(Vs(o,r),c=o.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=o.memoizedProps,c.state=o.memoizedState,c.componentWillUnmount()}catch(I){rt(o,r,I)}br(t,r,o);break;case 21:br(t,r,o);break;case 22:o.mode&1?(Lt=(c=Lt)||o.memoizedState!==null,br(t,r,o),Lt=c):br(t,r,o);break;default:br(t,r,o)}}function mp(t){var r=t.updateQueue;if(r!==null){t.updateQueue=null;var o=t.stateNode;o===null&&(o=t.stateNode=new Rv),r.forEach(function(c){var d=Ov.bind(null,t,c);o.has(c)||(o.add(c),c.then(d,d))})}}function Vn(t,r){var o=r.deletions;if(o!==null)for(var c=0;c<o.length;c++){var d=o[c];try{var p=t,_=r,I=_;e:for(;I!==null;){switch(I.tag){case 5:Ct=I.stateNode,xn=!1;break e;case 3:Ct=I.stateNode.containerInfo,xn=!0;break e;case 4:Ct=I.stateNode.containerInfo,xn=!0;break e}I=I.return}if(Ct===null)throw Error(n(160));pp(p,_,d),Ct=null,xn=!1;var P=d.alternate;P!==null&&(P.return=null),d.return=null}catch(B){rt(d,r,B)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)gp(r,t),r=r.sibling}function gp(t,r){var o=t.alternate,c=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Vn(r,t),qn(t),c&4){try{Wo(3,t,t.return),Sl(3,t)}catch(le){rt(t,t.return,le)}try{Wo(5,t,t.return)}catch(le){rt(t,t.return,le)}}break;case 1:Vn(r,t),qn(t),c&512&&o!==null&&Vs(o,o.return);break;case 5:if(Vn(r,t),qn(t),c&512&&o!==null&&Vs(o,o.return),t.flags&32){var d=t.stateNode;try{Sr(d,"")}catch(le){rt(t,t.return,le)}}if(c&4&&(d=t.stateNode,d!=null)){var p=t.memoizedProps,_=o!==null?o.memoizedProps:p,I=t.type,P=t.updateQueue;if(t.updateQueue=null,P!==null)try{I==="input"&&p.type==="radio"&&p.name!=null&&no(d,p),ho(I,_);var B=ho(I,p);for(_=0;_<P.length;_+=2){var X=P[_],J=P[_+1];X==="style"?lo(d,J):X==="dangerouslySetInnerHTML"?oo(d,J):X==="children"?Sr(d,J):re(d,X,J,B)}switch(I){case"input":ro(d,p);break;case"textarea":Qi(d,p);break;case"select":var G=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!p.multiple;var ie=p.value;ie!=null?Zn(d,!!p.multiple,ie,!1):G!==!!p.multiple&&(p.defaultValue!=null?Zn(d,!!p.multiple,p.defaultValue,!0):Zn(d,!!p.multiple,p.multiple?[]:"",!1))}d[Oo]=p}catch(le){rt(t,t.return,le)}}break;case 6:if(Vn(r,t),qn(t),c&4){if(t.stateNode===null)throw Error(n(162));d=t.stateNode,p=t.memoizedProps;try{d.nodeValue=p}catch(le){rt(t,t.return,le)}}break;case 3:if(Vn(r,t),qn(t),c&4&&o!==null&&o.memoizedState.isDehydrated)try{Rn(r.containerInfo)}catch(le){rt(t,t.return,le)}break;case 4:Vn(r,t),qn(t);break;case 13:Vn(r,t),qn(t),d=t.child,d.flags&8192&&(p=d.memoizedState!==null,d.stateNode.isHidden=p,!p||d.alternate!==null&&d.alternate.memoizedState!==null||(Hc=We())),c&4&&mp(t);break;case 22:if(X=o!==null&&o.memoizedState!==null,t.mode&1?(Lt=(B=Lt)||X,Vn(r,t),Lt=B):Vn(r,t),qn(t),c&8192){if(B=t.memoizedState!==null,(t.stateNode.isHidden=B)&&!X&&t.mode&1)for(oe=t,X=t.child;X!==null;){for(J=oe=X;oe!==null;){switch(G=oe,ie=G.child,G.tag){case 0:case 11:case 14:case 15:Wo(4,G,G.return);break;case 1:Vs(G,G.return);var ae=G.stateNode;if(typeof ae.componentWillUnmount=="function"){c=G,o=G.return;try{r=c,ae.props=r.memoizedProps,ae.state=r.memoizedState,ae.componentWillUnmount()}catch(le){rt(c,o,le)}}break;case 5:Vs(G,G.return);break;case 22:if(G.memoizedState!==null){_p(J);continue}}ie!==null?(ie.return=G,oe=ie):_p(J)}X=X.sibling}e:for(X=null,J=t;;){if(J.tag===5){if(X===null){X=J;try{d=J.stateNode,B?(p=d.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(I=J.stateNode,P=J.memoizedProps.style,_=P!=null&&P.hasOwnProperty("display")?P.display:null,I.style.display=ao("display",_))}catch(le){rt(t,t.return,le)}}}else if(J.tag===6){if(X===null)try{J.stateNode.nodeValue=B?"":J.memoizedProps}catch(le){rt(t,t.return,le)}}else if((J.tag!==22&&J.tag!==23||J.memoizedState===null||J===t)&&J.child!==null){J.child.return=J,J=J.child;continue}if(J===t)break e;for(;J.sibling===null;){if(J.return===null||J.return===t)break e;X===J&&(X=null),J=J.return}X===J&&(X=null),J.sibling.return=J.return,J=J.sibling}}break;case 19:Vn(r,t),qn(t),c&4&&mp(t);break;case 21:break;default:Vn(r,t),qn(t)}}function qn(t){var r=t.flags;if(r&2){try{e:{for(var o=t.return;o!==null;){if(dp(o)){var c=o;break e}o=o.return}throw Error(n(160))}switch(c.tag){case 5:var d=c.stateNode;c.flags&32&&(Sr(d,""),c.flags&=-33);var p=fp(t);jc(t,p,d);break;case 3:case 4:var _=c.stateNode.containerInfo,I=fp(t);Bc(t,I,_);break;default:throw Error(n(161))}}catch(P){rt(t,t.return,P)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function Av(t,r,o){oe=t,yp(t)}function yp(t,r,o){for(var c=(t.mode&1)!==0;oe!==null;){var d=oe,p=d.child;if(d.tag===22&&c){var _=d.memoizedState!==null||Tl;if(!_){var I=d.alternate,P=I!==null&&I.memoizedState!==null||Lt;I=Tl;var B=Lt;if(Tl=_,(Lt=P)&&!B)for(oe=d;oe!==null;)_=oe,P=_.child,_.tag===22&&_.memoizedState!==null?Ep(d):P!==null?(P.return=_,oe=P):Ep(d);for(;p!==null;)oe=p,yp(p),p=p.sibling;oe=d,Tl=I,Lt=B}vp(t)}else d.subtreeFlags&8772&&p!==null?(p.return=d,oe=p):vp(t)}}function vp(t){for(;oe!==null;){var r=oe;if(r.flags&8772){var o=r.alternate;try{if(r.flags&8772)switch(r.tag){case 0:case 11:case 15:Lt||Sl(5,r);break;case 1:var c=r.stateNode;if(r.flags&4&&!Lt)if(o===null)c.componentDidMount();else{var d=r.elementType===r.type?o.memoizedProps:kn(r.type,o.memoizedProps);c.componentDidUpdate(d,o.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var p=r.updateQueue;p!==null&&_f(r,p,c);break;case 3:var _=r.updateQueue;if(_!==null){if(o=null,r.child!==null)switch(r.child.tag){case 5:o=r.child.stateNode;break;case 1:o=r.child.stateNode}_f(r,_,o)}break;case 5:var I=r.stateNode;if(o===null&&r.flags&4){o=I;var P=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":P.autoFocus&&o.focus();break;case"img":P.src&&(o.src=P.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var B=r.alternate;if(B!==null){var X=B.memoizedState;if(X!==null){var J=X.dehydrated;J!==null&&Rn(J)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Lt||r.flags&512&&bc(r)}catch(G){rt(r,r.return,G)}}if(r===t){oe=null;break}if(o=r.sibling,o!==null){o.return=r.return,oe=o;break}oe=r.return}}function _p(t){for(;oe!==null;){var r=oe;if(r===t){oe=null;break}var o=r.sibling;if(o!==null){o.return=r.return,oe=o;break}oe=r.return}}function Ep(t){for(;oe!==null;){var r=oe;try{switch(r.tag){case 0:case 11:case 15:var o=r.return;try{Sl(4,r)}catch(P){rt(r,o,P)}break;case 1:var c=r.stateNode;if(typeof c.componentDidMount=="function"){var d=r.return;try{c.componentDidMount()}catch(P){rt(r,d,P)}}var p=r.return;try{bc(r)}catch(P){rt(r,p,P)}break;case 5:var _=r.return;try{bc(r)}catch(P){rt(r,_,P)}}}catch(P){rt(r,r.return,P)}if(r===t){oe=null;break}var I=r.sibling;if(I!==null){I.return=r.return,oe=I;break}oe=r.return}}var Pv=Math.ceil,Il=ce.ReactCurrentDispatcher,$c=ce.ReactCurrentOwner,gn=ce.ReactCurrentBatchConfig,Me=0,wt=null,lt=null,At=0,sn=0,Ds=Or(0),pt=0,Qo=null,xi=0,Rl=0,qc=0,Ko=null,Qt=null,Hc=0,Ns=1/0,pr=null,Cl=!1,Wc=null,Br=null,Al=!1,jr=null,Pl=0,Go=0,Qc=null,kl=-1,xl=0;function Bt(){return Me&6?We():kl!==-1?kl:kl=We()}function $r(t){return t.mode&1?Me&2&&At!==0?At&-At:hv.transition!==null?(xl===0&&(xl=vi()),xl):(t=xe,t!==0||(t=window.event,t=t===void 0?16:So(t.type)),t):1}function Dn(t,r,o,c){if(50<Go)throw Go=0,Qc=null,Error(n(185));Ar(t,o,c),(!(Me&2)||t!==wt)&&(t===wt&&(!(Me&2)&&(Rl|=o),pt===4&&qr(t,At)),Kt(t,c),o===1&&Me===0&&!(r.mode&1)&&(Ns=We()+500,il&&Fr()))}function Kt(t,r){var o=t.callbackNode;nr(t,r);var c=yi(t,t===wt?At:0);if(c===0)o!==null&&vo(o),t.callbackNode=null,t.callbackPriority=0;else if(r=c&-c,t.callbackPriority!==r){if(o!=null&&vo(o),r===1)t.tag===0?cv(Tp.bind(null,t)):af(Tp.bind(null,t)),ov(function(){!(Me&6)&&Fr()}),o=null;else{switch(kr(c)){case 1:o=mi;break;case 4:o=Ir;break;case 16:o=un;break;case 536870912:o=xa;break;default:o=un}o=xp(o,wp.bind(null,t))}t.callbackPriority=r,t.callbackNode=o}}function wp(t,r){if(kl=-1,xl=0,Me&6)throw Error(n(327));var o=t.callbackNode;if(Ls()&&t.callbackNode!==o)return null;var c=yi(t,t===wt?At:0);if(c===0)return null;if(c&30||c&t.expiredLanes||r)r=Vl(t,c);else{r=c;var d=Me;Me|=2;var p=Ip();(wt!==t||At!==r)&&(pr=null,Ns=We()+500,Di(t,r));do try{Vv();break}catch(I){Sp(t,I)}while(!0);hc(),Il.current=p,Me=d,lt!==null?r=0:(wt=null,At=0,r=pt)}if(r!==0){if(r===2&&(d=Zt(t),d!==0&&(c=d,r=Kc(t,d))),r===1)throw o=Qo,Di(t,0),qr(t,c),Kt(t,We()),o;if(r===6)qr(t,c);else{if(d=t.current.alternate,!(c&30)&&!kv(d)&&(r=Vl(t,c),r===2&&(p=Zt(t),p!==0&&(c=p,r=Kc(t,p))),r===1))throw o=Qo,Di(t,0),qr(t,c),Kt(t,We()),o;switch(t.finishedWork=d,t.finishedLanes=c,r){case 0:case 1:throw Error(n(345));case 2:Ni(t,Qt,pr);break;case 3:if(qr(t,c),(c&130023424)===c&&(r=Hc+500-We(),10<r)){if(yi(t,0)!==0)break;if(d=t.suspendedLanes,(d&c)!==c){Bt(),t.pingedLanes|=t.suspendedLanes&d;break}t.timeoutHandle=ec(Ni.bind(null,t,Qt,pr),r);break}Ni(t,Qt,pr);break;case 4:if(qr(t,c),(c&4194240)===c)break;for(r=t.eventTimes,d=-1;0<c;){var _=31-Ut(c);p=1<<_,_=r[_],_>d&&(d=_),c&=~p}if(c=d,c=We()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*Pv(c/1960))-c,10<c){t.timeoutHandle=ec(Ni.bind(null,t,Qt,pr),c);break}Ni(t,Qt,pr);break;case 5:Ni(t,Qt,pr);break;default:throw Error(n(329))}}}return Kt(t,We()),t.callbackNode===o?wp.bind(null,t):null}function Kc(t,r){var o=Ko;return t.current.memoizedState.isDehydrated&&(Di(t,r).flags|=256),t=Vl(t,r),t!==2&&(r=Qt,Qt=o,r!==null&&Gc(r)),t}function Gc(t){Qt===null?Qt=t:Qt.push.apply(Qt,t)}function kv(t){for(var r=t;;){if(r.flags&16384){var o=r.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var c=0;c<o.length;c++){var d=o[c],p=d.getSnapshot;d=d.value;try{if(!An(p(),d))return!1}catch{return!1}}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function qr(t,r){for(r&=~qc,r&=~Rl,t.suspendedLanes|=r,t.pingedLanes&=~r,t=t.expirationTimes;0<r;){var o=31-Ut(r),c=1<<o;t[o]=-1,r&=~c}}function Tp(t){if(Me&6)throw Error(n(327));Ls();var r=yi(t,0);if(!(r&1))return Kt(t,We()),null;var o=Vl(t,r);if(t.tag!==0&&o===2){var c=Zt(t);c!==0&&(r=c,o=Kc(t,c))}if(o===1)throw o=Qo,Di(t,0),qr(t,r),Kt(t,We()),o;if(o===6)throw Error(n(345));return t.finishedWork=t.current.alternate,t.finishedLanes=r,Ni(t,Qt,pr),Kt(t,We()),null}function Xc(t,r){var o=Me;Me|=1;try{return t(r)}finally{Me=o,Me===0&&(Ns=We()+500,il&&Fr())}}function Vi(t){jr!==null&&jr.tag===0&&!(Me&6)&&Ls();var r=Me;Me|=1;var o=gn.transition,c=xe;try{if(gn.transition=null,xe=1,t)return t()}finally{xe=c,gn.transition=o,Me=r,!(Me&6)&&Fr()}}function Yc(){sn=Ds.current,Ge(Ds)}function Di(t,r){t.finishedWork=null,t.finishedLanes=0;var o=t.timeoutHandle;if(o!==-1&&(t.timeoutHandle=-1,sv(o)),lt!==null)for(o=lt.return;o!==null;){var c=o;switch(oc(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&nl();break;case 3:ks(),Ge(qt),Ge(Vt),_c();break;case 5:yc(c);break;case 4:ks();break;case 13:Ge(Ze);break;case 19:Ge(Ze);break;case 10:dc(c.type._context);break;case 22:case 23:Yc()}o=o.return}if(wt=t,lt=t=Hr(t.current,null),At=sn=r,pt=0,Qo=null,qc=Rl=xi=0,Qt=Ko=null,Ai!==null){for(r=0;r<Ai.length;r++)if(o=Ai[r],c=o.interleaved,c!==null){o.interleaved=null;var d=c.next,p=o.pending;if(p!==null){var _=p.next;p.next=d,c.next=_}o.pending=c}Ai=null}return t}function Sp(t,r){do{var o=lt;try{if(hc(),pl.current=vl,ml){for(var c=et.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}ml=!1}if(ki=0,Et=ft=et=null,Bo=!1,jo=0,$c.current=null,o===null||o.return===null){pt=1,Qo=r,lt=null;break}e:{var p=t,_=o.return,I=o,P=r;if(r=At,I.flags|=32768,P!==null&&typeof P=="object"&&typeof P.then=="function"){var B=P,X=I,J=X.tag;if(!(X.mode&1)&&(J===0||J===11||J===15)){var G=X.alternate;G?(X.updateQueue=G.updateQueue,X.memoizedState=G.memoizedState,X.lanes=G.lanes):(X.updateQueue=null,X.memoizedState=null)}var ie=Kf(_);if(ie!==null){ie.flags&=-257,Gf(ie,_,I,p,r),ie.mode&1&&Qf(p,B,r),r=ie,P=B;var ae=r.updateQueue;if(ae===null){var le=new Set;le.add(P),r.updateQueue=le}else ae.add(P);break e}else{if(!(r&1)){Qf(p,B,r),Jc();break e}P=Error(n(426))}}else if(Ye&&I.mode&1){var st=Kf(_);if(st!==null){!(st.flags&65536)&&(st.flags|=256),Gf(st,_,I,p,r),uc(xs(P,I));break e}}p=P=xs(P,I),pt!==4&&(pt=2),Ko===null?Ko=[p]:Ko.push(p),p=_;do{switch(p.tag){case 3:p.flags|=65536,r&=-r,p.lanes|=r;var F=Hf(p,P,r);vf(p,F);break e;case 1:I=P;var V=p.type,z=p.stateNode;if(!(p.flags&128)&&(typeof V.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(Br===null||!Br.has(z)))){p.flags|=65536,r&=-r,p.lanes|=r;var Z=Wf(p,I,r);vf(p,Z);break e}}p=p.return}while(p!==null)}Cp(o)}catch(ue){r=ue,lt===o&&o!==null&&(lt=o=o.return);continue}break}while(!0)}function Ip(){var t=Il.current;return Il.current=vl,t===null?vl:t}function Jc(){(pt===0||pt===3||pt===2)&&(pt=4),wt===null||!(xi&268435455)&&!(Rl&268435455)||qr(wt,At)}function Vl(t,r){var o=Me;Me|=2;var c=Ip();(wt!==t||At!==r)&&(pr=null,Di(t,r));do try{xv();break}catch(d){Sp(t,d)}while(!0);if(hc(),Me=o,Il.current=c,lt!==null)throw Error(n(261));return wt=null,At=0,pt}function xv(){for(;lt!==null;)Rp(lt)}function Vv(){for(;lt!==null&&!Pa();)Rp(lt)}function Rp(t){var r=kp(t.alternate,t,sn);t.memoizedProps=t.pendingProps,r===null?Cp(t):lt=r,$c.current=null}function Cp(t){var r=t;do{var o=r.alternate;if(t=r.return,r.flags&32768){if(o=Iv(o,r),o!==null){o.flags&=32767,lt=o;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{pt=6,lt=null;return}}else if(o=Sv(o,r,sn),o!==null){lt=o;return}if(r=r.sibling,r!==null){lt=r;return}lt=r=t}while(r!==null);pt===0&&(pt=5)}function Ni(t,r,o){var c=xe,d=gn.transition;try{gn.transition=null,xe=1,Dv(t,r,o,c)}finally{gn.transition=d,xe=c}return null}function Dv(t,r,o,c){do Ls();while(jr!==null);if(Me&6)throw Error(n(327));o=t.finishedWork;var d=t.finishedLanes;if(o===null)return null;if(t.finishedWork=null,t.finishedLanes=0,o===t.current)throw Error(n(177));t.callbackNode=null,t.callbackPriority=0;var p=o.lanes|o.childLanes;if(qe(t,p),t===wt&&(lt=wt=null,At=0),!(o.subtreeFlags&2064)&&!(o.flags&2064)||Al||(Al=!0,xp(un,function(){return Ls(),null})),p=(o.flags&15990)!==0,o.subtreeFlags&15990||p){p=gn.transition,gn.transition=null;var _=xe;xe=1;var I=Me;Me|=4,$c.current=null,Cv(t,o),gp(o,t),Jy(Ju),Vr=!!Yu,Ju=Yu=null,t.current=o,Av(o),Ou(),Me=I,xe=_,gn.transition=p}else t.current=o;if(Al&&(Al=!1,jr=t,Pl=d),p=t.pendingLanes,p===0&&(Br=null),Va(o.stateNode),Kt(t,We()),r!==null)for(c=t.onRecoverableError,o=0;o<r.length;o++)d=r[o],c(d.value,{componentStack:d.stack,digest:d.digest});if(Cl)throw Cl=!1,t=Wc,Wc=null,t;return Pl&1&&t.tag!==0&&Ls(),p=t.pendingLanes,p&1?t===Qc?Go++:(Go=0,Qc=t):Go=0,Fr(),null}function Ls(){if(jr!==null){var t=kr(Pl),r=gn.transition,o=xe;try{if(gn.transition=null,xe=16>t?16:t,jr===null)var c=!1;else{if(t=jr,jr=null,Pl=0,Me&6)throw Error(n(331));var d=Me;for(Me|=4,oe=t.current;oe!==null;){var p=oe,_=p.child;if(oe.flags&16){var I=p.deletions;if(I!==null){for(var P=0;P<I.length;P++){var B=I[P];for(oe=B;oe!==null;){var X=oe;switch(X.tag){case 0:case 11:case 15:Wo(8,X,p)}var J=X.child;if(J!==null)J.return=X,oe=J;else for(;oe!==null;){X=oe;var G=X.sibling,ie=X.return;if(hp(X),X===B){oe=null;break}if(G!==null){G.return=ie,oe=G;break}oe=ie}}}var ae=p.alternate;if(ae!==null){var le=ae.child;if(le!==null){ae.child=null;do{var st=le.sibling;le.sibling=null,le=st}while(le!==null)}}oe=p}}if(p.subtreeFlags&2064&&_!==null)_.return=p,oe=_;else e:for(;oe!==null;){if(p=oe,p.flags&2048)switch(p.tag){case 0:case 11:case 15:Wo(9,p,p.return)}var F=p.sibling;if(F!==null){F.return=p.return,oe=F;break e}oe=p.return}}var V=t.current;for(oe=V;oe!==null;){_=oe;var z=_.child;if(_.subtreeFlags&2064&&z!==null)z.return=_,oe=z;else e:for(_=V;oe!==null;){if(I=oe,I.flags&2048)try{switch(I.tag){case 0:case 11:case 15:Sl(9,I)}}catch(ue){rt(I,I.return,ue)}if(I===_){oe=null;break e}var Z=I.sibling;if(Z!==null){Z.return=I.return,oe=Z;break e}oe=I.return}}if(Me=d,Fr(),Jt&&typeof Jt.onPostCommitFiberRoot=="function")try{Jt.onPostCommitFiberRoot(gi,t)}catch{}c=!0}return c}finally{xe=o,gn.transition=r}}return!1}function Ap(t,r,o){r=xs(o,r),r=Hf(t,r,1),t=zr(t,r,1),r=Bt(),t!==null&&(Ar(t,1,r),Kt(t,r))}function rt(t,r,o){if(t.tag===3)Ap(t,t,o);else for(;r!==null;){if(r.tag===3){Ap(r,t,o);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Br===null||!Br.has(c))){t=xs(o,t),t=Wf(r,t,1),r=zr(r,t,1),t=Bt(),r!==null&&(Ar(r,1,t),Kt(r,t));break}}r=r.return}}function Nv(t,r,o){var c=t.pingCache;c!==null&&c.delete(r),r=Bt(),t.pingedLanes|=t.suspendedLanes&o,wt===t&&(At&o)===o&&(pt===4||pt===3&&(At&130023424)===At&&500>We()-Hc?Di(t,0):qc|=o),Kt(t,r)}function Pp(t,r){r===0&&(t.mode&1?(r=rs,rs<<=1,!(rs&130023424)&&(rs=4194304)):r=1);var o=Bt();t=hr(t,r),t!==null&&(Ar(t,r,o),Kt(t,o))}function Lv(t){var r=t.memoizedState,o=0;r!==null&&(o=r.retryLane),Pp(t,o)}function Ov(t,r){var o=0;switch(t.tag){case 13:var c=t.stateNode,d=t.memoizedState;d!==null&&(o=d.retryLane);break;case 19:c=t.stateNode;break;default:throw Error(n(314))}c!==null&&c.delete(r),Pp(t,o)}var kp;kp=function(t,r,o){if(t!==null)if(t.memoizedProps!==r.pendingProps||qt.current)Wt=!0;else{if(!(t.lanes&o)&&!(r.flags&128))return Wt=!1,Tv(t,r,o);Wt=!!(t.flags&131072)}else Wt=!1,Ye&&r.flags&1048576&&lf(r,ol,r.index);switch(r.lanes=0,r.tag){case 2:var c=r.type;wl(t,r),t=r.pendingProps;var d=Ts(r,Vt.current);Ps(r,o),d=Tc(null,r,c,t,d,o);var p=Sc();return r.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,Ht(c)?(p=!0,rl(r)):p=!1,r.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,mc(r),d.updater=_l,r.stateNode=d,d._reactInternals=r,kc(r,c,t,o),r=Nc(null,r,c,!0,p,o)):(r.tag=0,Ye&&p&&sc(r),bt(null,r,d,o),r=r.child),r;case 16:c=r.elementType;e:{switch(wl(t,r),t=r.pendingProps,d=c._init,c=d(c._payload),r.type=c,d=r.tag=Fv(c),t=kn(c,t),d){case 0:r=Dc(null,r,c,t,o);break e;case 1:r=tp(null,r,c,t,o);break e;case 11:r=Xf(null,r,c,t,o);break e;case 14:r=Yf(null,r,c,kn(c.type,t),o);break e}throw Error(n(306,c,""))}return r;case 0:return c=r.type,d=r.pendingProps,d=r.elementType===c?d:kn(c,d),Dc(t,r,c,d,o);case 1:return c=r.type,d=r.pendingProps,d=r.elementType===c?d:kn(c,d),tp(t,r,c,d,o);case 3:e:{if(np(r),t===null)throw Error(n(387));c=r.pendingProps,p=r.memoizedState,d=p.element,yf(t,r),dl(r,c,null,o);var _=r.memoizedState;if(c=_.element,p.isDehydrated)if(p={element:c,isDehydrated:!1,cache:_.cache,pendingSuspenseBoundaries:_.pendingSuspenseBoundaries,transitions:_.transitions},r.updateQueue.baseState=p,r.memoizedState=p,r.flags&256){d=xs(Error(n(423)),r),r=rp(t,r,c,o,d);break e}else if(c!==d){d=xs(Error(n(424)),r),r=rp(t,r,c,o,d);break e}else for(rn=Lr(r.stateNode.containerInfo.firstChild),nn=r,Ye=!0,Pn=null,o=mf(r,null,c,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Rs(),c===d){r=fr(t,r,o);break e}bt(t,r,c,o)}r=r.child}return r;case 5:return Ef(r),t===null&&lc(r),c=r.type,d=r.pendingProps,p=t!==null?t.memoizedProps:null,_=d.children,Zu(c,d)?_=null:p!==null&&Zu(c,p)&&(r.flags|=32),ep(t,r),bt(t,r,_,o),r.child;case 6:return t===null&&lc(r),null;case 13:return ip(t,r,o);case 4:return gc(r,r.stateNode.containerInfo),c=r.pendingProps,t===null?r.child=Cs(r,null,c,o):bt(t,r,c,o),r.child;case 11:return c=r.type,d=r.pendingProps,d=r.elementType===c?d:kn(c,d),Xf(t,r,c,d,o);case 7:return bt(t,r,r.pendingProps,o),r.child;case 8:return bt(t,r,r.pendingProps.children,o),r.child;case 12:return bt(t,r,r.pendingProps.children,o),r.child;case 10:e:{if(c=r.type._context,d=r.pendingProps,p=r.memoizedProps,_=d.value,Qe(ul,c._currentValue),c._currentValue=_,p!==null)if(An(p.value,_)){if(p.children===d.children&&!qt.current){r=fr(t,r,o);break e}}else for(p=r.child,p!==null&&(p.return=r);p!==null;){var I=p.dependencies;if(I!==null){_=p.child;for(var P=I.firstContext;P!==null;){if(P.context===c){if(p.tag===1){P=dr(-1,o&-o),P.tag=2;var B=p.updateQueue;if(B!==null){B=B.shared;var X=B.pending;X===null?P.next=P:(P.next=X.next,X.next=P),B.pending=P}}p.lanes|=o,P=p.alternate,P!==null&&(P.lanes|=o),fc(p.return,o,r),I.lanes|=o;break}P=P.next}}else if(p.tag===10)_=p.type===r.type?null:p.child;else if(p.tag===18){if(_=p.return,_===null)throw Error(n(341));_.lanes|=o,I=_.alternate,I!==null&&(I.lanes|=o),fc(_,o,r),_=p.sibling}else _=p.child;if(_!==null)_.return=p;else for(_=p;_!==null;){if(_===r){_=null;break}if(p=_.sibling,p!==null){p.return=_.return,_=p;break}_=_.return}p=_}bt(t,r,d.children,o),r=r.child}return r;case 9:return d=r.type,c=r.pendingProps.children,Ps(r,o),d=pn(d),c=c(d),r.flags|=1,bt(t,r,c,o),r.child;case 14:return c=r.type,d=kn(c,r.pendingProps),d=kn(c.type,d),Yf(t,r,c,d,o);case 15:return Jf(t,r,r.type,r.pendingProps,o);case 17:return c=r.type,d=r.pendingProps,d=r.elementType===c?d:kn(c,d),wl(t,r),r.tag=1,Ht(c)?(t=!0,rl(r)):t=!1,Ps(r,o),$f(r,c,d),kc(r,c,d,o),Nc(null,r,c,!0,t,o);case 19:return op(t,r,o);case 22:return Zf(t,r,o)}throw Error(n(156,r.tag))};function xp(t,r){return ts(t,r)}function Mv(t,r,o,c){this.tag=t,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yn(t,r,o,c){return new Mv(t,r,o,c)}function Zc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Fv(t){if(typeof t=="function")return Zc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===O)return 11;if(t===_e)return 14}return 2}function Hr(t,r){var o=t.alternate;return o===null?(o=yn(t.tag,r,t.key,t.mode),o.elementType=t.elementType,o.type=t.type,o.stateNode=t.stateNode,o.alternate=t,t.alternate=o):(o.pendingProps=r,o.type=t.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=t.flags&14680064,o.childLanes=t.childLanes,o.lanes=t.lanes,o.child=t.child,o.memoizedProps=t.memoizedProps,o.memoizedState=t.memoizedState,o.updateQueue=t.updateQueue,r=t.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=t.sibling,o.index=t.index,o.ref=t.ref,o}function Dl(t,r,o,c,d,p){var _=2;if(c=t,typeof t=="function")Zc(t)&&(_=1);else if(typeof t=="string")_=5;else e:switch(t){case x:return Li(o.children,d,p,r);case S:_=8,d|=8;break;case C:return t=yn(12,o,r,d|2),t.elementType=C,t.lanes=p,t;case T:return t=yn(13,o,r,d),t.elementType=T,t.lanes=p,t;case ve:return t=yn(19,o,r,d),t.elementType=ve,t.lanes=p,t;case pe:return Nl(o,d,p,r);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case k:_=10;break e;case D:_=9;break e;case O:_=11;break e;case _e:_=14;break e;case je:_=16,c=null;break e}throw Error(n(130,t==null?t:typeof t,""))}return r=yn(_,o,r,d),r.elementType=t,r.type=c,r.lanes=p,r}function Li(t,r,o,c){return t=yn(7,t,c,r),t.lanes=o,t}function Nl(t,r,o,c){return t=yn(22,t,c,r),t.elementType=pe,t.lanes=o,t.stateNode={isHidden:!1},t}function eh(t,r,o){return t=yn(6,t,null,r),t.lanes=o,t}function th(t,r,o){return r=yn(4,t.children!==null?t.children:[],t.key,r),r.lanes=o,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}function Uv(t,r,o,c,d){this.tag=r,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Cr(0),this.expirationTimes=Cr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Cr(0),this.identifierPrefix=c,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function nh(t,r,o,c,d,p,_,I,P){return t=new Uv(t,r,o,I,P),r===1?(r=1,p===!0&&(r|=8)):r=0,p=yn(3,null,null,r),t.current=p,p.stateNode=t,p.memoizedState={element:c,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},mc(p),t}function zv(t,r,o){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ie,key:c==null?null:""+c,children:t,containerInfo:r,implementation:o}}function Vp(t){if(!t)return Mr;t=t._reactInternals;e:{if(En(t)!==t||t.tag!==1)throw Error(n(170));var r=t;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(Ht(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(n(171))}if(t.tag===1){var o=t.type;if(Ht(o))return sf(t,o,r)}return r}function Dp(t,r,o,c,d,p,_,I,P){return t=nh(o,c,!0,t,d,p,_,I,P),t.context=Vp(null),o=t.current,c=Bt(),d=$r(o),p=dr(c,d),p.callback=r??null,zr(o,p,d),t.current.lanes=d,Ar(t,d,c),Kt(t,c),t}function Ll(t,r,o,c){var d=r.current,p=Bt(),_=$r(d);return o=Vp(o),r.context===null?r.context=o:r.pendingContext=o,r=dr(p,_),r.payload={element:t},c=c===void 0?null:c,c!==null&&(r.callback=c),t=zr(d,r,_),t!==null&&(Dn(t,d,_,p),hl(t,d,_)),_}function Ol(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Np(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var o=t.retryLane;t.retryLane=o!==0&&o<r?o:r}}function rh(t,r){Np(t,r),(t=t.alternate)&&Np(t,r)}var Lp=typeof reportError=="function"?reportError:function(t){console.error(t)};function ih(t){this._internalRoot=t}Ml.prototype.render=ih.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(n(409));Ll(t,r,null,null)},Ml.prototype.unmount=ih.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;Vi(function(){Ll(null,t,null,null)}),r[ar]=null}};function Ml(t){this._internalRoot=t}Ml.prototype.unstable_scheduleHydration=function(t){if(t){var r=Ma();t={blockedOn:null,target:t,priority:r};for(var o=0;o<Fn.length&&r!==0&&r<Fn[o].priority;o++);Fn.splice(o,0,t),o===0&&za(t)}};function sh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Fl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Op(){}function bv(t,r,o,c,d){if(d){if(typeof c=="function"){var p=c;c=function(){var B=Ol(_);p.call(B)}}var _=Dp(r,c,t,0,null,!1,!1,"",Op);return t._reactRootContainer=_,t[ar]=_.current,No(t.nodeType===8?t.parentNode:t),Vi(),_}for(;d=t.lastChild;)t.removeChild(d);if(typeof c=="function"){var I=c;c=function(){var B=Ol(P);I.call(B)}}var P=nh(t,0,!1,null,null,!1,!1,"",Op);return t._reactRootContainer=P,t[ar]=P.current,No(t.nodeType===8?t.parentNode:t),Vi(function(){Ll(r,P,o,c)}),P}function Ul(t,r,o,c,d){var p=o._reactRootContainer;if(p){var _=p;if(typeof d=="function"){var I=d;d=function(){var P=Ol(_);I.call(P)}}Ll(r,_,t,d)}else _=bv(o,r,t,d,c);return Ol(_)}La=function(t){switch(t.tag){case 3:var r=t.stateNode;if(r.current.memoizedState.isDehydrated){var o=Rr(r.pendingLanes);o!==0&&(Pr(r,o|1),Kt(r,We()),!(Me&6)&&(Ns=We()+500,Fr()))}break;case 13:Vi(function(){var c=hr(t,1);if(c!==null){var d=Bt();Dn(c,t,1,d)}}),rh(t,1)}},is=function(t){if(t.tag===13){var r=hr(t,134217728);if(r!==null){var o=Bt();Dn(r,t,134217728,o)}rh(t,134217728)}},Oa=function(t){if(t.tag===13){var r=$r(t),o=hr(t,r);if(o!==null){var c=Bt();Dn(o,t,r,c)}rh(t,r)}},Ma=function(){return xe},Fa=function(t,r){var o=xe;try{return xe=t,r()}finally{xe=o}},Gi=function(t,r,o){switch(r){case"input":if(ro(t,o),r=o.name,o.type==="radio"&&r!=null){for(o=t;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<o.length;r++){var c=o[r];if(c!==t&&c.form===t.form){var d=tl(c);if(!d)throw Error(n(90));$i(c),ro(c,d)}}}break;case"textarea":Qi(t,o);break;case"select":r=o.value,r!=null&&Zn(t,!!o.multiple,r,!1)}},hi=Xc,po=Vi;var Bv={usingClientEntryPoint:!1,Events:[Mo,Es,tl,On,fo,Xc]},Xo={findFiberByHostInstance:Si,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},jv={bundleType:Xo.bundleType,version:Xo.version,rendererPackageName:Xo.rendererPackageName,rendererConfig:Xo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ce.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=yo(t),t===null?null:t.stateNode},findFiberByHostInstance:Xo.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zl.isDisabled&&zl.supportsFiber)try{gi=zl.inject(jv),Jt=zl}catch{}}return Gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Bv,Gt.createPortal=function(t,r){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!sh(r))throw Error(n(200));return zv(t,r,null,o)},Gt.createRoot=function(t,r){if(!sh(t))throw Error(n(299));var o=!1,c="",d=Lp;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onRecoverableError!==void 0&&(d=r.onRecoverableError)),r=nh(t,1,!1,null,null,o,!1,c,d),t[ar]=r.current,No(t.nodeType===8?t.parentNode:t),new ih(r)},Gt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(n(188)):(t=Object.keys(t).join(","),Error(n(268,t)));return t=yo(r),t=t===null?null:t.stateNode,t},Gt.flushSync=function(t){return Vi(t)},Gt.hydrate=function(t,r,o){if(!Fl(r))throw Error(n(200));return Ul(null,t,r,!0,o)},Gt.hydrateRoot=function(t,r,o){if(!sh(t))throw Error(n(405));var c=o!=null&&o.hydratedSources||null,d=!1,p="",_=Lp;if(o!=null&&(o.unstable_strictMode===!0&&(d=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onRecoverableError!==void 0&&(_=o.onRecoverableError)),r=Dp(r,null,t,1,o??null,d,!1,p,_),t[ar]=r.current,No(t),c)for(t=0;t<c.length;t++)o=c[t],d=o._getVersion,d=d(o._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[o,d]:r.mutableSourceEagerHydrationData.push(o,d);return new Ml(r)},Gt.render=function(t,r,o){if(!Fl(r))throw Error(n(200));return Ul(null,t,r,!1,o)},Gt.unmountComponentAtNode=function(t){if(!Fl(t))throw Error(n(40));return t._reactRootContainer?(Vi(function(){Ul(null,null,t,!1,function(){t._reactRootContainer=null,t[ar]=null})}),!0):!1},Gt.unstable_batchedUpdates=Xc,Gt.unstable_renderSubtreeIntoContainer=function(t,r,o,c){if(!Fl(o))throw Error(n(200));if(t==null||t._reactInternals===void 0)throw Error(n(38));return Ul(t,r,o,!1,c)},Gt.version="18.3.1-next-f1338f8080-20240426",Gt}var $p;function Xv(){if($p)return lh.exports;$p=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),lh.exports=Gv(),lh.exports}var qp;function Yv(){if(qp)return bl;qp=1;var i=Xv();return bl.createRoot=i.createRoot,bl.hydrateRoot=i.hydrateRoot,bl}var Jv=Yv(),Jo={},Hp;function Zv(){if(Hp)return Jo;Hp=1,Object.defineProperty(Jo,"__esModule",{value:!0}),Jo.parse=h,Jo.serialize=v;const i=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,u=(()=>{const R=function(){};return R.prototype=Object.create(null),R})();function h(R,L){const U=new u,$=R.length;if($<2)return U;const b=(L==null?void 0:L.decode)||w;let Q=0;do{const K=R.indexOf("=",Q);if(K===-1)break;const re=R.indexOf(";",Q),ce=re===-1?$:re;if(K>ce){Q=R.lastIndexOf(";",K-1)+1;continue}const Ce=m(R,Q,K),Ie=g(R,K,Ce),x=R.slice(Ce,Ie);if(U[x]===void 0){let S=m(R,K+1,ce),C=g(R,ce,S);const k=b(R.slice(S,C));U[x]=k}Q=ce+1}while(Q<$);return U}function m(R,L,U){do{const $=R.charCodeAt(L);if($!==32&&$!==9)return L}while(++L<U);return U}function g(R,L,U){for(;L>U;){const $=R.charCodeAt(--L);if($!==32&&$!==9)return L+1}return U}function v(R,L,U){const $=(U==null?void 0:U.encode)||encodeURIComponent;if(!i.test(R))throw new TypeError(`argument name is invalid: ${R}`);const b=$(L);if(!e.test(b))throw new TypeError(`argument val is invalid: ${L}`);let Q=R+"="+b;if(!U)return Q;if(U.maxAge!==void 0){if(!Number.isInteger(U.maxAge))throw new TypeError(`option maxAge is invalid: ${U.maxAge}`);Q+="; Max-Age="+U.maxAge}if(U.domain){if(!n.test(U.domain))throw new TypeError(`option domain is invalid: ${U.domain}`);Q+="; Domain="+U.domain}if(U.path){if(!s.test(U.path))throw new TypeError(`option path is invalid: ${U.path}`);Q+="; Path="+U.path}if(U.expires){if(!A(U.expires)||!Number.isFinite(U.expires.valueOf()))throw new TypeError(`option expires is invalid: ${U.expires}`);Q+="; Expires="+U.expires.toUTCString()}if(U.httpOnly&&(Q+="; HttpOnly"),U.secure&&(Q+="; Secure"),U.partitioned&&(Q+="; Partitioned"),U.priority)switch(typeof U.priority=="string"?U.priority.toLowerCase():void 0){case"low":Q+="; Priority=Low";break;case"medium":Q+="; Priority=Medium";break;case"high":Q+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${U.priority}`)}if(U.sameSite)switch(typeof U.sameSite=="string"?U.sameSite.toLowerCase():U.sameSite){case!0:case"strict":Q+="; SameSite=Strict";break;case"lax":Q+="; SameSite=Lax";break;case"none":Q+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${U.sameSite}`)}return Q}function w(R){if(R.indexOf("%")===-1)return R;try{return decodeURIComponent(R)}catch{return R}}function A(R){return a.call(R)==="[object Date]"}return Jo}Zv();/**
 * react-router v7.1.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Wp="popstate";function e_(i={}){function e(s,a){let{pathname:u,search:h,hash:m}=s.location;return wh("",{pathname:u,search:h,hash:m},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(s,a){return typeof a=="string"?a:ua(a)}return n_(e,n,null,i)}function tt(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function Qn(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function t_(){return Math.random().toString(36).substring(2,10)}function Qp(i,e){return{usr:i.state,key:i.key,idx:e}}function wh(i,e,n=null,s){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?Ks(e):e,state:n,key:e&&e.key||s||t_()}}function ua({pathname:i="/",search:e="",hash:n=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(i+=n.charAt(0)==="#"?n:"#"+n),i}function Ks(i){let e={};if(i){let n=i.indexOf("#");n>=0&&(e.hash=i.substring(n),i=i.substring(0,n));let s=i.indexOf("?");s>=0&&(e.search=i.substring(s),i=i.substring(0,s)),i&&(e.pathname=i)}return e}function n_(i,e,n,s={}){let{window:a=document.defaultView,v5Compat:u=!1}=s,h=a.history,m="POP",g=null,v=w();v==null&&(v=0,h.replaceState({...h.state,idx:v},""));function w(){return(h.state||{idx:null}).idx}function A(){m="POP";let b=w(),Q=b==null?null:b-v;v=b,g&&g({action:m,location:$.location,delta:Q})}function R(b,Q){m="PUSH";let K=wh($.location,b,Q);v=w()+1;let re=Qp(K,v),ce=$.createHref(K);try{h.pushState(re,"",ce)}catch(Ce){if(Ce instanceof DOMException&&Ce.name==="DataCloneError")throw Ce;a.location.assign(ce)}u&&g&&g({action:m,location:$.location,delta:1})}function L(b,Q){m="REPLACE";let K=wh($.location,b,Q);v=w();let re=Qp(K,v),ce=$.createHref(K);h.replaceState(re,"",ce),u&&g&&g({action:m,location:$.location,delta:0})}function U(b){let Q=a.location.origin!=="null"?a.location.origin:a.location.href,K=typeof b=="string"?b:ua(b);return K=K.replace(/ $/,"%20"),tt(Q,`No window.location.(origin|href) available to create URL for href: ${K}`),new URL(K,Q)}let $={get action(){return m},get location(){return i(a,h)},listen(b){if(g)throw new Error("A history only accepts one active listener");return a.addEventListener(Wp,A),g=b,()=>{a.removeEventListener(Wp,A),g=null}},createHref(b){return e(a,b)},createURL:U,encodeLocation(b){let Q=U(b);return{pathname:Q.pathname,search:Q.search,hash:Q.hash}},push:R,replace:L,go(b){return h.go(b)}};return $}function Qm(i,e,n="/"){return r_(i,e,n,!1)}function r_(i,e,n,s){let a=typeof e=="string"?Ks(e):e,u=Jr(a.pathname||"/",n);if(u==null)return null;let h=Km(i);i_(h);let m=null;for(let g=0;m==null&&g<h.length;++g){let v=m_(u);m=f_(h[g],v,s)}return m}function Km(i,e=[],n=[],s=""){let a=(u,h,m)=>{let g={relativePath:m===void 0?u.path||"":m,caseSensitive:u.caseSensitive===!0,childrenIndex:h,route:u};g.relativePath.startsWith("/")&&(tt(g.relativePath.startsWith(s),`Absolute route path "${g.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(s.length));let v=mr([s,g.relativePath]),w=n.concat(g);u.children&&u.children.length>0&&(tt(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),Km(u.children,e,w,v)),!(u.path==null&&!u.index)&&e.push({path:v,score:h_(v,u.index),routesMeta:w})};return i.forEach((u,h)=>{var m;if(u.path===""||!((m=u.path)!=null&&m.includes("?")))a(u,h);else for(let g of Gm(u.path))a(u,h,g)}),e}function Gm(i){let e=i.split("/");if(e.length===0)return[];let[n,...s]=e,a=n.endsWith("?"),u=n.replace(/\?$/,"");if(s.length===0)return a?[u,""]:[u];let h=Gm(s.join("/")),m=[];return m.push(...h.map(g=>g===""?u:[u,g].join("/"))),a&&m.push(...h),m.map(g=>i.startsWith("/")&&g===""?"/":g)}function i_(i){i.sort((e,n)=>e.score!==n.score?n.score-e.score:d_(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var s_=/^:[\w-]+$/,o_=3,a_=2,l_=1,u_=10,c_=-2,Kp=i=>i==="*";function h_(i,e){let n=i.split("/"),s=n.length;return n.some(Kp)&&(s+=c_),e&&(s+=a_),n.filter(a=>!Kp(a)).reduce((a,u)=>a+(s_.test(u)?o_:u===""?l_:u_),s)}function d_(i,e){return i.length===e.length&&i.slice(0,-1).every((s,a)=>s===e[a])?i[i.length-1]-e[e.length-1]:0}function f_(i,e,n=!1){let{routesMeta:s}=i,a={},u="/",h=[];for(let m=0;m<s.length;++m){let g=s[m],v=m===s.length-1,w=u==="/"?e:e.slice(u.length)||"/",A=tu({path:g.relativePath,caseSensitive:g.caseSensitive,end:v},w),R=g.route;if(!A&&v&&n&&!s[s.length-1].route.index&&(A=tu({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},w)),!A)return null;Object.assign(a,A.params),h.push({params:a,pathname:mr([u,A.pathname]),pathnameBase:__(mr([u,A.pathnameBase])),route:R}),A.pathnameBase!=="/"&&(u=mr([u,A.pathnameBase]))}return h}function tu(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[n,s]=p_(i.path,i.caseSensitive,i.end),a=e.match(n);if(!a)return null;let u=a[0],h=u.replace(/(.)\/+$/,"$1"),m=a.slice(1);return{params:s.reduce((v,{paramName:w,isOptional:A},R)=>{if(w==="*"){let U=m[R]||"";h=u.slice(0,u.length-U.length).replace(/(.)\/+$/,"$1")}const L=m[R];return A&&!L?v[w]=void 0:v[w]=(L||"").replace(/%2F/g,"/"),v},{}),pathname:u,pathnameBase:h,pattern:i}}function p_(i,e=!1,n=!0){Qn(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let s=[],a="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,m,g)=>(s.push({paramName:m,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(s.push({paramName:"*"}),a+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":i!==""&&i!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),s]}function m_(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Qn(!1,`The URL path "${i}" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function Jr(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=i.charAt(n);return s&&s!=="/"?null:i.slice(n)||"/"}function g_(i,e="/"){let{pathname:n,search:s="",hash:a=""}=typeof i=="string"?Ks(i):i;return{pathname:n?n.startsWith("/")?n:y_(n,e):e,search:E_(s),hash:w_(a)}}function y_(i,e){let n=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function hh(i,e,n,s){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function v_(i){return i.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Xm(i){let e=v_(i);return e.map((n,s)=>s===e.length-1?n.pathname:n.pathnameBase)}function Ym(i,e,n,s=!1){let a;typeof i=="string"?a=Ks(i):(a={...i},tt(!a.pathname||!a.pathname.includes("?"),hh("?","pathname","search",a)),tt(!a.pathname||!a.pathname.includes("#"),hh("#","pathname","hash",a)),tt(!a.search||!a.search.includes("#"),hh("#","search","hash",a)));let u=i===""||a.pathname==="",h=u?"/":a.pathname,m;if(h==null)m=n;else{let A=e.length-1;if(!s&&h.startsWith("..")){let R=h.split("/");for(;R[0]==="..";)R.shift(),A-=1;a.pathname=R.join("/")}m=A>=0?e[A]:"/"}let g=g_(a,m),v=h&&h!=="/"&&h.endsWith("/"),w=(u||h===".")&&n.endsWith("/");return!g.pathname.endsWith("/")&&(v||w)&&(g.pathname+="/"),g}var mr=i=>i.join("/").replace(/\/\/+/g,"/"),__=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),E_=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,w_=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function T_(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var Jm=["POST","PUT","PATCH","DELETE"];new Set(Jm);var S_=["GET",...Jm];new Set(S_);var Gs=q.createContext(null);Gs.displayName="DataRouter";var mu=q.createContext(null);mu.displayName="DataRouterState";var Zm=q.createContext({isTransitioning:!1});Zm.displayName="ViewTransition";var I_=q.createContext(new Map);I_.displayName="Fetchers";var R_=q.createContext(null);R_.displayName="Await";var Xn=q.createContext(null);Xn.displayName="Navigation";var va=q.createContext(null);va.displayName="Location";var wr=q.createContext({outlet:null,matches:[],isDataRoute:!1});wr.displayName="Route";var Hh=q.createContext(null);Hh.displayName="RouteError";function C_(i,{relative:e}={}){tt(_a(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=q.useContext(Xn),{hash:a,pathname:u,search:h}=Ea(i,{relative:e}),m=u;return n!=="/"&&(m=u==="/"?n:mr([n,u])),s.createHref({pathname:m,search:h,hash:a})}function _a(){return q.useContext(va)!=null}function bi(){return tt(_a(),"useLocation() may be used only in the context of a <Router> component."),q.useContext(va).location}var eg="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function tg(i){q.useContext(Xn).static||q.useLayoutEffect(i)}function A_(){let{isDataRoute:i}=q.useContext(wr);return i?b_():P_()}function P_(){tt(_a(),"useNavigate() may be used only in the context of a <Router> component.");let i=q.useContext(Gs),{basename:e,navigator:n}=q.useContext(Xn),{matches:s}=q.useContext(wr),{pathname:a}=bi(),u=JSON.stringify(Xm(s)),h=q.useRef(!1);return tg(()=>{h.current=!0}),q.useCallback((g,v={})=>{if(Qn(h.current,eg),!h.current)return;if(typeof g=="number"){n.go(g);return}let w=Ym(g,JSON.parse(u),a,v.relative==="path");i==null&&e!=="/"&&(w.pathname=w.pathname==="/"?e:mr([e,w.pathname])),(v.replace?n.replace:n.push)(w,v.state,v)},[e,n,u,a,i])}q.createContext(null);function Ea(i,{relative:e}={}){let{matches:n}=q.useContext(wr),{pathname:s}=bi(),a=JSON.stringify(Xm(n));return q.useMemo(()=>Ym(i,JSON.parse(a),s,e==="path"),[i,a,s,e])}function k_(i,e){return ng(i,e)}function ng(i,e,n,s){var Q;tt(_a(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=q.useContext(Xn),{matches:u}=q.useContext(wr),h=u[u.length-1],m=h?h.params:{},g=h?h.pathname:"/",v=h?h.pathnameBase:"/",w=h&&h.route;{let K=w&&w.path||"";rg(g,!w||K.endsWith("*")||K.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${K}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${K}"> to <Route path="${K==="/"?"*":`${K}/*`}">.`)}let A=bi(),R;if(e){let K=typeof e=="string"?Ks(e):e;tt(v==="/"||((Q=K.pathname)==null?void 0:Q.startsWith(v)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${v}" but pathname "${K.pathname}" was given in the \`location\` prop.`),R=K}else R=A;let L=R.pathname||"/",U=L;if(v!=="/"){let K=v.replace(/^\//,"").split("/");U="/"+L.replace(/^\//,"").split("/").slice(K.length).join("/")}let $=Qm(i,{pathname:U});Qn(w||$!=null,`No routes matched location "${R.pathname}${R.search}${R.hash}" `),Qn($==null||$[$.length-1].route.element!==void 0||$[$.length-1].route.Component!==void 0||$[$.length-1].route.lazy!==void 0,`Matched leaf route at location "${R.pathname}${R.search}${R.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let b=L_($&&$.map(K=>Object.assign({},K,{params:Object.assign({},m,K.params),pathname:mr([v,a.encodeLocation?a.encodeLocation(K.pathname).pathname:K.pathname]),pathnameBase:K.pathnameBase==="/"?v:mr([v,a.encodeLocation?a.encodeLocation(K.pathnameBase).pathname:K.pathnameBase])})),u,n,s);return e&&b?q.createElement(va.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...R},navigationType:"POP"}},b):b}function x_(){let i=z_(),e=T_(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),n=i instanceof Error?i.stack:null,s="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:s},u={padding:"2px 4px",backgroundColor:s},h=null;return console.error("Error handled by React Router default ErrorBoundary:",i),h=q.createElement(q.Fragment,null,q.createElement("p",null," Hey developer "),q.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",q.createElement("code",{style:u},"ErrorBoundary")," or"," ",q.createElement("code",{style:u},"errorElement")," prop on your route.")),q.createElement(q.Fragment,null,q.createElement("h2",null,"Unexpected Application Error!"),q.createElement("h3",{style:{fontStyle:"italic"}},e),n?q.createElement("pre",{style:a},n):null,h)}var V_=q.createElement(x_,null),D_=class extends q.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){console.error("React Router caught the following error during render",i,e)}render(){return this.state.error!==void 0?q.createElement(wr.Provider,{value:this.props.routeContext},q.createElement(Hh.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function N_({routeContext:i,match:e,children:n}){let s=q.useContext(Gs);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),q.createElement(wr.Provider,{value:i},n)}function L_(i,e=[],n=null,s=null){if(i==null){if(!n)return null;if(n.errors)i=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)i=n.matches;else return null}let a=i,u=n==null?void 0:n.errors;if(u!=null){let g=a.findIndex(v=>v.route.id&&(u==null?void 0:u[v.route.id])!==void 0);tt(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),a=a.slice(0,Math.min(a.length,g+1))}let h=!1,m=-1;if(n)for(let g=0;g<a.length;g++){let v=a[g];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(m=g),v.route.id){let{loaderData:w,errors:A}=n,R=v.route.loader&&!w.hasOwnProperty(v.route.id)&&(!A||A[v.route.id]===void 0);if(v.route.lazy||R){h=!0,m>=0?a=a.slice(0,m+1):a=[a[0]];break}}}return a.reduceRight((g,v,w)=>{let A,R=!1,L=null,U=null;n&&(A=u&&v.route.id?u[v.route.id]:void 0,L=v.route.errorElement||V_,h&&(m<0&&w===0?(rg("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),R=!0,U=null):m===w&&(R=!0,U=v.route.hydrateFallbackElement||null)));let $=e.concat(a.slice(0,w+1)),b=()=>{let Q;return A?Q=L:R?Q=U:v.route.Component?Q=q.createElement(v.route.Component,null):v.route.element?Q=v.route.element:Q=g,q.createElement(N_,{match:v,routeContext:{outlet:g,matches:$,isDataRoute:n!=null},children:Q})};return n&&(v.route.ErrorBoundary||v.route.errorElement||w===0)?q.createElement(D_,{location:n.location,revalidation:n.revalidation,component:L,error:A,children:b(),routeContext:{outlet:null,matches:$,isDataRoute:!0}}):b()},null)}function Wh(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function O_(i){let e=q.useContext(Gs);return tt(e,Wh(i)),e}function M_(i){let e=q.useContext(mu);return tt(e,Wh(i)),e}function F_(i){let e=q.useContext(wr);return tt(e,Wh(i)),e}function Qh(i){let e=F_(i),n=e.matches[e.matches.length-1];return tt(n.route.id,`${i} can only be used on routes that contain a unique "id"`),n.route.id}function U_(){return Qh("useRouteId")}function z_(){var s;let i=q.useContext(Hh),e=M_("useRouteError"),n=Qh("useRouteError");return i!==void 0?i:(s=e.errors)==null?void 0:s[n]}function b_(){let{router:i}=O_("useNavigate"),e=Qh("useNavigate"),n=q.useRef(!1);return tg(()=>{n.current=!0}),q.useCallback(async(a,u={})=>{Qn(n.current,eg),n.current&&(typeof a=="number"?i.navigate(a):await i.navigate(a,{fromRouteId:e,...u}))},[i,e])}var Gp={};function rg(i,e,n){!e&&!Gp[i]&&(Gp[i]=!0,Qn(!1,n))}q.memo(B_);function B_({routes:i,future:e,state:n}){return ng(i,void 0,n,e)}function ig(i){tt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function j_({basename:i="/",children:e=null,location:n,navigationType:s="POP",navigator:a,static:u=!1}){tt(!_a(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=i.replace(/^\/*/,"/"),m=q.useMemo(()=>({basename:h,navigator:a,static:u,future:{}}),[h,a,u]);typeof n=="string"&&(n=Ks(n));let{pathname:g="/",search:v="",hash:w="",state:A=null,key:R="default"}=n,L=q.useMemo(()=>{let U=Jr(g,h);return U==null?null:{location:{pathname:U,search:v,hash:w,state:A,key:R},navigationType:s}},[h,g,v,w,A,R,s]);return Qn(L!=null,`<Router basename="${h}"> is not able to match the URL "${g}${v}${w}" because it does not start with the basename, so the <Router> won't render anything.`),L==null?null:q.createElement(Xn.Provider,{value:m},q.createElement(va.Provider,{children:e,value:L}))}function $_({children:i,location:e}){return k_(Th(i),e)}function Th(i,e=[]){let n=[];return q.Children.forEach(i,(s,a)=>{if(!q.isValidElement(s))return;let u=[...e,a];if(s.type===q.Fragment){n.push.apply(n,Th(s.props.children,u));return}tt(s.type===ig,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),tt(!s.props.index||!s.props.children,"An index route cannot have child routes.");let h={id:s.props.id||u.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(h.children=Th(s.props.children,u)),n.push(h)}),n}var Ql="get",Kl="application/x-www-form-urlencoded";function gu(i){return i!=null&&typeof i.tagName=="string"}function q_(i){return gu(i)&&i.tagName.toLowerCase()==="button"}function H_(i){return gu(i)&&i.tagName.toLowerCase()==="form"}function W_(i){return gu(i)&&i.tagName.toLowerCase()==="input"}function Q_(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function K_(i,e){return i.button===0&&(!e||e==="_self")&&!Q_(i)}var Bl=null;function G_(){if(Bl===null)try{new FormData(document.createElement("form"),0),Bl=!1}catch{Bl=!0}return Bl}var X_=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function dh(i){return i!=null&&!X_.has(i)?(Qn(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Kl}"`),null):i}function Y_(i,e){let n,s,a,u,h;if(H_(i)){let m=i.getAttribute("action");s=m?Jr(m,e):null,n=i.getAttribute("method")||Ql,a=dh(i.getAttribute("enctype"))||Kl,u=new FormData(i)}else if(q_(i)||W_(i)&&(i.type==="submit"||i.type==="image")){let m=i.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=i.getAttribute("formaction")||m.getAttribute("action");if(s=g?Jr(g,e):null,n=i.getAttribute("formmethod")||m.getAttribute("method")||Ql,a=dh(i.getAttribute("formenctype"))||dh(m.getAttribute("enctype"))||Kl,u=new FormData(m,i),!G_()){let{name:v,type:w,value:A}=i;if(w==="image"){let R=v?`${v}.`:"";u.append(`${R}x`,"0"),u.append(`${R}y`,"0")}else v&&u.append(v,A)}}else{if(gu(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Ql,s=null,a=Kl,h=i}return u&&a==="text/plain"&&(h=u,u=void 0),{action:s,method:n.toLowerCase(),encType:a,formData:u,body:h}}function Kh(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}async function J_(i,e){if(i.id in e)return e[i.id];try{let n=await import(i.module);return e[i.id]=n,n}catch(n){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Z_(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function e0(i,e,n){let s=await Promise.all(i.map(async a=>{let u=e.routes[a.route.id];if(u){let h=await J_(u,n);return h.links?h.links():[]}return[]}));return i0(s.flat(1).filter(Z_).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function Xp(i,e,n,s,a,u){let h=(g,v)=>n[v]?g.route.id!==n[v].route.id:!0,m=(g,v)=>{var w;return n[v].pathname!==g.pathname||((w=n[v].route.path)==null?void 0:w.endsWith("*"))&&n[v].params["*"]!==g.params["*"]};return u==="assets"?e.filter((g,v)=>h(g,v)||m(g,v)):u==="data"?e.filter((g,v)=>{var A;let w=s.routes[g.route.id];if(!w||!w.hasLoader)return!1;if(h(g,v)||m(g,v))return!0;if(g.route.shouldRevalidate){let R=g.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((A=n[0])==null?void 0:A.params)||{},nextUrl:new URL(i,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof R=="boolean")return R}return!0}):[]}function t0(i,e){return n0(i.map(n=>{let s=e.routes[n.route.id];if(!s)return[];let a=[s.module];return s.imports&&(a=a.concat(s.imports)),a}).flat(1))}function n0(i){return[...new Set(i)]}function r0(i){let e={},n=Object.keys(i).sort();for(let s of n)e[s]=i[s];return e}function i0(i,e){let n=new Set;return new Set(e),i.reduce((s,a)=>{let u=JSON.stringify(r0(a));return n.has(u)||(n.add(u),s.push({key:u,link:a})),s},[])}function s0(i){let e=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function o0(){let i=q.useContext(Gs);return Kh(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function a0(){let i=q.useContext(mu);return Kh(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var Gh=q.createContext(void 0);Gh.displayName="FrameworkContext";function sg(){let i=q.useContext(Gh);return Kh(i,"You must render this element inside a <HydratedRouter> element"),i}function l0(i,e){let n=q.useContext(Gh),[s,a]=q.useState(!1),[u,h]=q.useState(!1),{onFocus:m,onBlur:g,onMouseEnter:v,onMouseLeave:w,onTouchStart:A}=e,R=q.useRef(null);q.useEffect(()=>{if(i==="render"&&h(!0),i==="viewport"){let $=Q=>{Q.forEach(K=>{h(K.isIntersecting)})},b=new IntersectionObserver($,{threshold:.5});return R.current&&b.observe(R.current),()=>{b.disconnect()}}},[i]),q.useEffect(()=>{if(s){let $=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout($)}}},[s]);let L=()=>{a(!0)},U=()=>{a(!1),h(!1)};return n?i!=="intent"?[u,R,{}]:[u,R,{onFocus:Zo(m,L),onBlur:Zo(g,U),onMouseEnter:Zo(v,L),onMouseLeave:Zo(w,U),onTouchStart:Zo(A,L)}]:[!1,R,{}]}function Zo(i,e){return n=>{i&&i(n),n.defaultPrevented||e(n)}}function u0({page:i,...e}){let{router:n}=o0(),s=q.useMemo(()=>Qm(n.routes,i,n.basename),[n.routes,i,n.basename]);return s?q.createElement(h0,{page:i,matches:s,...e}):null}function c0(i){let{manifest:e,routeModules:n}=sg(),[s,a]=q.useState([]);return q.useEffect(()=>{let u=!1;return e0(i,e,n).then(h=>{u||a(h)}),()=>{u=!0}},[i,e,n]),s}function h0({page:i,matches:e,...n}){let s=bi(),{manifest:a,routeModules:u}=sg(),{loaderData:h,matches:m}=a0(),g=q.useMemo(()=>Xp(i,e,m,a,s,"data"),[i,e,m,a,s]),v=q.useMemo(()=>Xp(i,e,m,a,s,"assets"),[i,e,m,a,s]),w=q.useMemo(()=>{if(i===s.pathname+s.search+s.hash)return[];let L=new Set,U=!1;if(e.forEach(b=>{var K;let Q=a.routes[b.route.id];!Q||!Q.hasLoader||(!g.some(re=>re.route.id===b.route.id)&&b.route.id in h&&((K=u[b.route.id])!=null&&K.shouldRevalidate)||Q.hasClientLoader?U=!0:L.add(b.route.id))}),L.size===0)return[];let $=s0(i);return U&&L.size>0&&$.searchParams.set("_routes",e.filter(b=>L.has(b.route.id)).map(b=>b.route.id).join(",")),[$.pathname+$.search]},[h,s,a,g,e,i,u]),A=q.useMemo(()=>t0(v,a),[v,a]),R=c0(v);return q.createElement(q.Fragment,null,w.map(L=>q.createElement("link",{key:L,rel:"prefetch",as:"fetch",href:L,...n})),A.map(L=>q.createElement("link",{key:L,rel:"modulepreload",href:L,...n})),R.map(({key:L,link:U})=>q.createElement("link",{key:L,...U})))}function d0(...i){return e=>{i.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var og=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{og&&(window.__reactRouterVersion="7.1.1")}catch{}function f0({basename:i,children:e,window:n}){let s=q.useRef();s.current==null&&(s.current=e_({window:n,v5Compat:!0}));let a=s.current,[u,h]=q.useState({action:a.action,location:a.location}),m=q.useCallback(g=>{q.startTransition(()=>h(g))},[h]);return q.useLayoutEffect(()=>a.listen(m),[a,m]),q.createElement(j_,{basename:i,children:e,location:u.location,navigationType:u.action,navigator:a})}var ag=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,lg=q.forwardRef(function({onClick:e,discover:n="render",prefetch:s="none",relative:a,reloadDocument:u,replace:h,state:m,target:g,to:v,preventScrollReset:w,viewTransition:A,...R},L){let{basename:U}=q.useContext(Xn),$=typeof v=="string"&&ag.test(v),b,Q=!1;if(typeof v=="string"&&$&&(b=v,og))try{let C=new URL(window.location.href),k=v.startsWith("//")?new URL(C.protocol+v):new URL(v),D=Jr(k.pathname,U);k.origin===C.origin&&D!=null?v=D+k.search+k.hash:Q=!0}catch{Qn(!1,`<Link to="${v}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let K=C_(v,{relative:a}),[re,ce,Ce]=l0(s,R),Ie=y0(v,{replace:h,state:m,target:g,preventScrollReset:w,relative:a,viewTransition:A});function x(C){e&&e(C),C.defaultPrevented||Ie(C)}let S=q.createElement("a",{...R,...Ce,href:b||K,onClick:Q||u?e:x,ref:d0(L,ce),target:g,"data-discover":!$&&n==="render"?"true":void 0});return re&&!$?q.createElement(q.Fragment,null,S,q.createElement(u0,{page:K})):S});lg.displayName="Link";var p0=q.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:s="",end:a=!1,style:u,to:h,viewTransition:m,children:g,...v},w){let A=Ea(h,{relative:v.relative}),R=bi(),L=q.useContext(mu),{navigator:U,basename:$}=q.useContext(Xn),b=L!=null&&T0(A)&&m===!0,Q=U.encodeLocation?U.encodeLocation(A).pathname:A.pathname,K=R.pathname,re=L&&L.navigation&&L.navigation.location?L.navigation.location.pathname:null;n||(K=K.toLowerCase(),re=re?re.toLowerCase():null,Q=Q.toLowerCase()),re&&$&&(re=Jr(re,$)||re);const ce=Q!=="/"&&Q.endsWith("/")?Q.length-1:Q.length;let Ce=K===Q||!a&&K.startsWith(Q)&&K.charAt(ce)==="/",Ie=re!=null&&(re===Q||!a&&re.startsWith(Q)&&re.charAt(Q.length)==="/"),x={isActive:Ce,isPending:Ie,isTransitioning:b},S=Ce?e:void 0,C;typeof s=="function"?C=s(x):C=[s,Ce?"active":null,Ie?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let k=typeof u=="function"?u(x):u;return q.createElement(lg,{...v,"aria-current":S,className:C,ref:w,style:k,to:h,viewTransition:m},typeof g=="function"?g(x):g)});p0.displayName="NavLink";var m0=q.forwardRef(({discover:i="render",fetcherKey:e,navigate:n,reloadDocument:s,replace:a,state:u,method:h=Ql,action:m,onSubmit:g,relative:v,preventScrollReset:w,viewTransition:A,...R},L)=>{let U=E0(),$=w0(m,{relative:v}),b=h.toLowerCase()==="get"?"get":"post",Q=typeof m=="string"&&ag.test(m),K=re=>{if(g&&g(re),re.defaultPrevented)return;re.preventDefault();let ce=re.nativeEvent.submitter,Ce=(ce==null?void 0:ce.getAttribute("formmethod"))||h;U(ce||re.currentTarget,{fetcherKey:e,method:Ce,navigate:n,replace:a,state:u,relative:v,preventScrollReset:w,viewTransition:A})};return q.createElement("form",{ref:L,method:b,action:$,onSubmit:s?g:K,...R,"data-discover":!Q&&i==="render"?"true":void 0})});m0.displayName="Form";function g0(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ug(i){let e=q.useContext(Gs);return tt(e,g0(i)),e}function y0(i,{target:e,replace:n,state:s,preventScrollReset:a,relative:u,viewTransition:h}={}){let m=A_(),g=bi(),v=Ea(i,{relative:u});return q.useCallback(w=>{if(K_(w,e)){w.preventDefault();let A=n!==void 0?n:ua(g)===ua(v);m(i,{replace:A,state:s,preventScrollReset:a,relative:u,viewTransition:h})}},[g,m,v,n,s,e,i,a,u,h])}var v0=0,_0=()=>`__${String(++v0)}__`;function E0(){let{router:i}=ug("useSubmit"),{basename:e}=q.useContext(Xn),n=U_();return q.useCallback(async(s,a={})=>{let{action:u,method:h,encType:m,formData:g,body:v}=Y_(s,e);if(a.navigate===!1){let w=a.fetcherKey||_0();await i.fetch(w,n,a.action||u,{preventScrollReset:a.preventScrollReset,formData:g,body:v,formMethod:a.method||h,formEncType:a.encType||m,flushSync:a.flushSync})}else await i.navigate(a.action||u,{preventScrollReset:a.preventScrollReset,formData:g,body:v,formMethod:a.method||h,formEncType:a.encType||m,replace:a.replace,state:a.state,fromRouteId:n,flushSync:a.flushSync,viewTransition:a.viewTransition})},[i,e,n])}function w0(i,{relative:e}={}){let{basename:n}=q.useContext(Xn),s=q.useContext(wr);tt(s,"useFormAction must be used inside a RouteContext");let[a]=s.matches.slice(-1),u={...Ea(i||".",{relative:e})},h=bi();if(i==null){u.search=h.search;let m=new URLSearchParams(u.search),g=m.getAll("index");if(g.some(w=>w==="")){m.delete("index"),g.filter(A=>A).forEach(A=>m.append("index",A));let w=m.toString();u.search=w?`?${w}`:""}}return(!i||i===".")&&a.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(u.pathname=u.pathname==="/"?n:mr([n,u.pathname])),ua(u)}function T0(i,e={}){let n=q.useContext(Zm);tt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=ug("useViewTransitionState"),a=Ea(i,{relative:e.relative});if(!n.isTransitioning)return!1;let u=Jr(n.currentLocation.pathname,s)||n.currentLocation.pathname,h=Jr(n.nextLocation.pathname,s)||n.nextLocation.pathname;return tu(a.pathname,h)!=null||tu(a.pathname,u)!=null}new TextEncoder;var Yp={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cg=function(i){const e=[];let n=0;for(let s=0;s<i.length;s++){let a=i.charCodeAt(s);a<128?e[n++]=a:a<2048?(e[n++]=a>>6|192,e[n++]=a&63|128):(a&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(a=65536+((a&1023)<<10)+(i.charCodeAt(++s)&1023),e[n++]=a>>18|240,e[n++]=a>>12&63|128,e[n++]=a>>6&63|128,e[n++]=a&63|128):(e[n++]=a>>12|224,e[n++]=a>>6&63|128,e[n++]=a&63|128)}return e},S0=function(i){const e=[];let n=0,s=0;for(;n<i.length;){const a=i[n++];if(a<128)e[s++]=String.fromCharCode(a);else if(a>191&&a<224){const u=i[n++];e[s++]=String.fromCharCode((a&31)<<6|u&63)}else if(a>239&&a<365){const u=i[n++],h=i[n++],m=i[n++],g=((a&7)<<18|(u&63)<<12|(h&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const u=i[n++],h=i[n++];e[s++]=String.fromCharCode((a&15)<<12|(u&63)<<6|h&63)}}return e.join("")},hg={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let a=0;a<i.length;a+=3){const u=i[a],h=a+1<i.length,m=h?i[a+1]:0,g=a+2<i.length,v=g?i[a+2]:0,w=u>>2,A=(u&3)<<4|m>>4;let R=(m&15)<<2|v>>6,L=v&63;g||(L=64,h||(R=64)),s.push(n[w],n[A],n[R],n[L])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(cg(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):S0(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let a=0;a<i.length;){const u=n[i.charAt(a++)],m=a<i.length?n[i.charAt(a)]:0;++a;const v=a<i.length?n[i.charAt(a)]:64;++a;const A=a<i.length?n[i.charAt(a)]:64;if(++a,u==null||m==null||v==null||A==null)throw new I0;const R=u<<2|m>>4;if(s.push(R),v!==64){const L=m<<4&240|v>>2;if(s.push(L),A!==64){const U=v<<6&192|A;s.push(U)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class I0 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const R0=function(i){const e=cg(i);return hg.encodeByteArray(e,!0)},nu=function(i){return R0(i).replace(/\./g,"")},C0=function(i){try{return hg.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A0(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P0=()=>A0().__FIREBASE_DEFAULTS__,k0=()=>{if(typeof process>"u"||typeof Yp>"u")return;const i=Yp.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},x0=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&C0(i[1]);return e&&JSON.parse(e)},Xh=()=>{try{return P0()||k0()||x0()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},V0=i=>{var e,n;return(n=(e=Xh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[i]},D0=i=>{const e=V0(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},dg=()=>{var i;return(i=Xh())===null||i===void 0?void 0:i.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L0(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",a=i.iat||0,u=i.sub||i.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:a,exp:a+3600,auth_time:a,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},i);return[nu(JSON.stringify(n)),nu(JSON.stringify(h)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O0(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function M0(){var i;const e=(i=Xh())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function F0(){return!M0()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function U0(){try{return typeof indexedDB=="object"}catch{return!1}}function z0(){return new Promise((i,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(s);a.onsuccess=()=>{a.result.close(),n||self.indexedDB.deleteDatabase(s),i(!0)},a.onupgradeneeded=()=>{n=!1},a.onerror=()=>{var u;e(((u=a.error)===null||u===void 0?void 0:u.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0="FirebaseError";class Xs extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=b0,Object.setPrototypeOf(this,Xs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,fg.prototype.create)}}class fg{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},a=`${this.service}/${e}`,u=this.errors[e],h=u?B0(u,s):"Error",m=`${this.serviceName}: ${h} (${a}).`;return new Xs(a,m,s)}}function B0(i,e){return i.replace(j0,(n,s)=>{const a=e[s];return a!=null?String(a):`<${s}?>`})}const j0=/\{\$([^}]+)}/g;function Sh(i,e){if(i===e)return!0;const n=Object.keys(i),s=Object.keys(e);for(const a of n){if(!s.includes(a))return!1;const u=i[a],h=e[a];if(Jp(u)&&Jp(h)){if(!Sh(u,h))return!1}else if(u!==h)return!1}for(const a of s)if(!n.includes(a))return!1;return!0}function Jp(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zr(i){return i&&i._delegate?i._delegate:i}class ca{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new N0;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:n});a&&s.resolve(a)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(u){if(a)return null;throw u}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(H0(e))try{this.getOrInitializeService({instanceIdentifier:Oi})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:a});s.resolve(u)}catch{}}}}clearInstance(e=Oi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Oi){return this.instances.has(e)}getOptions(e=Oi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,h]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);s===m&&h.resolve(a)}return a}onInit(e,n){var s;const a=this.normalizeInstanceIdentifier(n),u=(s=this.onInitCallbacks.get(a))!==null&&s!==void 0?s:new Set;u.add(e),this.onInitCallbacks.set(a,u);const h=this.instances.get(a);return h&&e(h,a),()=>{u.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const a of s)try{a(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:q0(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Oi){return this.component?this.component.multipleInstances?e:Oi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function q0(i){return i===Oi?void 0:i}function H0(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new $0(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Oe;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Oe||(Oe={}));const Q0={debug:Oe.DEBUG,verbose:Oe.VERBOSE,info:Oe.INFO,warn:Oe.WARN,error:Oe.ERROR,silent:Oe.SILENT},K0=Oe.INFO,G0={[Oe.DEBUG]:"log",[Oe.VERBOSE]:"log",[Oe.INFO]:"info",[Oe.WARN]:"warn",[Oe.ERROR]:"error"},X0=(i,e,...n)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),a=G0[e];if(a)console[a](`[${s}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class pg{constructor(e){this.name=e,this._logLevel=K0,this._logHandler=X0,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Q0[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Oe.DEBUG,...e),this._logHandler(this,Oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Oe.VERBOSE,...e),this._logHandler(this,Oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Oe.INFO,...e),this._logHandler(this,Oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Oe.WARN,...e),this._logHandler(this,Oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Oe.ERROR,...e),this._logHandler(this,Oe.ERROR,...e)}}const Y0=(i,e)=>e.some(n=>i instanceof n);let Zp,em;function J0(){return Zp||(Zp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Z0(){return em||(em=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const mg=new WeakMap,Ih=new WeakMap,gg=new WeakMap,fh=new WeakMap,Yh=new WeakMap;function eE(i){const e=new Promise((n,s)=>{const a=()=>{i.removeEventListener("success",u),i.removeEventListener("error",h)},u=()=>{n(Gr(i.result)),a()},h=()=>{s(i.error),a()};i.addEventListener("success",u),i.addEventListener("error",h)});return e.then(n=>{n instanceof IDBCursor&&mg.set(n,i)}).catch(()=>{}),Yh.set(e,i),e}function tE(i){if(Ih.has(i))return;const e=new Promise((n,s)=>{const a=()=>{i.removeEventListener("complete",u),i.removeEventListener("error",h),i.removeEventListener("abort",h)},u=()=>{n(),a()},h=()=>{s(i.error||new DOMException("AbortError","AbortError")),a()};i.addEventListener("complete",u),i.addEventListener("error",h),i.addEventListener("abort",h)});Ih.set(i,e)}let Rh={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return Ih.get(i);if(e==="objectStoreNames")return i.objectStoreNames||gg.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Gr(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function nE(i){Rh=i(Rh)}function rE(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=i.call(ph(this),e,...n);return gg.set(s,e.sort?e.sort():[e]),Gr(s)}:Z0().includes(i)?function(...e){return i.apply(ph(this),e),Gr(mg.get(this))}:function(...e){return Gr(i.apply(ph(this),e))}}function iE(i){return typeof i=="function"?rE(i):(i instanceof IDBTransaction&&tE(i),Y0(i,J0())?new Proxy(i,Rh):i)}function Gr(i){if(i instanceof IDBRequest)return eE(i);if(fh.has(i))return fh.get(i);const e=iE(i);return e!==i&&(fh.set(i,e),Yh.set(e,i)),e}const ph=i=>Yh.get(i);function sE(i,e,{blocked:n,upgrade:s,blocking:a,terminated:u}={}){const h=indexedDB.open(i,e),m=Gr(h);return s&&h.addEventListener("upgradeneeded",g=>{s(Gr(h.result),g.oldVersion,g.newVersion,Gr(h.transaction),g)}),n&&h.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),m.then(g=>{u&&g.addEventListener("close",()=>u()),a&&g.addEventListener("versionchange",v=>a(v.oldVersion,v.newVersion,v))}).catch(()=>{}),m}const oE=["get","getKey","getAll","getAllKeys","count"],aE=["put","add","delete","clear"],mh=new Map;function tm(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(mh.get(e))return mh.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,a=aE.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(a||oE.includes(n)))return;const u=async function(h,...m){const g=this.transaction(h,a?"readwrite":"readonly");let v=g.store;return s&&(v=v.index(m.shift())),(await Promise.all([v[n](...m),a&&g.done]))[0]};return mh.set(e,u),u}nE(i=>({...i,get:(e,n,s)=>tm(e,n)||i.get(e,n,s),has:(e,n)=>!!tm(e,n)||i.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(uE(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function uE(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ch="@firebase/app",nm="0.10.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yr=new pg("@firebase/app"),cE="@firebase/app-compat",hE="@firebase/analytics-compat",dE="@firebase/analytics",fE="@firebase/app-check-compat",pE="@firebase/app-check",mE="@firebase/auth",gE="@firebase/auth-compat",yE="@firebase/database",vE="@firebase/data-connect",_E="@firebase/database-compat",EE="@firebase/functions",wE="@firebase/functions-compat",TE="@firebase/installations",SE="@firebase/installations-compat",IE="@firebase/messaging",RE="@firebase/messaging-compat",CE="@firebase/performance",AE="@firebase/performance-compat",PE="@firebase/remote-config",kE="@firebase/remote-config-compat",xE="@firebase/storage",VE="@firebase/storage-compat",DE="@firebase/firestore",NE="@firebase/vertexai",LE="@firebase/firestore-compat",OE="firebase",ME="11.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ah="[DEFAULT]",FE={[Ch]:"fire-core",[cE]:"fire-core-compat",[dE]:"fire-analytics",[hE]:"fire-analytics-compat",[pE]:"fire-app-check",[fE]:"fire-app-check-compat",[mE]:"fire-auth",[gE]:"fire-auth-compat",[yE]:"fire-rtdb",[vE]:"fire-data-connect",[_E]:"fire-rtdb-compat",[EE]:"fire-fn",[wE]:"fire-fn-compat",[TE]:"fire-iid",[SE]:"fire-iid-compat",[IE]:"fire-fcm",[RE]:"fire-fcm-compat",[CE]:"fire-perf",[AE]:"fire-perf-compat",[PE]:"fire-rc",[kE]:"fire-rc-compat",[xE]:"fire-gcs",[VE]:"fire-gcs-compat",[DE]:"fire-fst",[LE]:"fire-fst-compat",[NE]:"fire-vertex","fire-js":"fire-js",[OE]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ru=new Map,UE=new Map,Ph=new Map;function rm(i,e){try{i.container.addComponent(e)}catch(n){yr.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function iu(i){const e=i.name;if(Ph.has(e))return yr.debug(`There were multiple attempts to register component ${e}.`),!1;Ph.set(e,i);for(const n of ru.values())rm(n,i);for(const n of UE.values())rm(n,i);return!0}function zE(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bE={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Xr=new fg("app","Firebase",bE);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new ca("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Xr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jE=ME;function yg(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Ah,automaticDataCollectionEnabled:!1},e),a=s.name;if(typeof a!="string"||!a)throw Xr.create("bad-app-name",{appName:String(a)});if(n||(n=dg()),!n)throw Xr.create("no-options");const u=ru.get(a);if(u){if(Sh(n,u.options)&&Sh(s,u.config))return u;throw Xr.create("duplicate-app",{appName:a})}const h=new W0(a);for(const g of Ph.values())h.addComponent(g);const m=new BE(n,s,h);return ru.set(a,m),m}function $E(i=Ah){const e=ru.get(i);if(!e&&i===Ah&&dg())return yg();if(!e)throw Xr.create("no-app",{appName:i});return e}function zs(i,e,n){var s;let a=(s=FE[i])!==null&&s!==void 0?s:i;n&&(a+=`-${n}`);const u=a.match(/\s|\//),h=e.match(/\s|\//);if(u||h){const m=[`Unable to register library "${a}" with version "${e}":`];u&&m.push(`library name "${a}" contains illegal characters (whitespace or "/")`),u&&h&&m.push("and"),h&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),yr.warn(m.join(" "));return}iu(new ca(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qE="firebase-heartbeat-database",HE=1,ha="firebase-heartbeat-store";let gh=null;function vg(){return gh||(gh=sE(qE,HE,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(ha)}catch(n){console.warn(n)}}}}).catch(i=>{throw Xr.create("idb-open",{originalErrorMessage:i.message})})),gh}async function WE(i){try{const n=(await vg()).transaction(ha),s=await n.objectStore(ha).get(_g(i));return await n.done,s}catch(e){if(e instanceof Xs)yr.warn(e.message);else{const n=Xr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});yr.warn(n.message)}}}async function im(i,e){try{const s=(await vg()).transaction(ha,"readwrite");await s.objectStore(ha).put(e,_g(i)),await s.done}catch(n){if(n instanceof Xs)yr.warn(n.message);else{const s=Xr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});yr.warn(s.message)}}}function _g(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QE=1024,KE=30*24*60*60*1e3;class GE{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new YE(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=sm();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(h=>h.date===u)?void 0:(this._heartbeatsCache.heartbeats.push({date:u,agent:a}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(h=>{const m=new Date(h.date).valueOf();return Date.now()-m<=KE}),this._storage.overwrite(this._heartbeatsCache))}catch(s){yr.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=sm(),{heartbeatsToSend:s,unsentEntries:a}=XE(this._heartbeatsCache.heartbeats),u=nu(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(n){return yr.warn(n),""}}}function sm(){return new Date().toISOString().substring(0,10)}function XE(i,e=QE){const n=[];let s=i.slice();for(const a of i){const u=n.find(h=>h.agent===a.agent);if(u){if(u.dates.push(a.date),om(n)>e){u.dates.pop();break}}else if(n.push({agent:a.agent,dates:[a.date]}),om(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class YE{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return U0()?z0().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await WE(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return im(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return im(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function om(i){return nu(JSON.stringify({version:2,heartbeats:i})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JE(i){iu(new ca("platform-logger",e=>new lE(e),"PRIVATE")),iu(new ca("heartbeat",e=>new GE(e),"PRIVATE")),zs(Ch,nm,i),zs(Ch,nm,"esm2017"),zs("fire-js","")}JE("");var ZE="firebase",ew="11.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zs(ZE,ew,"app");var am=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ui,Eg;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,S){function C(){}C.prototype=S.prototype,x.D=S.prototype,x.prototype=new C,x.prototype.constructor=x,x.C=function(k,D,O){for(var T=Array(arguments.length-2),ve=2;ve<arguments.length;ve++)T[ve-2]=arguments[ve];return S.prototype[D].apply(k,T)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(x,S,C){C||(C=0);var k=Array(16);if(typeof S=="string")for(var D=0;16>D;++D)k[D]=S.charCodeAt(C++)|S.charCodeAt(C++)<<8|S.charCodeAt(C++)<<16|S.charCodeAt(C++)<<24;else for(D=0;16>D;++D)k[D]=S[C++]|S[C++]<<8|S[C++]<<16|S[C++]<<24;S=x.g[0],C=x.g[1],D=x.g[2];var O=x.g[3],T=S+(O^C&(D^O))+k[0]+3614090360&4294967295;S=C+(T<<7&4294967295|T>>>25),T=O+(D^S&(C^D))+k[1]+3905402710&4294967295,O=S+(T<<12&4294967295|T>>>20),T=D+(C^O&(S^C))+k[2]+606105819&4294967295,D=O+(T<<17&4294967295|T>>>15),T=C+(S^D&(O^S))+k[3]+3250441966&4294967295,C=D+(T<<22&4294967295|T>>>10),T=S+(O^C&(D^O))+k[4]+4118548399&4294967295,S=C+(T<<7&4294967295|T>>>25),T=O+(D^S&(C^D))+k[5]+1200080426&4294967295,O=S+(T<<12&4294967295|T>>>20),T=D+(C^O&(S^C))+k[6]+2821735955&4294967295,D=O+(T<<17&4294967295|T>>>15),T=C+(S^D&(O^S))+k[7]+4249261313&4294967295,C=D+(T<<22&4294967295|T>>>10),T=S+(O^C&(D^O))+k[8]+1770035416&4294967295,S=C+(T<<7&4294967295|T>>>25),T=O+(D^S&(C^D))+k[9]+2336552879&4294967295,O=S+(T<<12&4294967295|T>>>20),T=D+(C^O&(S^C))+k[10]+4294925233&4294967295,D=O+(T<<17&4294967295|T>>>15),T=C+(S^D&(O^S))+k[11]+2304563134&4294967295,C=D+(T<<22&4294967295|T>>>10),T=S+(O^C&(D^O))+k[12]+1804603682&4294967295,S=C+(T<<7&4294967295|T>>>25),T=O+(D^S&(C^D))+k[13]+4254626195&4294967295,O=S+(T<<12&4294967295|T>>>20),T=D+(C^O&(S^C))+k[14]+2792965006&4294967295,D=O+(T<<17&4294967295|T>>>15),T=C+(S^D&(O^S))+k[15]+1236535329&4294967295,C=D+(T<<22&4294967295|T>>>10),T=S+(D^O&(C^D))+k[1]+4129170786&4294967295,S=C+(T<<5&4294967295|T>>>27),T=O+(C^D&(S^C))+k[6]+3225465664&4294967295,O=S+(T<<9&4294967295|T>>>23),T=D+(S^C&(O^S))+k[11]+643717713&4294967295,D=O+(T<<14&4294967295|T>>>18),T=C+(O^S&(D^O))+k[0]+3921069994&4294967295,C=D+(T<<20&4294967295|T>>>12),T=S+(D^O&(C^D))+k[5]+3593408605&4294967295,S=C+(T<<5&4294967295|T>>>27),T=O+(C^D&(S^C))+k[10]+38016083&4294967295,O=S+(T<<9&4294967295|T>>>23),T=D+(S^C&(O^S))+k[15]+3634488961&4294967295,D=O+(T<<14&4294967295|T>>>18),T=C+(O^S&(D^O))+k[4]+3889429448&4294967295,C=D+(T<<20&4294967295|T>>>12),T=S+(D^O&(C^D))+k[9]+568446438&4294967295,S=C+(T<<5&4294967295|T>>>27),T=O+(C^D&(S^C))+k[14]+3275163606&4294967295,O=S+(T<<9&4294967295|T>>>23),T=D+(S^C&(O^S))+k[3]+4107603335&4294967295,D=O+(T<<14&4294967295|T>>>18),T=C+(O^S&(D^O))+k[8]+1163531501&4294967295,C=D+(T<<20&4294967295|T>>>12),T=S+(D^O&(C^D))+k[13]+2850285829&4294967295,S=C+(T<<5&4294967295|T>>>27),T=O+(C^D&(S^C))+k[2]+4243563512&4294967295,O=S+(T<<9&4294967295|T>>>23),T=D+(S^C&(O^S))+k[7]+1735328473&4294967295,D=O+(T<<14&4294967295|T>>>18),T=C+(O^S&(D^O))+k[12]+2368359562&4294967295,C=D+(T<<20&4294967295|T>>>12),T=S+(C^D^O)+k[5]+4294588738&4294967295,S=C+(T<<4&4294967295|T>>>28),T=O+(S^C^D)+k[8]+2272392833&4294967295,O=S+(T<<11&4294967295|T>>>21),T=D+(O^S^C)+k[11]+1839030562&4294967295,D=O+(T<<16&4294967295|T>>>16),T=C+(D^O^S)+k[14]+4259657740&4294967295,C=D+(T<<23&4294967295|T>>>9),T=S+(C^D^O)+k[1]+2763975236&4294967295,S=C+(T<<4&4294967295|T>>>28),T=O+(S^C^D)+k[4]+1272893353&4294967295,O=S+(T<<11&4294967295|T>>>21),T=D+(O^S^C)+k[7]+4139469664&4294967295,D=O+(T<<16&4294967295|T>>>16),T=C+(D^O^S)+k[10]+3200236656&4294967295,C=D+(T<<23&4294967295|T>>>9),T=S+(C^D^O)+k[13]+681279174&4294967295,S=C+(T<<4&4294967295|T>>>28),T=O+(S^C^D)+k[0]+3936430074&4294967295,O=S+(T<<11&4294967295|T>>>21),T=D+(O^S^C)+k[3]+3572445317&4294967295,D=O+(T<<16&4294967295|T>>>16),T=C+(D^O^S)+k[6]+76029189&4294967295,C=D+(T<<23&4294967295|T>>>9),T=S+(C^D^O)+k[9]+3654602809&4294967295,S=C+(T<<4&4294967295|T>>>28),T=O+(S^C^D)+k[12]+3873151461&4294967295,O=S+(T<<11&4294967295|T>>>21),T=D+(O^S^C)+k[15]+530742520&4294967295,D=O+(T<<16&4294967295|T>>>16),T=C+(D^O^S)+k[2]+3299628645&4294967295,C=D+(T<<23&4294967295|T>>>9),T=S+(D^(C|~O))+k[0]+4096336452&4294967295,S=C+(T<<6&4294967295|T>>>26),T=O+(C^(S|~D))+k[7]+1126891415&4294967295,O=S+(T<<10&4294967295|T>>>22),T=D+(S^(O|~C))+k[14]+2878612391&4294967295,D=O+(T<<15&4294967295|T>>>17),T=C+(O^(D|~S))+k[5]+4237533241&4294967295,C=D+(T<<21&4294967295|T>>>11),T=S+(D^(C|~O))+k[12]+1700485571&4294967295,S=C+(T<<6&4294967295|T>>>26),T=O+(C^(S|~D))+k[3]+2399980690&4294967295,O=S+(T<<10&4294967295|T>>>22),T=D+(S^(O|~C))+k[10]+4293915773&4294967295,D=O+(T<<15&4294967295|T>>>17),T=C+(O^(D|~S))+k[1]+2240044497&4294967295,C=D+(T<<21&4294967295|T>>>11),T=S+(D^(C|~O))+k[8]+1873313359&4294967295,S=C+(T<<6&4294967295|T>>>26),T=O+(C^(S|~D))+k[15]+4264355552&4294967295,O=S+(T<<10&4294967295|T>>>22),T=D+(S^(O|~C))+k[6]+2734768916&4294967295,D=O+(T<<15&4294967295|T>>>17),T=C+(O^(D|~S))+k[13]+1309151649&4294967295,C=D+(T<<21&4294967295|T>>>11),T=S+(D^(C|~O))+k[4]+4149444226&4294967295,S=C+(T<<6&4294967295|T>>>26),T=O+(C^(S|~D))+k[11]+3174756917&4294967295,O=S+(T<<10&4294967295|T>>>22),T=D+(S^(O|~C))+k[2]+718787259&4294967295,D=O+(T<<15&4294967295|T>>>17),T=C+(O^(D|~S))+k[9]+3951481745&4294967295,x.g[0]=x.g[0]+S&4294967295,x.g[1]=x.g[1]+(D+(T<<21&4294967295|T>>>11))&4294967295,x.g[2]=x.g[2]+D&4294967295,x.g[3]=x.g[3]+O&4294967295}s.prototype.u=function(x,S){S===void 0&&(S=x.length);for(var C=S-this.blockSize,k=this.B,D=this.h,O=0;O<S;){if(D==0)for(;O<=C;)a(this,x,O),O+=this.blockSize;if(typeof x=="string"){for(;O<S;)if(k[D++]=x.charCodeAt(O++),D==this.blockSize){a(this,k),D=0;break}}else for(;O<S;)if(k[D++]=x[O++],D==this.blockSize){a(this,k),D=0;break}}this.h=D,this.o+=S},s.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var S=1;S<x.length-8;++S)x[S]=0;var C=8*this.o;for(S=x.length-8;S<x.length;++S)x[S]=C&255,C/=256;for(this.u(x),x=Array(16),S=C=0;4>S;++S)for(var k=0;32>k;k+=8)x[C++]=this.g[S]>>>k&255;return x};function u(x,S){var C=m;return Object.prototype.hasOwnProperty.call(C,x)?C[x]:C[x]=S(x)}function h(x,S){this.h=S;for(var C=[],k=!0,D=x.length-1;0<=D;D--){var O=x[D]|0;k&&O==S||(C[D]=O,k=!1)}this.g=C}var m={};function g(x){return-128<=x&&128>x?u(x,function(S){return new h([S|0],0>S?-1:0)}):new h([x|0],0>x?-1:0)}function v(x){if(isNaN(x)||!isFinite(x))return A;if(0>x)return b(v(-x));for(var S=[],C=1,k=0;x>=C;k++)S[k]=x/C|0,C*=4294967296;return new h(S,0)}function w(x,S){if(x.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(x.charAt(0)=="-")return b(w(x.substring(1),S));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=v(Math.pow(S,8)),k=A,D=0;D<x.length;D+=8){var O=Math.min(8,x.length-D),T=parseInt(x.substring(D,D+O),S);8>O?(O=v(Math.pow(S,O)),k=k.j(O).add(v(T))):(k=k.j(C),k=k.add(v(T)))}return k}var A=g(0),R=g(1),L=g(16777216);i=h.prototype,i.m=function(){if($(this))return-b(this).m();for(var x=0,S=1,C=0;C<this.g.length;C++){var k=this.i(C);x+=(0<=k?k:4294967296+k)*S,S*=4294967296}return x},i.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(U(this))return"0";if($(this))return"-"+b(this).toString(x);for(var S=v(Math.pow(x,6)),C=this,k="";;){var D=ce(C,S).g;C=Q(C,D.j(S));var O=((0<C.g.length?C.g[0]:C.h)>>>0).toString(x);if(C=D,U(C))return O+k;for(;6>O.length;)O="0"+O;k=O+k}},i.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function U(x){if(x.h!=0)return!1;for(var S=0;S<x.g.length;S++)if(x.g[S]!=0)return!1;return!0}function $(x){return x.h==-1}i.l=function(x){return x=Q(this,x),$(x)?-1:U(x)?0:1};function b(x){for(var S=x.g.length,C=[],k=0;k<S;k++)C[k]=~x.g[k];return new h(C,~x.h).add(R)}i.abs=function(){return $(this)?b(this):this},i.add=function(x){for(var S=Math.max(this.g.length,x.g.length),C=[],k=0,D=0;D<=S;D++){var O=k+(this.i(D)&65535)+(x.i(D)&65535),T=(O>>>16)+(this.i(D)>>>16)+(x.i(D)>>>16);k=T>>>16,O&=65535,T&=65535,C[D]=T<<16|O}return new h(C,C[C.length-1]&-2147483648?-1:0)};function Q(x,S){return x.add(b(S))}i.j=function(x){if(U(this)||U(x))return A;if($(this))return $(x)?b(this).j(b(x)):b(b(this).j(x));if($(x))return b(this.j(b(x)));if(0>this.l(L)&&0>x.l(L))return v(this.m()*x.m());for(var S=this.g.length+x.g.length,C=[],k=0;k<2*S;k++)C[k]=0;for(k=0;k<this.g.length;k++)for(var D=0;D<x.g.length;D++){var O=this.i(k)>>>16,T=this.i(k)&65535,ve=x.i(D)>>>16,_e=x.i(D)&65535;C[2*k+2*D]+=T*_e,K(C,2*k+2*D),C[2*k+2*D+1]+=O*_e,K(C,2*k+2*D+1),C[2*k+2*D+1]+=T*ve,K(C,2*k+2*D+1),C[2*k+2*D+2]+=O*ve,K(C,2*k+2*D+2)}for(k=0;k<S;k++)C[k]=C[2*k+1]<<16|C[2*k];for(k=S;k<2*S;k++)C[k]=0;return new h(C,0)};function K(x,S){for(;(x[S]&65535)!=x[S];)x[S+1]+=x[S]>>>16,x[S]&=65535,S++}function re(x,S){this.g=x,this.h=S}function ce(x,S){if(U(S))throw Error("division by zero");if(U(x))return new re(A,A);if($(x))return S=ce(b(x),S),new re(b(S.g),b(S.h));if($(S))return S=ce(x,b(S)),new re(b(S.g),S.h);if(30<x.g.length){if($(x)||$(S))throw Error("slowDivide_ only works with positive integers.");for(var C=R,k=S;0>=k.l(x);)C=Ce(C),k=Ce(k);var D=Ie(C,1),O=Ie(k,1);for(k=Ie(k,2),C=Ie(C,2);!U(k);){var T=O.add(k);0>=T.l(x)&&(D=D.add(C),O=T),k=Ie(k,1),C=Ie(C,1)}return S=Q(x,D.j(S)),new re(D,S)}for(D=A;0<=x.l(S);){for(C=Math.max(1,Math.floor(x.m()/S.m())),k=Math.ceil(Math.log(C)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),O=v(C),T=O.j(S);$(T)||0<T.l(x);)C-=k,O=v(C),T=O.j(S);U(O)&&(O=R),D=D.add(O),x=Q(x,T)}return new re(D,x)}i.A=function(x){return ce(this,x).h},i.and=function(x){for(var S=Math.max(this.g.length,x.g.length),C=[],k=0;k<S;k++)C[k]=this.i(k)&x.i(k);return new h(C,this.h&x.h)},i.or=function(x){for(var S=Math.max(this.g.length,x.g.length),C=[],k=0;k<S;k++)C[k]=this.i(k)|x.i(k);return new h(C,this.h|x.h)},i.xor=function(x){for(var S=Math.max(this.g.length,x.g.length),C=[],k=0;k<S;k++)C[k]=this.i(k)^x.i(k);return new h(C,this.h^x.h)};function Ce(x){for(var S=x.g.length+1,C=[],k=0;k<S;k++)C[k]=x.i(k)<<1|x.i(k-1)>>>31;return new h(C,x.h)}function Ie(x,S){var C=S>>5;S%=32;for(var k=x.g.length-C,D=[],O=0;O<k;O++)D[O]=0<S?x.i(O+C)>>>S|x.i(O+C+1)<<32-S:x.i(O+C);return new h(D,x.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,Eg=s,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=v,h.fromString=w,Ui=h}).apply(typeof am<"u"?am:typeof self<"u"?self:typeof window<"u"?window:{});var jl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var wg,ta,Tg,Gl,kh,Sg,Ig,Rg;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,f,y){return l==Array.prototype||l==Object.prototype||(l[f]=y.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof jl=="object"&&jl];for(var f=0;f<l.length;++f){var y=l[f];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var s=n(this);function a(l,f){if(f)e:{var y=s;l=l.split(".");for(var E=0;E<l.length-1;E++){var M=l[E];if(!(M in y))break e;y=y[M]}l=l[l.length-1],E=y[l],f=f(E),f!=E&&f!=null&&e(y,l,{configurable:!0,writable:!0,value:f})}}function u(l,f){l instanceof String&&(l+="");var y=0,E=!1,M={next:function(){if(!E&&y<l.length){var j=y++;return{value:f(j,l[j]),done:!1}}return E=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}a("Array.prototype.values",function(l){return l||function(){return u(this,function(f,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},m=this||self;function g(l){var f=typeof l;return f=f!="object"?f:l?Array.isArray(l)?"array":f:"null",f=="array"||f=="object"&&typeof l.length=="number"}function v(l){var f=typeof l;return f=="object"&&l!=null||f=="function"}function w(l,f,y){return l.call.apply(l.bind,arguments)}function A(l,f,y){if(!l)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,E),l.apply(f,M)}}return function(){return l.apply(f,arguments)}}function R(l,f,y){return R=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?w:A,R.apply(null,arguments)}function L(l,f){var y=Array.prototype.slice.call(arguments,1);return function(){var E=y.slice();return E.push.apply(E,arguments),l.apply(this,E)}}function U(l,f){function y(){}y.prototype=f.prototype,l.aa=f.prototype,l.prototype=new y,l.prototype.constructor=l,l.Qb=function(E,M,j){for(var te=Array(arguments.length-2),$e=2;$e<arguments.length;$e++)te[$e-2]=arguments[$e];return f.prototype[M].apply(E,te)}}function $(l){const f=l.length;if(0<f){const y=Array(f);for(let E=0;E<f;E++)y[E]=l[E];return y}return[]}function b(l,f){for(let y=1;y<arguments.length;y++){const E=arguments[y];if(g(E)){const M=l.length||0,j=E.length||0;l.length=M+j;for(let te=0;te<j;te++)l[M+te]=E[te]}else l.push(E)}}class Q{constructor(f,y){this.i=f,this.j=y,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function K(l){return/^[\s\xa0]*$/.test(l)}function re(){var l=m.navigator;return l&&(l=l.userAgent)?l:""}function ce(l){return ce[" "](l),l}ce[" "]=function(){};var Ce=re().indexOf("Gecko")!=-1&&!(re().toLowerCase().indexOf("webkit")!=-1&&re().indexOf("Edge")==-1)&&!(re().indexOf("Trident")!=-1||re().indexOf("MSIE")!=-1)&&re().indexOf("Edge")==-1;function Ie(l,f,y){for(const E in l)f.call(y,l[E],E,l)}function x(l,f){for(const y in l)f.call(void 0,l[y],y,l)}function S(l){const f={};for(const y in l)f[y]=l[y];return f}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(l,f){let y,E;for(let M=1;M<arguments.length;M++){E=arguments[M];for(y in E)l[y]=E[y];for(let j=0;j<C.length;j++)y=C[j],Object.prototype.hasOwnProperty.call(E,y)&&(l[y]=E[y])}}function D(l){var f=1;l=l.split(":");const y=[];for(;0<f&&l.length;)y.push(l.shift()),f--;return l.length&&y.push(l.join(":")),y}function O(l){m.setTimeout(()=>{throw l},0)}function T(){var l=de;let f=null;return l.g&&(f=l.g,l.g=l.g.next,l.g||(l.h=null),f.next=null),f}class ve{constructor(){this.h=this.g=null}add(f,y){const E=_e.get();E.set(f,y),this.h?this.h.next=E:this.g=E,this.h=E}}var _e=new Q(()=>new je,l=>l.reset());class je{constructor(){this.next=this.g=this.h=null}set(f,y){this.h=f,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let pe,ee=!1,de=new ve,ne=()=>{const l=m.Promise.resolve(void 0);pe=()=>{l.then(N)}};var N=()=>{for(var l;l=T();){try{l.h.call(l.g)}catch(y){O(y)}var f=_e;f.j(l),100>f.h&&(f.h++,l.next=f.g,f.g=l)}ee=!1};function H(){this.s=this.s,this.C=this.C}H.prototype.s=!1,H.prototype.ma=function(){this.s||(this.s=!0,this.N())},H.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function fe(l,f){this.type=l,this.g=this.target=f,this.defaultPrevented=!1}fe.prototype.h=function(){this.defaultPrevented=!0};var Re=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var l=!1,f=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const y=()=>{};m.addEventListener("test",y,f),m.removeEventListener("test",y,f)}catch{}return l}();function Ae(l,f){if(fe.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var y=this.type=l.type,E=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=f,f=l.relatedTarget){if(Ce){e:{try{ce(f.nodeName);var M=!0;break e}catch{}M=!1}M||(f=null)}}else y=="mouseover"?f=l.fromElement:y=="mouseout"&&(f=l.toElement);this.relatedTarget=f,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:De[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Ae.aa.h.call(this)}}U(Ae,fe);var De={2:"touch",3:"pen",4:"mouse"};Ae.prototype.h=function(){Ae.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var ze="closure_listenable_"+(1e6*Math.random()|0),be=0;function He(l,f,y,E,M){this.listener=l,this.proxy=null,this.src=f,this.type=y,this.capture=!!E,this.ha=M,this.key=++be,this.da=this.fa=!1}function vt(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Yn(l){this.src=l,this.g={},this.h=0}Yn.prototype.add=function(l,f,y,E,M){var j=l.toString();l=this.g[j],l||(l=this.g[j]=[],this.h++);var te=Tr(l,f,E,M);return-1<te?(f=l[te],y||(f.fa=!1)):(f=new He(f,this.src,j,!!E,M),f.fa=y,l.push(f)),f};function $i(l,f){var y=f.type;if(y in l.g){var E=l.g[y],M=Array.prototype.indexOf.call(E,f,void 0),j;(j=0<=M)&&Array.prototype.splice.call(E,M,1),j&&(vt(f),l.g[y].length==0&&(delete l.g[y],l.h--))}}function Tr(l,f,y,E){for(var M=0;M<l.length;++M){var j=l[M];if(!j.da&&j.listener==f&&j.capture==!!y&&j.ha==E)return M}return-1}var ai="closure_lm_"+(1e6*Math.random()|0),qi={};function no(l,f,y,E,M){if(Array.isArray(f)){for(var j=0;j<f.length;j++)no(l,f[j],y,E,M);return null}return y=so(y),l&&l[ze]?l.K(f,y,v(E)?!!E.capture:!!E,M):ro(l,f,y,!1,E,M)}function ro(l,f,y,E,M,j){if(!f)throw Error("Invalid event type");var te=v(M)?!!M.capture:!!M,$e=Wi(l);if($e||(l[ai]=$e=new Yn(l)),y=$e.add(f,y,E,te,j),y.proxy)return y;if(E=Ra(),y.proxy=E,E.src=l,E.listener=y,l.addEventListener)Re||(M=te),M===void 0&&(M=!1),l.addEventListener(f.toString(),E,M);else if(l.attachEvent)l.attachEvent(Zn(f.toString()),E);else if(l.addListener&&l.removeListener)l.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return y}function Ra(){function l(y){return f.call(l.src,l.listener,y)}const f=io;return l}function Hi(l,f,y,E,M){if(Array.isArray(f))for(var j=0;j<f.length;j++)Hi(l,f[j],y,E,M);else E=v(E)?!!E.capture:!!E,y=so(y),l&&l[ze]?(l=l.i,f=String(f).toString(),f in l.g&&(j=l.g[f],y=Tr(j,y,E,M),-1<y&&(vt(j[y]),Array.prototype.splice.call(j,y,1),j.length==0&&(delete l.g[f],l.h--)))):l&&(l=Wi(l))&&(f=l.g[f.toString()],l=-1,f&&(l=Tr(f,y,E,M)),(y=-1<l?f[l]:null)&&Jn(y))}function Jn(l){if(typeof l!="number"&&l&&!l.da){var f=l.src;if(f&&f[ze])$i(f.i,l);else{var y=l.type,E=l.proxy;f.removeEventListener?f.removeEventListener(y,E,l.capture):f.detachEvent?f.detachEvent(Zn(y),E):f.addListener&&f.removeListener&&f.removeListener(E),(y=Wi(f))?($i(y,l),y.h==0&&(y.src=null,f[ai]=null)):vt(l)}}}function Zn(l){return l in qi?qi[l]:qi[l]="on"+l}function io(l,f){if(l.da)l=!0;else{f=new Ae(f,this);var y=l.listener,E=l.ha||l.src;l.fa&&Jn(l),l=y.call(E,f)}return l}function Wi(l){return l=l[ai],l instanceof Yn?l:null}var Qi="__closure_events_fn_"+(1e9*Math.random()>>>0);function so(l){return typeof l=="function"?l:(l[Qi]||(l[Qi]=function(f){return l.handleEvent(f)}),l[Qi])}function ct(){H.call(this),this.i=new Yn(this),this.M=this,this.F=null}U(ct,H),ct.prototype[ze]=!0,ct.prototype.removeEventListener=function(l,f,y,E){Hi(this,l,f,y,E)};function ht(l,f){var y,E=l.F;if(E)for(y=[];E;E=E.F)y.push(E);if(l=l.M,E=f.type||f,typeof f=="string")f=new fe(f,l);else if(f instanceof fe)f.target=f.target||l;else{var M=f;f=new fe(E,l),k(f,M)}if(M=!0,y)for(var j=y.length-1;0<=j;j--){var te=f.g=y[j];M=er(te,E,!0,f)&&M}if(te=f.g=l,M=er(te,E,!0,f)&&M,M=er(te,E,!1,f)&&M,y)for(j=0;j<y.length;j++)te=f.g=y[j],M=er(te,E,!1,f)&&M}ct.prototype.N=function(){if(ct.aa.N.call(this),this.i){var l=this.i,f;for(f in l.g){for(var y=l.g[f],E=0;E<y.length;E++)vt(y[E]);delete l.g[f],l.h--}}this.F=null},ct.prototype.K=function(l,f,y,E){return this.i.add(String(l),f,!1,y,E)},ct.prototype.L=function(l,f,y,E){return this.i.add(String(l),f,!0,y,E)};function er(l,f,y,E){if(f=l.i.g[String(f)],!f)return!0;f=f.concat();for(var M=!0,j=0;j<f.length;++j){var te=f[j];if(te&&!te.da&&te.capture==y){var $e=te.listener,dt=te.ha||te.src;te.fa&&$i(l.i,te),M=$e.call(dt,E)!==!1&&M}}return M&&!E.defaultPrevented}function oo(l,f,y){if(typeof l=="function")y&&(l=R(l,y));else if(l&&typeof l.handleEvent=="function")l=R(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:m.setTimeout(l,f||0)}function Sr(l){l.g=oo(()=>{l.g=null,l.i&&(l.i=!1,Sr(l))},l.l);const f=l.h;l.h=null,l.m.apply(null,f)}class li extends H{constructor(f,y){super(),this.m=f,this.l=y,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Sr(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ui(l){H.call(this),this.h=l,this.g={}}U(ui,H);var ao=[];function lo(l){Ie(l.g,function(f,y){this.g.hasOwnProperty(y)&&Jn(f)},l),l.g={}}ui.prototype.N=function(){ui.aa.N.call(this),lo(this)},ui.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var uo=m.JSON.stringify,co=m.JSON.parse,ho=class{stringify(l){return m.JSON.stringify(l,void 0)}parse(l){return m.JSON.parse(l,void 0)}};function ci(){}ci.prototype.h=null;function Ki(l){return l.h||(l.h=l.i())}function Gi(){}var ln={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ln(){fe.call(this,"d")}U(Ln,fe);function Xi(){fe.call(this,"c")}U(Xi,fe);var On={},fo=null;function hi(){return fo=fo||new ct}On.La="serverreachability";function po(l){fe.call(this,On.La,l)}U(po,fe);function tr(l){const f=hi();ht(f,new po(f))}On.STAT_EVENT="statevent";function mo(l,f){fe.call(this,On.STAT_EVENT,l),this.stat=f}U(mo,fe);function it(l){const f=hi();ht(f,new mo(f,l))}On.Ma="timingevent";function Yi(l,f){fe.call(this,On.Ma,l),this.size=f}U(Yi,fe);function vn(l,f){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){l()},f)}function di(){this.g=!0}di.prototype.xa=function(){this.g=!1};function fi(l,f,y,E,M,j){l.info(function(){if(l.g)if(j)for(var te="",$e=j.split("&"),dt=0;dt<$e.length;dt++){var Ne=$e[dt].split("=");if(1<Ne.length){var _t=Ne[0];Ne=Ne[1];var at=_t.split("_");te=2<=at.length&&at[1]=="type"?te+(_t+"="+Ne+"&"):te+(_t+"=redacted&")}}else te=null;else te=j;return"XMLHTTP REQ ("+E+") [attempt "+M+"]: "+f+`
`+y+`
`+te})}function Ji(l,f,y,E,M,j,te){l.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+M+"]: "+f+`
`+y+`
`+j+" "+te})}function _n(l,f,y,E){l.info(function(){return"XMLHTTP TEXT ("+f+"): "+Lu(l,y)+(E?" "+E:"")})}function go(l,f){l.info(function(){return"TIMEOUT: "+f})}di.prototype.info=function(){};function Lu(l,f){if(!l.g)return f;if(!f)return null;try{var y=JSON.parse(f);if(y){for(l=0;l<y.length;l++)if(Array.isArray(y[l])){var E=y[l];if(!(2>E.length)){var M=E[1];if(Array.isArray(M)&&!(1>M.length)){var j=M[0];if(j!="noop"&&j!="stop"&&j!="close")for(var te=1;te<M.length;te++)M[te]=""}}}}return uo(y)}catch{return f}}var Zi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ca={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},En;function pi(){}U(pi,ci),pi.prototype.g=function(){return new XMLHttpRequest},pi.prototype.i=function(){return{}},En=new pi;function wn(l,f,y,E){this.j=l,this.i=f,this.l=y,this.R=E||1,this.U=new ui(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Aa}function Aa(){this.i=null,this.g="",this.h=!1}var yo={},es={};function ts(l,f,y){l.L=1,l.v=Pr(Zt(f)),l.m=y,l.P=!0,vo(l,null)}function vo(l,f){l.F=Date.now(),We(l),l.A=Zt(l.v);var y=l.A,E=l.R;Array.isArray(E)||(E=[String(E)]),xr(y.i,"t",E),l.C=0,y=l.j.J,l.h=new Aa,l.g=Ha(l.j,y?f:null,!l.m),0<l.O&&(l.M=new li(R(l.Y,l,l.g),l.O)),f=l.U,y=l.g,E=l.ca;var M="readystatechange";Array.isArray(M)||(M&&(ao[0]=M.toString()),M=ao);for(var j=0;j<M.length;j++){var te=no(y,M[j],E||f.handleEvent,!1,f.h||f);if(!te)break;f.g[te.key]=te}f=l.H?S(l.H):{},l.m?(l.u||(l.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,f)):(l.u="GET",l.g.ea(l.A,l.u,null,f)),tr(),fi(l.i,l.u,l.A,l.l,l.R,l.m)}wn.prototype.ca=function(l){l=l.target;const f=this.M;f&&$t(l)==3?f.j():this.Y(l)},wn.prototype.Y=function(l){try{if(l==this.g)e:{const at=$t(this.g);var f=this.g.Ba();const hn=this.g.Z();if(!(3>at)&&(at!=3||this.g&&(this.h.h||this.g.oa()||Io(this.g)))){this.J||at!=4||f==7||(f==8||0>=hn?tr(3):tr(2)),mi(this);var y=this.g.Z();this.X=y;t:if(Pa(this)){var E=Io(this.g);l="";var M=E.length,j=$t(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){un(this),Ir(this);var te="";break t}this.h.i=new m.TextDecoder}for(f=0;f<M;f++)this.h.h=!0,l+=this.h.i.decode(E[f],{stream:!(j&&f==M-1)});E.length=0,this.h.g+=l,this.C=0,te=this.h.g}else te=this.g.oa();if(this.o=y==200,Ji(this.i,this.u,this.A,this.l,this.R,at,y),this.o){if(this.T&&!this.K){t:{if(this.g){var $e,dt=this.g;if(($e=dt.g?dt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!K($e)){var Ne=$e;break t}}Ne=null}if(y=Ne)_n(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,_o(this,y);else{this.o=!1,this.s=3,it(12),un(this),Ir(this);break e}}if(this.P){y=!0;let tn;for(;!this.J&&this.C<te.length;)if(tn=Ou(this,te),tn==es){at==4&&(this.s=4,it(14),y=!1),_n(this.i,this.l,null,"[Incomplete Response]");break}else if(tn==yo){this.s=4,it(15),_n(this.i,this.l,te,"[Invalid Chunk]"),y=!1;break}else _n(this.i,this.l,tn,null),_o(this,tn);if(Pa(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),at!=4||te.length!=0||this.h.h||(this.s=1,it(16),y=!1),this.o=this.o&&y,!y)_n(this.i,this.l,te,"[Invalid Chunked Response]"),un(this),Ir(this);else if(0<te.length&&!this.W){this.W=!0;var _t=this.j;_t.g==this&&_t.ba&&!_t.M&&(_t.j.info("Great, no buffering proxy detected. Bytes received: "+te.length),Co(_t),_t.M=!0,it(11))}}else _n(this.i,this.l,te,null),_o(this,te);at==4&&un(this),this.o&&!this.J&&(at==4?ds(this.j,this):(this.o=!1,We(this)))}else as(this.g),y==400&&0<te.indexOf("Unknown SID")?(this.s=3,it(12)):(this.s=0,it(13)),un(this),Ir(this)}}}catch{}finally{}};function Pa(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function Ou(l,f){var y=l.C,E=f.indexOf(`
`,y);return E==-1?es:(y=Number(f.substring(y,E)),isNaN(y)?yo:(E+=1,E+y>f.length?es:(f=f.slice(E,E+y),l.C=E+y,f)))}wn.prototype.cancel=function(){this.J=!0,un(this)};function We(l){l.S=Date.now()+l.I,ka(l,l.I)}function ka(l,f){if(l.B!=null)throw Error("WatchDog timer not null");l.B=vn(R(l.ba,l),f)}function mi(l){l.B&&(m.clearTimeout(l.B),l.B=null)}wn.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(go(this.i,this.A),this.L!=2&&(tr(),it(17)),un(this),this.s=2,Ir(this)):ka(this,this.S-l)};function Ir(l){l.j.G==0||l.J||ds(l.j,l)}function un(l){mi(l);var f=l.M;f&&typeof f.ma=="function"&&f.ma(),l.M=null,lo(l.U),l.g&&(f=l.g,l.g=null,f.abort(),f.ma())}function _o(l,f){try{var y=l.j;if(y.G!=0&&(y.g==l||Ut(y.h,l))){if(!l.K&&Ut(y.h,l)&&y.G==3){try{var E=y.Da.g.parse(f)}catch{E=null}if(Array.isArray(E)&&E.length==3){var M=E;if(M[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<l.F)hs(y),Cn(y);else break e;cs(y),it(18)}}else y.za=M[1],0<y.za-y.T&&37500>M[2]&&y.F&&y.v==0&&!y.C&&(y.C=vn(R(y.Za,y),6e3));if(1>=Va(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else or(y,11)}else if((l.K||y.g==l)&&hs(y),!K(f))for(M=y.Da.g.parse(f),f=0;f<M.length;f++){let Ne=M[f];if(y.T=Ne[0],Ne=Ne[1],y.G==2)if(Ne[0]=="c"){y.K=Ne[1],y.ia=Ne[2];const _t=Ne[3];_t!=null&&(y.la=_t,y.j.info("VER="+y.la));const at=Ne[4];at!=null&&(y.Aa=at,y.j.info("SVER="+y.Aa));const hn=Ne[5];hn!=null&&typeof hn=="number"&&0<hn&&(E=1.5*hn,y.L=E,y.j.info("backChannelRequestTimeoutMs_="+E)),E=y;const tn=l.g;if(tn){const Ti=tn.g?tn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ti){var j=E.h;j.g||Ti.indexOf("spdy")==-1&&Ti.indexOf("quic")==-1&&Ti.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(Eo(j,j.h),j.h=null))}if(E.D){const ps=tn.g?tn.g.getResponseHeader("X-HTTP-Session-Id"):null;ps&&(E.ya=ps,qe(E.I,E.D,ps))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-l.F,y.j.info("Handshake RTT: "+y.R+"ms")),E=y;var te=l;if(E.qa=qa(E,E.J?E.ia:null,E.W),te.K){Da(E.h,te);var $e=te,dt=E.L;dt&&($e.I=dt),$e.B&&(mi($e),We($e)),E.g=te}else wi(E);0<y.i.length&&zn(y)}else Ne[0]!="stop"&&Ne[0]!="close"||or(y,7);else y.G==3&&(Ne[0]=="stop"||Ne[0]=="close"?Ne[0]=="stop"?or(y,7):Rt(y):Ne[0]!="noop"&&y.l&&y.l.ta(Ne),y.v=0)}}tr(4)}catch{}}var xa=class{constructor(l,f){this.g=l,this.map=f}};function gi(l){this.l=l||10,m.PerformanceNavigationTiming?(l=m.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Jt(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Va(l){return l.h?1:l.g?l.g.size:0}function Ut(l,f){return l.h?l.h==f:l.g?l.g.has(f):!1}function Eo(l,f){l.g?l.g.add(f):l.h=f}function Da(l,f){l.h&&l.h==f?l.h=null:l.g&&l.g.has(f)&&l.g.delete(f)}gi.prototype.cancel=function(){if(this.i=Na(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Na(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let f=l.i;for(const y of l.g.values())f=f.concat(y.D);return f}return $(l.i)}function ns(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(g(l)){for(var f=[],y=l.length,E=0;E<y;E++)f.push(l[E]);return f}f=[],y=0;for(E in l)f[y++]=l[E];return f}function rs(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(g(l)||typeof l=="string"){var f=[];l=l.length;for(var y=0;y<l;y++)f.push(y);return f}f=[],y=0;for(const E in l)f[y++]=E;return f}}}function Rr(l,f){if(l.forEach&&typeof l.forEach=="function")l.forEach(f,void 0);else if(g(l)||typeof l=="string")Array.prototype.forEach.call(l,f,void 0);else for(var y=rs(l),E=ns(l),M=E.length,j=0;j<M;j++)f.call(void 0,E[j],y&&y[j],l)}var yi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Mu(l,f){if(l){l=l.split("&");for(var y=0;y<l.length;y++){var E=l[y].indexOf("="),M=null;if(0<=E){var j=l[y].substring(0,E);M=l[y].substring(E+1)}else j=l[y];f(j,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function nr(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof nr){this.h=l.h,vi(this,l.j),this.o=l.o,this.g=l.g,Cr(this,l.s),this.l=l.l;var f=l.i,y=new Mn;y.i=f.i,f.g&&(y.g=new Map(f.g),y.h=f.h),Ar(this,y),this.m=l.m}else l&&(f=String(l).match(yi))?(this.h=!1,vi(this,f[1]||"",!0),this.o=xe(f[2]||""),this.g=xe(f[3]||"",!0),Cr(this,f[4]),this.l=xe(f[5]||"",!0),Ar(this,f[6]||"",!0),this.m=xe(f[7]||"")):(this.h=!1,this.i=new Mn(null,this.h))}nr.prototype.toString=function(){var l=[],f=this.j;f&&l.push(kr(f,is,!0),":");var y=this.g;return(y||f=="file")&&(l.push("//"),(f=this.o)&&l.push(kr(f,is,!0),"@"),l.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&l.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&l.push("/"),l.push(kr(y,y.charAt(0)=="/"?Ma:Oa,!0))),(y=this.i.toString())&&l.push("?",y),(y=this.m)&&l.push("#",kr(y,wo)),l.join("")};function Zt(l){return new nr(l)}function vi(l,f,y){l.j=y?xe(f,!0):f,l.j&&(l.j=l.j.replace(/:$/,""))}function Cr(l,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);l.s=f}else l.s=null}function Ar(l,f,y){f instanceof Mn?(l.i=f,Fn(l.i,l.h)):(y||(f=kr(f,Fa)),l.i=new Mn(f,l.h))}function qe(l,f,y){l.i.set(f,y)}function Pr(l){return qe(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function xe(l,f){return l?f?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function kr(l,f,y){return typeof l=="string"?(l=encodeURI(l).replace(f,La),y&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function La(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var is=/[#\/\?@]/g,Oa=/[#\?:]/g,Ma=/[#\?]/g,Fa=/[#\?@]/g,wo=/#/g;function Mn(l,f){this.h=this.g=null,this.i=l||null,this.j=!!f}function It(l){l.g||(l.g=new Map,l.h=0,l.i&&Mu(l.i,function(f,y){l.add(decodeURIComponent(f.replace(/\+/g," ")),y)}))}i=Mn.prototype,i.add=function(l,f){It(this),this.i=null,l=cn(this,l);var y=this.g.get(l);return y||this.g.set(l,y=[]),y.push(f),this.h+=1,this};function Tn(l,f){It(l),f=cn(l,f),l.g.has(f)&&(l.i=null,l.h-=l.g.get(f).length,l.g.delete(f))}function Sn(l,f){return It(l),f=cn(l,f),l.g.has(f)}i.forEach=function(l,f){It(this),this.g.forEach(function(y,E){y.forEach(function(M){l.call(f,M,E,this)},this)},this)},i.na=function(){It(this);const l=Array.from(this.g.values()),f=Array.from(this.g.keys()),y=[];for(let E=0;E<f.length;E++){const M=l[E];for(let j=0;j<M.length;j++)y.push(f[E])}return y},i.V=function(l){It(this);let f=[];if(typeof l=="string")Sn(this,l)&&(f=f.concat(this.g.get(cn(this,l))));else{l=Array.from(this.g.values());for(let y=0;y<l.length;y++)f=f.concat(l[y])}return f},i.set=function(l,f){return It(this),this.i=null,l=cn(this,l),Sn(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[f]),this.h+=1,this},i.get=function(l,f){return l?(l=this.V(l),0<l.length?String(l[0]):f):f};function xr(l,f,y){Tn(l,f),0<y.length&&(l.i=null,l.g.set(cn(l,f),$(y)),l.h+=y.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],f=Array.from(this.g.keys());for(var y=0;y<f.length;y++){var E=f[y];const j=encodeURIComponent(String(E)),te=this.V(E);for(E=0;E<te.length;E++){var M=j;te[E]!==""&&(M+="="+encodeURIComponent(String(te[E]))),l.push(M)}}return this.i=l.join("&")};function cn(l,f){return f=String(f),l.j&&(f=f.toLowerCase()),f}function Fn(l,f){f&&!l.j&&(It(l),l.i=null,l.g.forEach(function(y,E){var M=E.toLowerCase();E!=M&&(Tn(this,E),xr(this,M,y))},l)),l.j=f}function Fu(l,f){const y=new di;if(m.Image){const E=new Image;E.onload=L(jt,y,"TestLoadImage: loaded",!0,f,E),E.onerror=L(jt,y,"TestLoadImage: error",!1,f,E),E.onabort=L(jt,y,"TestLoadImage: abort",!1,f,E),E.ontimeout=L(jt,y,"TestLoadImage: timeout",!1,f,E),m.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=l}else f(!1)}function Ua(l,f){const y=new di,E=new AbortController,M=setTimeout(()=>{E.abort(),jt(y,"TestPingServer: timeout",!1,f)},1e4);fetch(l,{signal:E.signal}).then(j=>{clearTimeout(M),j.ok?jt(y,"TestPingServer: ok",!0,f):jt(y,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(M),jt(y,"TestPingServer: error",!1,f)})}function jt(l,f,y,E,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),E(y)}catch{}}function Uu(){this.g=new ho}function za(l,f,y){const E=y||"";try{Rr(l,function(M,j){let te=M;v(M)&&(te=uo(M)),f.push(E+j+"="+encodeURIComponent(te))})}catch(M){throw f.push(E+"type="+encodeURIComponent("_badmap")),M}}function rr(l){this.l=l.Ub||null,this.j=l.eb||!1}U(rr,ci),rr.prototype.g=function(){return new _i(this.l,this.j)},rr.prototype.i=function(l){return function(){return l}}({});function _i(l,f){ct.call(this),this.D=l,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}U(_i,ct),i=_i.prototype,i.open=function(l,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=f,this.readyState=1,Rn(this)},i.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(f.body=l),(this.D||m).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,In(this)),this.readyState=0},i.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Rn(this)),this.g&&(this.readyState=3,Rn(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ba(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function ba(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}i.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var f=l.value?l.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!l.done}))&&(this.response=this.responseText+=f)}l.done?In(this):Rn(this),this.readyState==3&&ba(this)}},i.Ra=function(l){this.g&&(this.response=this.responseText=l,In(this))},i.Qa=function(l){this.g&&(this.response=l,In(this))},i.ga=function(){this.g&&In(this)};function In(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Rn(l)}i.setRequestHeader=function(l,f){this.u.append(l,f)},i.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],f=this.h.entries();for(var y=f.next();!y.done;)y=y.value,l.push(y[0]+": "+y[1]),y=f.next();return l.join(`\r
`)};function Rn(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(_i.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function ir(l){let f="";return Ie(l,function(y,E){f+=E,f+=":",f+=y,f+=`\r
`}),f}function Vr(l,f,y){e:{for(E in y){var E=!1;break e}E=!0}E||(y=ir(y),typeof l=="string"?y!=null&&encodeURIComponent(String(y)):qe(l,f,y))}function Xe(l){ct.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}U(Xe,ct);var zu=/^https?$/i,To=["POST","PUT"];i=Xe.prototype,i.Ha=function(l){this.J=l},i.ea=function(l,f,y,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);f=f?f.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():En.g(),this.v=this.o?Ki(this.o):Ki(En),this.g.onreadystatechange=R(this.Ea,this);try{this.B=!0,this.g.open(f,String(l),!0),this.B=!1}catch(j){Ei(this,j);return}if(l=y||"",y=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var M in E)y.set(M,E[M]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const j of E.keys())y.set(j,E.get(j));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(y.keys()).find(j=>j.toLowerCase()=="content-type"),M=m.FormData&&l instanceof m.FormData,!(0<=Array.prototype.indexOf.call(To,f,void 0))||E||M||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,te]of y)this.g.setRequestHeader(j,te);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{os(this),this.u=!0,this.g.send(l),this.u=!1}catch(j){Ei(this,j)}};function Ei(l,f){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=f,l.m=5,ss(l),en(l)}function ss(l){l.A||(l.A=!0,ht(l,"complete"),ht(l,"error"))}i.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,ht(this,"complete"),ht(this,"abort"),en(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),en(this,!0)),Xe.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?So(this):this.bb())},i.bb=function(){So(this)};function So(l){if(l.h&&typeof h<"u"&&(!l.v[1]||$t(l)!=4||l.Z()!=2)){if(l.u&&$t(l)==4)oo(l.Ea,0,l);else if(ht(l,"readystatechange"),$t(l)==4){l.h=!1;try{const te=l.Z();e:switch(te){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var y;if(!(y=f)){var E;if(E=te===0){var M=String(l.D).match(yi)[1]||null;!M&&m.self&&m.self.location&&(M=m.self.location.protocol.slice(0,-1)),E=!zu.test(M?M.toLowerCase():"")}y=E}if(y)ht(l,"complete"),ht(l,"success");else{l.m=6;try{var j=2<$t(l)?l.g.statusText:""}catch{j=""}l.l=j+" ["+l.Z()+"]",ss(l)}}finally{en(l)}}}}function en(l,f){if(l.g){os(l);const y=l.g,E=l.v[0]?()=>{}:null;l.g=null,l.v=null,f||ht(l,"ready");try{y.onreadystatechange=E}catch{}}}function os(l){l.I&&(m.clearTimeout(l.I),l.I=null)}i.isActive=function(){return!!this.g};function $t(l){return l.g?l.g.readyState:0}i.Z=function(){try{return 2<$t(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(l){if(this.g){var f=this.g.responseText;return l&&f.indexOf(l)==0&&(f=f.substring(l.length)),co(f)}};function Io(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function as(l){const f={};l=(l.g&&2<=$t(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<l.length;E++){if(K(l[E]))continue;var y=D(l[E]);const M=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const j=f[M]||[];f[M]=j,j.push(y)}x(f,function(E){return E.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Un(l,f,y){return y&&y.internalChannelParams&&y.internalChannelParams[l]||f}function Ro(l){this.Aa=0,this.i=[],this.j=new di,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Un("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Un("baseRetryDelayMs",5e3,l),this.cb=Un("retryDelaySeedMs",1e4,l),this.Wa=Un("forwardChannelMaxRetries",2,l),this.wa=Un("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new gi(l&&l.concurrentRequestLimit),this.Da=new Uu,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=Ro.prototype,i.la=8,i.G=1,i.connect=function(l,f,y,E){it(0),this.W=l,this.H=f||{},y&&E!==void 0&&(this.H.OSID=y,this.H.OAID=E),this.F=this.X,this.I=qa(this,null,this.W),zn(this)};function Rt(l){if(ls(l),l.G==3){var f=l.U++,y=Zt(l.I);if(qe(y,"SID",l.K),qe(y,"RID",f),qe(y,"TYPE","terminate"),sr(l,y),f=new wn(l,l.j,f),f.L=2,f.v=Pr(Zt(y)),y=!1,m.navigator&&m.navigator.sendBeacon)try{y=m.navigator.sendBeacon(f.v.toString(),"")}catch{}!y&&m.Image&&(new Image().src=f.v,y=!0),y||(f.g=Ha(f.j,null),f.g.ea(f.v)),f.F=Date.now(),We(f)}$a(l)}function Cn(l){l.g&&(Co(l),l.g.cancel(),l.g=null)}function ls(l){Cn(l),l.u&&(m.clearTimeout(l.u),l.u=null),hs(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&m.clearTimeout(l.s),l.s=null)}function zn(l){if(!Jt(l.h)&&!l.s){l.s=!0;var f=l.Ga;pe||ne(),ee||(pe(),ee=!0),de.add(f,l),l.B=0}}function bu(l,f){return Va(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=f.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=vn(R(l.Ga,l,f),ja(l,l.B)),l.B++,!0)}i.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const M=new wn(this,this.j,l);let j=this.o;if(this.S&&(j?(j=S(j),k(j,this.S)):j=this.S),this.m!==null||this.O||(M.H=j,j=null),this.P)e:{for(var f=0,y=0;y<this.i.length;y++){t:{var E=this.i[y];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(f+=E,4096<f){f=y;break e}if(f===4096||y===this.i.length-1){f=y+1;break e}}f=1e3}else f=1e3;f=Dr(this,M,f),y=Zt(this.I),qe(y,"RID",l),qe(y,"CVER",22),this.D&&qe(y,"X-HTTP-Session-Id",this.D),sr(this,y),j&&(this.O?f="headers="+encodeURIComponent(String(ir(j)))+"&"+f:this.m&&Vr(y,this.m,j)),Eo(this.h,M),this.Ua&&qe(y,"TYPE","init"),this.P?(qe(y,"$req",f),qe(y,"SID","null"),M.T=!0,ts(M,y,null)):ts(M,y,f),this.G=2}}else this.G==3&&(l?us(this,l):this.i.length==0||Jt(this.h)||us(this))};function us(l,f){var y;f?y=f.l:y=l.U++;const E=Zt(l.I);qe(E,"SID",l.K),qe(E,"RID",y),qe(E,"AID",l.T),sr(l,E),l.m&&l.o&&Vr(E,l.m,l.o),y=new wn(l,l.j,y,l.B+1),l.m===null&&(y.H=l.o),f&&(l.i=f.D.concat(l.i)),f=Dr(l,y,1e3),y.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Eo(l.h,y),ts(y,E,f)}function sr(l,f){l.H&&Ie(l.H,function(y,E){qe(f,E,y)}),l.l&&Rr({},function(y,E){qe(f,E,y)})}function Dr(l,f,y){y=Math.min(l.i.length,y);var E=l.l?R(l.l.Na,l.l,l):null;e:{var M=l.i;let j=-1;for(;;){const te=["count="+y];j==-1?0<y?(j=M[0].g,te.push("ofs="+j)):j=0:te.push("ofs="+j);let $e=!0;for(let dt=0;dt<y;dt++){let Ne=M[dt].g;const _t=M[dt].map;if(Ne-=j,0>Ne)j=Math.max(0,M[dt].g-100),$e=!1;else try{za(_t,te,"req"+Ne+"_")}catch{E&&E(_t)}}if($e){E=te.join("&");break e}}}return l=l.i.splice(0,y),f.D=l,E}function wi(l){if(!l.g&&!l.u){l.Y=1;var f=l.Fa;pe||ne(),ee||(pe(),ee=!0),de.add(f,l),l.v=0}}function cs(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=vn(R(l.Fa,l),ja(l,l.v)),l.v++,!0)}i.Fa=function(){if(this.u=null,Ba(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=vn(R(this.ab,this),l)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,it(10),Cn(this),Ba(this))};function Co(l){l.A!=null&&(m.clearTimeout(l.A),l.A=null)}function Ba(l){l.g=new wn(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var f=Zt(l.qa);qe(f,"RID","rpc"),qe(f,"SID",l.K),qe(f,"AID",l.T),qe(f,"CI",l.F?"0":"1"),!l.F&&l.ja&&qe(f,"TO",l.ja),qe(f,"TYPE","xmlhttp"),sr(l,f),l.m&&l.o&&Vr(f,l.m,l.o),l.L&&(l.g.I=l.L);var y=l.g;l=l.ia,y.L=1,y.v=Pr(Zt(f)),y.m=null,y.P=!0,vo(y,l)}i.Za=function(){this.C!=null&&(this.C=null,Cn(this),cs(this),it(19))};function hs(l){l.C!=null&&(m.clearTimeout(l.C),l.C=null)}function ds(l,f){var y=null;if(l.g==f){hs(l),Co(l),l.g=null;var E=2}else if(Ut(l.h,f))y=f.D,Da(l.h,f),E=1;else return;if(l.G!=0){if(f.o)if(E==1){y=f.m?f.m.length:0,f=Date.now()-f.F;var M=l.B;E=hi(),ht(E,new Yi(E,y)),zn(l)}else wi(l);else if(M=f.s,M==3||M==0&&0<f.X||!(E==1&&bu(l,f)||E==2&&cs(l)))switch(y&&0<y.length&&(f=l.h,f.i=f.i.concat(y)),M){case 1:or(l,5);break;case 4:or(l,10);break;case 3:or(l,6);break;default:or(l,2)}}}function ja(l,f){let y=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(y*=2),y*f}function or(l,f){if(l.j.info("Error code "+f),f==2){var y=R(l.fb,l),E=l.Xa;const M=!E;E=new nr(E||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||vi(E,"https"),Pr(E),M?Fu(E.toString(),y):Ua(E.toString(),y)}else it(2);l.G=0,l.l&&l.l.sa(f),$a(l),ls(l)}i.fb=function(l){l?(this.j.info("Successfully pinged google.com"),it(2)):(this.j.info("Failed to ping google.com"),it(1))};function $a(l){if(l.G=0,l.ka=[],l.l){const f=Na(l.h);(f.length!=0||l.i.length!=0)&&(b(l.ka,f),b(l.ka,l.i),l.h.i.length=0,$(l.i),l.i.length=0),l.l.ra()}}function qa(l,f,y){var E=y instanceof nr?Zt(y):new nr(y);if(E.g!="")f&&(E.g=f+"."+E.g),Cr(E,E.s);else{var M=m.location;E=M.protocol,f=f?f+"."+M.hostname:M.hostname,M=+M.port;var j=new nr(null);E&&vi(j,E),f&&(j.g=f),M&&Cr(j,M),y&&(j.l=y),E=j}return y=l.D,f=l.ya,y&&f&&qe(E,y,f),qe(E,"VER",l.la),sr(l,E),E}function Ha(l,f,y){if(f&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=l.Ca&&!l.pa?new Xe(new rr({eb:y})):new Xe(l.pa),f.Ha(l.J),f}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ao(){}i=Ao.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function fs(){}fs.prototype.g=function(l,f){return new zt(l,f)};function zt(l,f){ct.call(this),this.g=new Ro(f),this.l=l,this.h=f&&f.messageUrlParams||null,l=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(l?l["X-WebChannel-Content-Type"]=f.messageContentType:l={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(l?l["X-WebChannel-Client-Profile"]=f.va:l={"X-WebChannel-Client-Profile":f.va}),this.g.S=l,(l=f&&f.Sb)&&!K(l)&&(this.g.m=l),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!K(f)&&(this.g.D=f,l=this.h,l!==null&&f in l&&(l=this.h,f in l&&delete l[f])),this.j=new bn(this)}U(zt,ct),zt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},zt.prototype.close=function(){Rt(this.g)},zt.prototype.o=function(l){var f=this.g;if(typeof l=="string"){var y={};y.__data__=l,l=y}else this.u&&(y={},y.__data__=uo(l),l=y);f.i.push(new xa(f.Ya++,l)),f.G==3&&zn(f)},zt.prototype.N=function(){this.g.l=null,delete this.j,Rt(this.g),delete this.g,zt.aa.N.call(this)};function Wa(l){Ln.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var f=l.__sm__;if(f){e:{for(const y in f){l=y;break e}l=void 0}(this.i=l)&&(l=this.i,f=f!==null&&l in f?f[l]:void 0),this.data=f}else this.data=l}U(Wa,Ln);function Qa(){Xi.call(this),this.status=1}U(Qa,Xi);function bn(l){this.g=l}U(bn,Ao),bn.prototype.ua=function(){ht(this.g,"a")},bn.prototype.ta=function(l){ht(this.g,new Wa(l))},bn.prototype.sa=function(l){ht(this.g,new Qa)},bn.prototype.ra=function(){ht(this.g,"b")},fs.prototype.createWebChannel=fs.prototype.g,zt.prototype.send=zt.prototype.o,zt.prototype.open=zt.prototype.m,zt.prototype.close=zt.prototype.close,Rg=function(){return new fs},Ig=function(){return hi()},Sg=On,kh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Zi.NO_ERROR=0,Zi.TIMEOUT=8,Zi.HTTP_ERROR=6,Gl=Zi,Ca.COMPLETE="complete",Tg=Ca,Gi.EventType=ln,ln.OPEN="a",ln.CLOSE="b",ln.ERROR="c",ln.MESSAGE="d",ct.prototype.listen=ct.prototype.K,ta=Gi,Xe.prototype.listenOnce=Xe.prototype.L,Xe.prototype.getLastError=Xe.prototype.Ka,Xe.prototype.getLastErrorCode=Xe.prototype.Ba,Xe.prototype.getStatus=Xe.prototype.Z,Xe.prototype.getResponseJson=Xe.prototype.Oa,Xe.prototype.getResponseText=Xe.prototype.oa,Xe.prototype.send=Xe.prototype.ea,Xe.prototype.setWithCredentials=Xe.prototype.Ha,wg=Xe}).apply(typeof jl<"u"?jl:typeof self<"u"?self:typeof window<"u"?window:{});const lm="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Mt.UNAUTHENTICATED=new Mt(null),Mt.GOOGLE_CREDENTIALS=new Mt("google-credentials-uid"),Mt.FIRST_PARTY=new Mt("first-party-uid"),Mt.MOCK_USER=new Mt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ys="11.0.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zi=new pg("@firebase/firestore");function Os(){return zi.logLevel}function se(i,...e){if(zi.logLevel<=Oe.DEBUG){const n=e.map(Jh);zi.debug(`Firestore (${Ys}): ${i}`,...n)}}function vr(i,...e){if(zi.logLevel<=Oe.ERROR){const n=e.map(Jh);zi.error(`Firestore (${Ys}): ${i}`,...n)}}function Bs(i,...e){if(zi.logLevel<=Oe.WARN){const n=e.map(Jh);zi.warn(`Firestore (${Ys}): ${i}`,...n)}}function Jh(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function we(i="Unexpected state"){const e=`FIRESTORE (${Ys}) INTERNAL ASSERTION FAILED: `+i;throw vr(e),new Error(e)}function Be(i,e){i||we()}function Se(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends Xs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class tw{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Mt.UNAUTHENTICATED))}shutdown(){}}class nw{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class rw{constructor(e){this.t=e,this.currentUser=Mt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Be(this.o===void 0);let s=this.i;const a=g=>this.i!==s?(s=this.i,n(g)):Promise.resolve();let u=new gr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new gr,e.enqueueRetryable(()=>a(this.currentUser))};const h=()=>{const g=u;e.enqueueRetryable(async()=>{await g.promise,await a(this.currentUser)})},m=g=>{se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit(g=>m(g)),setTimeout(()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(se("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new gr)}},0),h()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Be(typeof s.accessToken=="string"),new Cg(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Be(e===null||typeof e=="string"),new Mt(e)}}class iw{constructor(e,n,s){this.l=e,this.h=n,this.P=s,this.type="FirstParty",this.user=Mt.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class sw{constructor(e,n,s){this.l=e,this.h=n,this.P=s}getToken(){return Promise.resolve(new iw(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Mt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ow{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class aw{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Be(this.o===void 0);const s=u=>{u.error!=null&&se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.R;return this.R=u.token,se("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>s(u))};const a=u=>{se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(u=>a(u)),setTimeout(()=>{if(!this.appCheck){const u=this.A.getImmediate({optional:!0});u?a(u):se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Be(typeof n.token=="string"),this.R=n.token,new ow(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lw(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<i;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const a=lw(40);for(let u=0;u<a.length;++u)s.length<20&&a[u]<n&&(s+=e.charAt(a[u]%e.length))}return s}}function Ve(i,e){return i<e?-1:i>e?1:0}function js(i,e,n){return i.length===e.length&&i.every((s,a)=>n(s,e[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{static now(){return gt.fromMillis(Date.now())}static fromDate(e){return gt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*n));return new gt(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new he(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new he(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new he(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ve(this.nanoseconds,e.nanoseconds):Ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{static fromTimestamp(e){return new Te(e)}static min(){return new Te(new gt(0,0))}static max(){return new Te(new gt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(e,n,s){n===void 0?n=0:n>e.length&&we(),s===void 0?s=e.length-n:s>e.length-n&&we(),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return da.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof da?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let a=0;a<s;a++){const u=e.get(a),h=n.get(a);if(u<h)return-1;if(u>h)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Je extends da{construct(e,n,s){return new Je(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new he(Y.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(a=>a.length>0))}return new Je(n)}static emptyPath(){return new Je([])}}const uw=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class kt extends da{construct(e,n,s){return new kt(e,n,s)}static isValidIdentifier(e){return uw.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),kt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new kt(["__name__"])}static fromServerFormat(e){const n=[];let s="",a=0;const u=()=>{if(s.length===0)throw new he(Y.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let h=!1;for(;a<e.length;){const m=e[a];if(m==="\\"){if(a+1===e.length)throw new he(Y.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[a+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new he(Y.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,a+=2}else m==="`"?(h=!h,a++):m!=="."||h?(s+=m,a++):(u(),a++)}if(u(),h)throw new he(Y.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new kt(n)}static emptyPath(){return new kt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.path=e}static fromPath(e){return new ye(Je.fromString(e))}static fromName(e){return new ye(Je.fromString(e).popFirst(5))}static empty(){return new ye(Je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Je.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new Je(e.slice()))}}function cw(i,e){const n=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,a=Te.fromTimestamp(s===1e9?new gt(n+1,0):new gt(n,s));return new ei(a,ye.empty(),e)}function hw(i){return new ei(i.readTime,i.key,-1)}class ei{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new ei(Te.min(),ye.empty(),-1)}static max(){return new ei(Te.max(),ye.empty(),-1)}}function dw(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=ye.comparator(i.documentKey,e.documentKey),n!==0?n:Ve(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class pw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Js(i){if(i.code!==Y.FAILED_PRECONDITION||i.message!==fw)throw i;se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&we(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new W((s,a)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,a)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,a)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof W?n:W.resolve(n)}catch(n){return W.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):W.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):W.reject(n)}static resolve(e){return new W((n,s)=>{n(e)})}static reject(e){return new W((n,s)=>{s(e)})}static waitFor(e){return new W((n,s)=>{let a=0,u=0,h=!1;e.forEach(m=>{++a,m.next(()=>{++u,h&&u===a&&n()},g=>s(g))}),h=!0,u===a&&n()})}static or(e){let n=W.resolve(!1);for(const s of e)n=n.next(a=>a?W.resolve(a):s());return n}static forEach(e,n){const s=[];return e.forEach((a,u)=>{s.push(n.call(this,a,u))}),this.waitFor(s)}static mapArray(e,n){return new W((s,a)=>{const u=e.length,h=new Array(u);let m=0;for(let g=0;g<u;g++){const v=g;n(e[v]).next(w=>{h[v]=w,++m,m===u&&s(h)},w=>a(w))}})}static doWhile(e,n){return new W((s,a)=>{const u=()=>{e()===!0?n().next(()=>{u()},a):s()};u()})}}function mw(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Zs(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ie(s),this.se=s=>n.writeSequenceNumber(s))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}yu.oe=-1;function vu(i){return i==null}function su(i){return i===0&&1/i==-1/0}function gw(i){return typeof i=="number"&&Number.isInteger(i)&&!su(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yw(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=um(e)),e=vw(i.get(n),e);return um(e)}function vw(i,e){let n=e;const s=i.length;for(let a=0;a<s;a++){const u=i.charAt(a);switch(u){case"\0":n+="";break;case"":n+="";break;default:n+=u}}return n}function um(i){return i+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cm(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function si(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function Pg(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e,n){this.comparator=e,this.root=n||Pt.EMPTY}insert(e,n){return new nt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Pt.BLACK,null,null))}remove(e){return new nt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Pt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(a===0)return n+s.left.size;a<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $l(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $l(this.root,e,this.comparator,!1)}getReverseIterator(){return new $l(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $l(this.root,e,this.comparator,!0)}}class $l{constructor(e,n,s,a){this.isReverse=a,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?s(e.key,n):1,n&&a&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Pt{constructor(e,n,s,a,u){this.key=e,this.value=n,this.color=s??Pt.RED,this.left=a??Pt.EMPTY,this.right=u??Pt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,a,u){return new Pt(e??this.key,n??this.value,s??this.color,a??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let a=this;const u=s(e,a.key);return a=u<0?a.copy(null,null,null,a.left.insert(e,n,s),null):u===0?a.copy(null,n,null,null,null):a.copy(null,null,null,null,a.right.insert(e,n,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Pt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,a=this;if(n(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,n),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),n(e,a.key)===0){if(a.right.isEmpty())return Pt.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,n))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Pt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Pt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw we();const e=this.left.check();if(e!==this.right.check())throw we();return e+(this.isRed()?0:1)}}Pt.EMPTY=null,Pt.RED=!0,Pt.BLACK=!1;Pt.EMPTY=new class{constructor(){this.size=0}get key(){throw we()}get value(){throw we()}get color(){throw we()}get left(){throw we()}get right(){throw we()}copy(e,n,s,a,u){return this}insert(e,n,s){return new Pt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e){this.comparator=e,this.data=new nt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;n(a.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new hm(this.data.getIterator())}getIteratorFrom(e){return new hm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof yt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const a=n.getNext().key,u=s.getNext().key;if(this.comparator(a,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new yt(this.comparator);return n.data=e,n}}class hm{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.fields=e,e.sort(kt.comparator)}static empty(){return new on([])}unionWith(e){let n=new yt(kt.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new on(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return js(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(a){try{return atob(a)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new kg("Invalid base64 string: "+u):u}}(e);return new xt(n)}static fromUint8Array(e){const n=function(a){let u="";for(let h=0;h<a.length;++h)u+=String.fromCharCode(a[h]);return u}(e);return new xt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let a=0;a<n.length;a++)s[a]=n.charCodeAt(a);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}xt.EMPTY_BYTE_STRING=new xt("");const _w=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ti(i){if(Be(!!i),typeof i=="string"){let e=0;const n=_w.exec(i);if(Be(!!n),n[1]){let a=n[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:ot(i.seconds),nanos:ot(i.nanos)}}function ot(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function ni(i){return typeof i=="string"?xt.fromBase64String(i):xt.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zh(i){var e,n;return((n=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function _u(i){const e=i.mapValue.fields.__previous_value__;return Zh(e)?_u(e):e}function fa(i){const e=ti(i.mapValue.fields.__local_write_time__.timestampValue);return new gt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(e,n,s,a,u,h,m,g,v){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=a,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=v}}class pa{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new pa("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof pa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ql={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ri(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Zh(i)?4:Tw(i)?9007199254740991:ww(i)?10:11:we()}function Kn(i,e){if(i===e)return!0;const n=ri(i);if(n!==ri(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return fa(i).isEqual(fa(e));case 3:return function(a,u){if(typeof a.timestampValue=="string"&&typeof u.timestampValue=="string"&&a.timestampValue.length===u.timestampValue.length)return a.timestampValue===u.timestampValue;const h=ti(a.timestampValue),m=ti(u.timestampValue);return h.seconds===m.seconds&&h.nanos===m.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return function(a,u){return ni(a.bytesValue).isEqual(ni(u.bytesValue))}(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return function(a,u){return ot(a.geoPointValue.latitude)===ot(u.geoPointValue.latitude)&&ot(a.geoPointValue.longitude)===ot(u.geoPointValue.longitude)}(i,e);case 2:return function(a,u){if("integerValue"in a&&"integerValue"in u)return ot(a.integerValue)===ot(u.integerValue);if("doubleValue"in a&&"doubleValue"in u){const h=ot(a.doubleValue),m=ot(u.doubleValue);return h===m?su(h)===su(m):isNaN(h)&&isNaN(m)}return!1}(i,e);case 9:return js(i.arrayValue.values||[],e.arrayValue.values||[],Kn);case 10:case 11:return function(a,u){const h=a.mapValue.fields||{},m=u.mapValue.fields||{};if(cm(h)!==cm(m))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(m[g]===void 0||!Kn(h[g],m[g])))return!1;return!0}(i,e);default:return we()}}function ma(i,e){return(i.values||[]).find(n=>Kn(n,e))!==void 0}function $s(i,e){if(i===e)return 0;const n=ri(i),s=ri(e);if(n!==s)return Ve(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ve(i.booleanValue,e.booleanValue);case 2:return function(u,h){const m=ot(u.integerValue||u.doubleValue),g=ot(h.integerValue||h.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1}(i,e);case 3:return dm(i.timestampValue,e.timestampValue);case 4:return dm(fa(i),fa(e));case 5:return Ve(i.stringValue,e.stringValue);case 6:return function(u,h){const m=ni(u),g=ni(h);return m.compareTo(g)}(i.bytesValue,e.bytesValue);case 7:return function(u,h){const m=u.split("/"),g=h.split("/");for(let v=0;v<m.length&&v<g.length;v++){const w=Ve(m[v],g[v]);if(w!==0)return w}return Ve(m.length,g.length)}(i.referenceValue,e.referenceValue);case 8:return function(u,h){const m=Ve(ot(u.latitude),ot(h.latitude));return m!==0?m:Ve(ot(u.longitude),ot(h.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return fm(i.arrayValue,e.arrayValue);case 10:return function(u,h){var m,g,v,w;const A=u.fields||{},R=h.fields||{},L=(m=A.value)===null||m===void 0?void 0:m.arrayValue,U=(g=R.value)===null||g===void 0?void 0:g.arrayValue,$=Ve(((v=L==null?void 0:L.values)===null||v===void 0?void 0:v.length)||0,((w=U==null?void 0:U.values)===null||w===void 0?void 0:w.length)||0);return $!==0?$:fm(L,U)}(i.mapValue,e.mapValue);case 11:return function(u,h){if(u===ql.mapValue&&h===ql.mapValue)return 0;if(u===ql.mapValue)return 1;if(h===ql.mapValue)return-1;const m=u.fields||{},g=Object.keys(m),v=h.fields||{},w=Object.keys(v);g.sort(),w.sort();for(let A=0;A<g.length&&A<w.length;++A){const R=Ve(g[A],w[A]);if(R!==0)return R;const L=$s(m[g[A]],v[w[A]]);if(L!==0)return L}return Ve(g.length,w.length)}(i.mapValue,e.mapValue);default:throw we()}}function dm(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Ve(i,e);const n=ti(i),s=ti(e),a=Ve(n.seconds,s.seconds);return a!==0?a:Ve(n.nanos,s.nanos)}function fm(i,e){const n=i.values||[],s=e.values||[];for(let a=0;a<n.length&&a<s.length;++a){const u=$s(n[a],s[a]);if(u)return u}return Ve(n.length,s.length)}function qs(i){return xh(i)}function xh(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(n){const s=ti(n);return`time(${s.seconds},${s.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(n){return ni(n).toBase64()}(i.bytesValue):"referenceValue"in i?function(n){return ye.fromName(n).toString()}(i.referenceValue):"geoPointValue"in i?function(n){return`geo(${n.latitude},${n.longitude})`}(i.geoPointValue):"arrayValue"in i?function(n){let s="[",a=!0;for(const u of n.values||[])a?a=!1:s+=",",s+=xh(u);return s+"]"}(i.arrayValue):"mapValue"in i?function(n){const s=Object.keys(n.fields||{}).sort();let a="{",u=!0;for(const h of s)u?u=!1:a+=",",a+=`${h}:${xh(n.fields[h])}`;return a+"}"}(i.mapValue):we()}function Xl(i){switch(ri(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=_u(i);return e?16+Xl(e):16;case 5:return 2*i.stringValue.length;case 6:return ni(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((a,u)=>a+Xl(u),0)}(i.arrayValue);case 10:case 11:return function(s){let a=0;return si(s.fields,(u,h)=>{a+=u.length+Xl(h)}),a}(i.mapValue);default:throw we()}}function Vh(i){return!!i&&"integerValue"in i}function ed(i){return!!i&&"arrayValue"in i}function pm(i){return!!i&&"nullValue"in i}function mm(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Yl(i){return!!i&&"mapValue"in i}function ww(i){var e,n;return((n=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function sa(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return si(i.mapValue.fields,(n,s)=>e.mapValue.fields[n]=sa(s)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=sa(i.arrayValue.values[n]);return e}return Object.assign({},i)}function Tw(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.value=e}static empty(){return new Yt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Yl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=sa(n)}setAll(e){let n=kt.emptyPath(),s={},a=[];e.forEach((h,m)=>{if(!n.isImmediateParentOf(m)){const g=this.getFieldsMap(n);this.applyChanges(g,s,a),s={},a=[],n=m.popLast()}h?s[m.lastSegment()]=sa(h):a.push(m.lastSegment())});const u=this.getFieldsMap(n);this.applyChanges(u,s,a)}delete(e){const n=this.field(e.popLast());Yl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Kn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=n.mapValue.fields[e.get(s)];Yl(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=a),n=a}return n.mapValue.fields}applyChanges(e,n,s){si(n,(a,u)=>e[a]=u);for(const a of s)delete e[a]}clone(){return new Yt(sa(this.value))}}function xg(i){const e=[];return si(i.fields,(n,s)=>{const a=new kt([n]);if(Yl(s)){const u=xg(s.mapValue).fields;if(u.length===0)e.push(a);else for(const h of u)e.push(a.child(h))}else e.push(a)}),new on(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e,n,s,a,u,h,m){this.key=e,this.documentType=n,this.version=s,this.readTime=a,this.createTime=u,this.data=h,this.documentState=m}static newInvalidDocument(e){return new Ft(e,0,Te.min(),Te.min(),Te.min(),Yt.empty(),0)}static newFoundDocument(e,n,s,a){return new Ft(e,1,n,Te.min(),s,a,0)}static newNoDocument(e,n){return new Ft(e,2,n,Te.min(),Te.min(),Yt.empty(),0)}static newUnknownDocument(e,n){return new Ft(e,3,n,Te.min(),Te.min(),Yt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Yt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Yt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ft&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ft(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{constructor(e,n){this.position=e,this.inclusive=n}}function gm(i,e,n){let s=0;for(let a=0;a<i.position.length;a++){const u=e[a],h=i.position[a];if(u.field.isKeyField()?s=ye.comparator(ye.fromName(h.referenceValue),n.key):s=$s(h,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function ym(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!Kn(i.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(e,n="asc"){this.field=e,this.dir=n}}function Sw(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg{}class mt extends Vg{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new Rw(e,n,s):n==="array-contains"?new Pw(e,s):n==="in"?new kw(e,s):n==="not-in"?new xw(e,s):n==="array-contains-any"?new Vw(e,s):new mt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new Cw(e,s):new Aw(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison($s(n,this.value)):n!==null&&ri(this.value)===ri(n)&&this.matchesComparison($s(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Gn extends Vg{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Gn(e,n)}matches(e){return Dg(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Dg(i){return i.op==="and"}function Ng(i){return Iw(i)&&Dg(i)}function Iw(i){for(const e of i.filters)if(e instanceof Gn)return!1;return!0}function Dh(i){if(i instanceof mt)return i.field.canonicalString()+i.op.toString()+qs(i.value);if(Ng(i))return i.filters.map(e=>Dh(e)).join(",");{const e=i.filters.map(n=>Dh(n)).join(",");return`${i.op}(${e})`}}function Lg(i,e){return i instanceof mt?function(s,a){return a instanceof mt&&s.op===a.op&&s.field.isEqual(a.field)&&Kn(s.value,a.value)}(i,e):i instanceof Gn?function(s,a){return a instanceof Gn&&s.op===a.op&&s.filters.length===a.filters.length?s.filters.reduce((u,h,m)=>u&&Lg(h,a.filters[m]),!0):!1}(i,e):void we()}function Og(i){return i instanceof mt?function(n){return`${n.field.canonicalString()} ${n.op} ${qs(n.value)}`}(i):i instanceof Gn?function(n){return n.op.toString()+" {"+n.getFilters().map(Og).join(" ,")+"}"}(i):"Filter"}class Rw extends mt{constructor(e,n,s){super(e,n,s),this.key=ye.fromName(s.referenceValue)}matches(e){const n=ye.comparator(e.key,this.key);return this.matchesComparison(n)}}class Cw extends mt{constructor(e,n){super(e,"in",n),this.keys=Mg("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Aw extends mt{constructor(e,n){super(e,"not-in",n),this.keys=Mg("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Mg(i,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>ye.fromName(s.referenceValue))}class Pw extends mt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ed(n)&&ma(n.arrayValue,this.value)}}class kw extends mt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ma(this.value.arrayValue,n)}}class xw extends mt{constructor(e,n){super(e,"not-in",n)}matches(e){if(ma(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!ma(this.value.arrayValue,n)}}class Vw extends mt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ed(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>ma(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{constructor(e,n=null,s=[],a=[],u=null,h=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=a,this.limit=u,this.startAt=h,this.endAt=m,this.ue=null}}function vm(i,e=null,n=[],s=[],a=null,u=null,h=null){return new Dw(i,e,n,s,a,u,h)}function td(i){const e=Se(i);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>Dh(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(u){return u.field.canonicalString()+u.dir}(s)).join(","),vu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>qs(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>qs(s)).join(",")),e.ue=n}return e.ue}function nd(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!Sw(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!Lg(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!ym(i.startAt,e.startAt)&&ym(i.endAt,e.endAt)}function Nh(i){return ye.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(e,n=null,s=[],a=[],u=null,h="F",m=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=a,this.limit=u,this.limitType=h,this.startAt=m,this.endAt=g,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Nw(i,e,n,s,a,u,h,m){return new Eu(i,e,n,s,a,u,h,m)}function rd(i){return new Eu(i)}function _m(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function Lw(i){return i.collectionGroup!==null}function oa(i){const e=Se(i);if(e.ce===null){e.ce=[];const n=new Set;for(const u of e.explicitOrderBy)e.ce.push(u),n.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let m=new yt(kt.comparator);return h.filters.forEach(g=>{g.getFlattenedFilters().forEach(v=>{v.isInequality()&&(m=m.add(v.field))})}),m})(e).forEach(u=>{n.has(u.canonicalString())||u.isKeyField()||e.ce.push(new au(u,s))}),n.has(kt.keyField().canonicalString())||e.ce.push(new au(kt.keyField(),s))}return e.ce}function Hn(i){const e=Se(i);return e.le||(e.le=Ow(e,oa(i))),e.le}function Ow(i,e){if(i.limitType==="F")return vm(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(a=>{const u=a.dir==="desc"?"asc":"desc";return new au(a.field,u)});const n=i.endAt?new ou(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new ou(i.startAt.position,i.startAt.inclusive):null;return vm(i.path,i.collectionGroup,e,i.filters,i.limit,n,s)}}function Lh(i,e,n){return new Eu(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function wu(i,e){return nd(Hn(i),Hn(e))&&i.limitType===e.limitType}function Fg(i){return`${td(Hn(i))}|lt:${i.limitType}`}function Ms(i){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(a=>Og(a)).join(", ")}]`),vu(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(a=>function(h){return`${h.field.canonicalString()} (${h.dir})`}(a)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(a=>qs(a)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(a=>qs(a)).join(",")),`Target(${s})`}(Hn(i))}; limitType=${i.limitType})`}function Tu(i,e){return e.isFoundDocument()&&function(s,a){const u=a.key.path;return s.collectionGroup!==null?a.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):ye.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)}(i,e)&&function(s,a){for(const u of oa(s))if(!u.field.isKeyField()&&a.data.field(u.field)===null)return!1;return!0}(i,e)&&function(s,a){for(const u of s.filters)if(!u.matches(a))return!1;return!0}(i,e)&&function(s,a){return!(s.startAt&&!function(h,m,g){const v=gm(h,m,g);return h.inclusive?v<=0:v<0}(s.startAt,oa(s),a)||s.endAt&&!function(h,m,g){const v=gm(h,m,g);return h.inclusive?v>=0:v>0}(s.endAt,oa(s),a))}(i,e)}function Mw(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Ug(i){return(e,n)=>{let s=!1;for(const a of oa(i)){const u=Fw(a,e,n);if(u!==0)return u;s=s||a.field.isKeyField()}return 0}}function Fw(i,e,n){const s=i.field.isKeyField()?ye.comparator(e.key,n.key):function(u,h,m){const g=h.data.field(u),v=m.data.field(u);return g!==null&&v!==null?$s(g,v):we()}(i.field,e,n);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return we()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[a,u]of s)if(this.equalsFn(a,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),a=this.inner[s];if(a===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let u=0;u<a.length;u++)if(this.equalsFn(a[u][0],e))return void(a[u]=[e,n]);a.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return s.length===1?delete this.inner[n]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){si(this.inner,(n,s)=>{for(const[a,u]of s)e(a,u)})}isEmpty(){return Pg(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uw=new nt(ye.comparator);function _r(){return Uw}const zg=new nt(ye.comparator);function na(...i){let e=zg;for(const n of i)e=e.insert(n.key,n);return e}function bg(i){let e=zg;return i.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function Fi(){return aa()}function Bg(){return aa()}function aa(){return new Bi(i=>i.toString(),(i,e)=>i.isEqual(e))}const zw=new nt(ye.comparator),bw=new yt(ye.comparator);function ke(...i){let e=bw;for(const n of i)e=e.add(n);return e}const Bw=new yt(Ve);function jw(){return Bw}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function id(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:su(e)?"-0":e}}function jg(i){return{integerValue:""+i}}function $w(i,e){return gw(e)?jg(e):id(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{constructor(){this._=void 0}}function qw(i,e,n){return i instanceof lu?function(a,u){const h={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return u&&Zh(u)&&(u=_u(u)),u&&(h.fields.__previous_value__=u),{mapValue:h}}(n,e):i instanceof ga?qg(i,e):i instanceof ya?Hg(i,e):function(a,u){const h=$g(a,u),m=Em(h)+Em(a.Pe);return Vh(h)&&Vh(a.Pe)?jg(m):id(a.serializer,m)}(i,e)}function Hw(i,e,n){return i instanceof ga?qg(i,e):i instanceof ya?Hg(i,e):n}function $g(i,e){return i instanceof uu?function(s){return Vh(s)||function(u){return!!u&&"doubleValue"in u}(s)}(e)?e:{integerValue:0}:null}class lu extends Su{}class ga extends Su{constructor(e){super(),this.elements=e}}function qg(i,e){const n=Wg(e);for(const s of i.elements)n.some(a=>Kn(a,s))||n.push(s);return{arrayValue:{values:n}}}class ya extends Su{constructor(e){super(),this.elements=e}}function Hg(i,e){let n=Wg(e);for(const s of i.elements)n=n.filter(a=>!Kn(a,s));return{arrayValue:{values:n}}}class uu extends Su{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Em(i){return ot(i.integerValue||i.doubleValue)}function Wg(i){return ed(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function Ww(i,e){return i.field.isEqual(e.field)&&function(s,a){return s instanceof ga&&a instanceof ga||s instanceof ya&&a instanceof ya?js(s.elements,a.elements,Kn):s instanceof uu&&a instanceof uu?Kn(s.Pe,a.Pe):s instanceof lu&&a instanceof lu}(i.transform,e.transform)}class Qw{constructor(e,n){this.version=e,this.transformResults=n}}class Nn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Nn}static exists(e){return new Nn(void 0,e)}static updateTime(e){return new Nn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Jl(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class Iu{}function Qg(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new sd(i.key,Nn.none()):new wa(i.key,i.data,Nn.none());{const n=i.data,s=Yt.empty();let a=new yt(kt.comparator);for(let u of e.fields)if(!a.has(u)){let h=n.field(u);h===null&&u.length>1&&(u=u.popLast(),h=n.field(u)),h===null?s.delete(u):s.set(u,h),a=a.add(u)}return new oi(i.key,s,new on(a.toArray()),Nn.none())}}function Kw(i,e,n){i instanceof wa?function(a,u,h){const m=a.value.clone(),g=Tm(a.fieldTransforms,u,h.transformResults);m.setAll(g),u.convertToFoundDocument(h.version,m).setHasCommittedMutations()}(i,e,n):i instanceof oi?function(a,u,h){if(!Jl(a.precondition,u))return void u.convertToUnknownDocument(h.version);const m=Tm(a.fieldTransforms,u,h.transformResults),g=u.data;g.setAll(Kg(a)),g.setAll(m),u.convertToFoundDocument(h.version,g).setHasCommittedMutations()}(i,e,n):function(a,u,h){u.convertToNoDocument(h.version).setHasCommittedMutations()}(0,e,n)}function la(i,e,n,s){return i instanceof wa?function(u,h,m,g){if(!Jl(u.precondition,h))return m;const v=u.value.clone(),w=Sm(u.fieldTransforms,g,h);return v.setAll(w),h.convertToFoundDocument(h.version,v).setHasLocalMutations(),null}(i,e,n,s):i instanceof oi?function(u,h,m,g){if(!Jl(u.precondition,h))return m;const v=Sm(u.fieldTransforms,g,h),w=h.data;return w.setAll(Kg(u)),w.setAll(v),h.convertToFoundDocument(h.version,w).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(A=>A.field))}(i,e,n,s):function(u,h,m){return Jl(u.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):m}(i,e,n)}function Gw(i,e){let n=null;for(const s of i.fieldTransforms){const a=e.data.field(s.field),u=$g(s.transform,a||null);u!=null&&(n===null&&(n=Yt.empty()),n.set(s.field,u))}return n||null}function wm(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!function(s,a){return s===void 0&&a===void 0||!(!s||!a)&&js(s,a,(u,h)=>Ww(u,h))}(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class wa extends Iu{constructor(e,n,s,a=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class oi extends Iu{constructor(e,n,s,a,u=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=a,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function Kg(i){const e=new Map;return i.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=i.data.field(n);e.set(n,s)}}),e}function Tm(i,e,n){const s=new Map;Be(i.length===n.length);for(let a=0;a<n.length;a++){const u=i[a],h=u.transform,m=e.data.field(u.field);s.set(u.field,Hw(h,m,n[a]))}return s}function Sm(i,e,n){const s=new Map;for(const a of i){const u=a.transform,h=n.data.field(a.field);s.set(a.field,qw(u,h,e))}return s}class sd extends Iu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Xw extends Iu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(e,n,s,a){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let a=0;a<this.mutations.length;a++){const u=this.mutations[a];u.key.isEqual(e.key)&&Kw(u,e,s[a])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=la(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=la(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=Bg();return this.mutations.forEach(a=>{const u=e.get(a.key),h=u.overlayedDocument;let m=this.applyToLocalView(h,u.mutatedFields);m=n.has(a.key)?null:m;const g=Qg(h,m);g!==null&&s.set(a.key,g),h.isValidDocument()||h.convertToNoDocument(Te.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ke())}isEqual(e){return this.batchId===e.batchId&&js(this.mutations,e.mutations,(n,s)=>wm(n,s))&&js(this.baseMutations,e.baseMutations,(n,s)=>wm(n,s))}}class od{constructor(e,n,s,a){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=a}static from(e,n,s){Be(e.mutations.length===s.length);let a=function(){return zw}();const u=e.mutations;for(let h=0;h<u.length;h++)a=a.insert(u[h].key,s[h].version);return new od(e,n,s,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ut,Le;function e1(i){switch(i){default:return we();case Y.CANCELLED:case Y.UNKNOWN:case Y.DEADLINE_EXCEEDED:case Y.RESOURCE_EXHAUSTED:case Y.INTERNAL:case Y.UNAVAILABLE:case Y.UNAUTHENTICATED:return!1;case Y.INVALID_ARGUMENT:case Y.NOT_FOUND:case Y.ALREADY_EXISTS:case Y.PERMISSION_DENIED:case Y.FAILED_PRECONDITION:case Y.ABORTED:case Y.OUT_OF_RANGE:case Y.UNIMPLEMENTED:case Y.DATA_LOSS:return!0}}function Gg(i){if(i===void 0)return vr("GRPC error has no .code"),Y.UNKNOWN;switch(i){case ut.OK:return Y.OK;case ut.CANCELLED:return Y.CANCELLED;case ut.UNKNOWN:return Y.UNKNOWN;case ut.DEADLINE_EXCEEDED:return Y.DEADLINE_EXCEEDED;case ut.RESOURCE_EXHAUSTED:return Y.RESOURCE_EXHAUSTED;case ut.INTERNAL:return Y.INTERNAL;case ut.UNAVAILABLE:return Y.UNAVAILABLE;case ut.UNAUTHENTICATED:return Y.UNAUTHENTICATED;case ut.INVALID_ARGUMENT:return Y.INVALID_ARGUMENT;case ut.NOT_FOUND:return Y.NOT_FOUND;case ut.ALREADY_EXISTS:return Y.ALREADY_EXISTS;case ut.PERMISSION_DENIED:return Y.PERMISSION_DENIED;case ut.FAILED_PRECONDITION:return Y.FAILED_PRECONDITION;case ut.ABORTED:return Y.ABORTED;case ut.OUT_OF_RANGE:return Y.OUT_OF_RANGE;case ut.UNIMPLEMENTED:return Y.UNIMPLEMENTED;case ut.DATA_LOSS:return Y.DATA_LOSS;default:return we()}}(Le=ut||(ut={}))[Le.OK=0]="OK",Le[Le.CANCELLED=1]="CANCELLED",Le[Le.UNKNOWN=2]="UNKNOWN",Le[Le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Le[Le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Le[Le.NOT_FOUND=5]="NOT_FOUND",Le[Le.ALREADY_EXISTS=6]="ALREADY_EXISTS",Le[Le.PERMISSION_DENIED=7]="PERMISSION_DENIED",Le[Le.UNAUTHENTICATED=16]="UNAUTHENTICATED",Le[Le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Le[Le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Le[Le.ABORTED=10]="ABORTED",Le[Le.OUT_OF_RANGE=11]="OUT_OF_RANGE",Le[Le.UNIMPLEMENTED=12]="UNIMPLEMENTED",Le[Le.INTERNAL=13]="INTERNAL",Le[Le.UNAVAILABLE=14]="UNAVAILABLE",Le[Le.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t1(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n1=new Ui([4294967295,4294967295],0);function Im(i){const e=t1().encode(i),n=new Eg;return n.update(e),new Uint8Array(n.digest())}function Rm(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Ui([n,s],0),new Ui([a,u],0)]}class ad{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new ra(`Invalid padding: ${n}`);if(s<0)throw new ra(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new ra(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new ra(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ie=Ui.fromNumber(this.Te)}Ee(e,n,s){let a=e.add(n.multiply(Ui.fromNumber(s)));return a.compare(n1)===1&&(a=new Ui([a.getBits(0),a.getBits(1)],0)),a.modulo(this.Ie).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const n=Im(e),[s,a]=Rm(n);for(let u=0;u<this.hashCount;u++){const h=this.Ee(s,a,u);if(!this.de(h))return!1}return!0}static create(e,n,s){const a=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),h=new ad(u,a,n);return s.forEach(m=>h.insert(m)),h}insert(e){if(this.Te===0)return;const n=Im(e),[s,a]=Rm(n);for(let u=0;u<this.hashCount;u++){const h=this.Ee(s,a,u);this.Ae(h)}}Ae(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class ra extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{constructor(e,n,s,a,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const a=new Map;return a.set(e,Ta.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new Ru(Te.min(),a,new nt(Ve),_r(),ke())}}class Ta{constructor(e,n,s,a,u){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Ta(s,n,ke(),ke(),ke())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(e,n,s,a){this.Re=e,this.removedTargetIds=n,this.key=s,this.Ve=a}}class Xg{constructor(e,n){this.targetId=e,this.me=n}}class Yg{constructor(e,n,s=xt.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=a}}class Cm{constructor(){this.fe=0,this.ge=Am(),this.pe=xt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ke(),n=ke(),s=ke();return this.ge.forEach((a,u)=>{switch(u){case 0:e=e.add(a);break;case 2:n=n.add(a);break;case 1:s=s.add(a);break;default:we()}}),new Ta(this.pe,this.ye,e,n,s)}Ce(){this.we=!1,this.ge=Am()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Be(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class r1{constructor(e){this.Le=e,this.Be=new Map,this.ke=_r(),this.qe=Hl(),this.Qe=Hl(),this.Ke=new nt(Ve)}$e(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(n,e.Ve):this.We(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.We(n,e.key,e.Ve)}Ge(e){this.forEachTarget(e,n=>{const s=this.ze(n);switch(e.state){case 0:this.je(n)&&s.De(e.resumeToken);break;case 1:s.Oe(),s.Se||s.Ce(),s.De(e.resumeToken);break;case 2:s.Oe(),s.Se||this.removeTarget(n);break;case 3:this.je(n)&&(s.Ne(),s.De(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),s.De(e.resumeToken));break;default:we()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((s,a)=>{this.je(a)&&n(a)})}Je(e){const n=e.targetId,s=e.me.count,a=this.Ye(n);if(a){const u=a.target;if(Nh(u))if(s===0){const h=new ye(u.path);this.We(n,h,Ft.newNoDocument(h,Te.min()))}else Be(s===1);else{const h=this.Ze(n);if(h!==s){const m=this.Xe(e),g=m?this.et(m,e,h):1;if(g!==0){this.He(n);const v=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,v)}}}}}Xe(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:a=0},hashCount:u=0}=n;let h,m;try{h=ni(s).toUint8Array()}catch(g){if(g instanceof kg)return Bs("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new ad(h,a,u)}catch(g){return Bs(g instanceof ra?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.Te===0?null:m}et(e,n,s){return n.me.count===s-this.rt(e,n.targetId)?0:2}rt(e,n){const s=this.Le.getRemoteKeysForTarget(n);let a=0;return s.forEach(u=>{const h=this.Le.nt(),m=`projects/${h.projectId}/databases/${h.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.We(n,u,null),a++)}),a}it(e){const n=new Map;this.Be.forEach((u,h)=>{const m=this.Ye(h);if(m){if(u.current&&Nh(m.target)){const g=new ye(m.target.path);this.st(g).has(h)||this.ot(h,g)||this.We(h,g,Ft.newNoDocument(g,e))}u.be&&(n.set(h,u.ve()),u.Ce())}});let s=ke();this.Qe.forEach((u,h)=>{let m=!0;h.forEachWhile(g=>{const v=this.Ye(g);return!v||v.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(s=s.add(u))}),this.ke.forEach((u,h)=>h.setReadTime(e));const a=new Ru(e,n,this.Ke,this.ke,s);return this.ke=_r(),this.qe=Hl(),this.Qe=Hl(),this.Ke=new nt(Ve),a}Ue(e,n){if(!this.je(e))return;const s=this.ot(e,n.key)?2:0;this.ze(e).Fe(n.key,s),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e)),this.Qe=this.Qe.insert(n.key,this._t(n.key).add(e))}We(e,n,s){if(!this.je(e))return;const a=this.ze(e);this.ot(e,n)?a.Fe(n,1):a.Me(n),this.Qe=this.Qe.insert(n,this._t(n).delete(e)),this.Qe=this.Qe.insert(n,this._t(n).add(e)),s&&(this.ke=this.ke.insert(n,s))}removeTarget(e){this.Be.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let n=this.Be.get(e);return n||(n=new Cm,this.Be.set(e,n)),n}_t(e){let n=this.Qe.get(e);return n||(n=new yt(Ve),this.Qe=this.Qe.insert(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new yt(Ve),this.qe=this.qe.insert(e,n)),n}je(e){const n=this.Ye(e)!==null;return n||se("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ut(e)}He(e){this.Be.set(e,new Cm),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}ot(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Hl(){return new nt(ye.comparator)}function Am(){return new nt(ye.comparator)}const i1={asc:"ASCENDING",desc:"DESCENDING"},s1={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},o1={and:"AND",or:"OR"};class a1{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Oh(i,e){return i.useProto3Json||vu(e)?e:{value:e}}function cu(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Jg(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function l1(i,e){return cu(i,e.toTimestamp())}function Wn(i){return Be(!!i),Te.fromTimestamp(function(n){const s=ti(n);return new gt(s.seconds,s.nanos)}(i))}function ld(i,e){return Mh(i,e).canonicalString()}function Mh(i,e){const n=function(a){return new Je(["projects",a.projectId,"databases",a.database])}(i).child("documents");return e===void 0?n:n.child(e)}function Zg(i){const e=Je.fromString(i);return Be(iy(e)),e}function Fh(i,e){return ld(i.databaseId,e.path)}function yh(i,e){const n=Zg(e);if(n.get(1)!==i.databaseId.projectId)throw new he(Y.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new he(Y.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new ye(ty(n))}function ey(i,e){return ld(i.databaseId,e)}function u1(i){const e=Zg(i);return e.length===4?Je.emptyPath():ty(e)}function Uh(i){return new Je(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function ty(i){return Be(i.length>4&&i.get(4)==="documents"),i.popFirst(5)}function Pm(i,e,n){return{name:Fh(i,e),fields:n.value.mapValue.fields}}function c1(i,e){let n;if("targetChange"in e){e.targetChange;const s=function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:we()}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],u=function(v,w){return v.useProto3Json?(Be(w===void 0||typeof w=="string"),xt.fromBase64String(w||"")):(Be(w===void 0||w instanceof Buffer||w instanceof Uint8Array),xt.fromUint8Array(w||new Uint8Array))}(i,e.targetChange.resumeToken),h=e.targetChange.cause,m=h&&function(v){const w=v.code===void 0?Y.UNKNOWN:Gg(v.code);return new he(w,v.message||"")}(h);n=new Yg(s,a,u,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const a=yh(i,s.document.name),u=Wn(s.document.updateTime),h=s.document.createTime?Wn(s.document.createTime):Te.min(),m=new Yt({mapValue:{fields:s.document.fields}}),g=Ft.newFoundDocument(a,u,h,m),v=s.targetIds||[],w=s.removedTargetIds||[];n=new Zl(v,w,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const a=yh(i,s.document),u=s.readTime?Wn(s.readTime):Te.min(),h=Ft.newNoDocument(a,u),m=s.removedTargetIds||[];n=new Zl([],m,h.key,h)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const a=yh(i,s.document),u=s.removedTargetIds||[];n=new Zl([],u,a,null)}else{if(!("filter"in e))return we();{e.filter;const s=e.filter;s.targetId;const{count:a=0,unchangedNames:u}=s,h=new Zw(a,u),m=s.targetId;n=new Xg(m,h)}}return n}function h1(i,e){let n;if(e instanceof wa)n={update:Pm(i,e.key,e.value)};else if(e instanceof sd)n={delete:Fh(i,e.key)};else if(e instanceof oi)n={update:Pm(i,e.key,e.data),updateMask:E1(e.fieldMask)};else{if(!(e instanceof Xw))return we();n={verify:Fh(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(u,h){const m=h.transform;if(m instanceof lu)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof ga)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof ya)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof uu)return{fieldPath:h.field.canonicalString(),increment:m.Pe};throw we()}(0,s))),e.precondition.isNone||(n.currentDocument=function(a,u){return u.updateTime!==void 0?{updateTime:l1(a,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:we()}(i,e.precondition)),n}function d1(i,e){return i&&i.length>0?(Be(e!==void 0),i.map(n=>function(a,u){let h=a.updateTime?Wn(a.updateTime):Wn(u);return h.isEqual(Te.min())&&(h=Wn(u)),new Qw(h,a.transformResults||[])}(n,e))):[]}function f1(i,e){return{documents:[ey(i,e.path)]}}function p1(i,e){const n={structuredQuery:{}},s=e.path;let a;e.collectionGroup!==null?(a=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=ey(i,a);const u=function(v){if(v.length!==0)return ry(Gn.create(v,"and"))}(e.filters);u&&(n.structuredQuery.where=u);const h=function(v){if(v.length!==0)return v.map(w=>function(R){return{field:Fs(R.field),direction:y1(R.dir)}}(w))}(e.orderBy);h&&(n.structuredQuery.orderBy=h);const m=Oh(i,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=function(v){return{before:v.inclusive,values:v.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(v){return{before:!v.inclusive,values:v.position}}(e.endAt)),{ct:n,parent:a}}function m1(i){let e=u1(i.parent);const n=i.structuredQuery,s=n.from?n.from.length:0;let a=null;if(s>0){Be(s===1);const w=n.from[0];w.allDescendants?a=w.collectionId:e=e.child(w.collectionId)}let u=[];n.where&&(u=function(A){const R=ny(A);return R instanceof Gn&&Ng(R)?R.getFilters():[R]}(n.where));let h=[];n.orderBy&&(h=function(A){return A.map(R=>function(U){return new au(Us(U.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(U.direction))}(R))}(n.orderBy));let m=null;n.limit&&(m=function(A){let R;return R=typeof A=="object"?A.value:A,vu(R)?null:R}(n.limit));let g=null;n.startAt&&(g=function(A){const R=!!A.before,L=A.values||[];return new ou(L,R)}(n.startAt));let v=null;return n.endAt&&(v=function(A){const R=!A.before,L=A.values||[];return new ou(L,R)}(n.endAt)),Nw(e,a,h,u,m,"F",g,v)}function g1(i,e){const n=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function ny(i){return i.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Us(n.unaryFilter.field);return mt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const a=Us(n.unaryFilter.field);return mt.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Us(n.unaryFilter.field);return mt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Us(n.unaryFilter.field);return mt.create(h,"!=",{nullValue:"NULL_VALUE"});default:return we()}}(i):i.fieldFilter!==void 0?function(n){return mt.create(Us(n.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return we()}}(n.fieldFilter.op),n.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(n){return Gn.create(n.compositeFilter.filters.map(s=>ny(s)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return we()}}(n.compositeFilter.op))}(i):we()}function y1(i){return i1[i]}function v1(i){return s1[i]}function _1(i){return o1[i]}function Fs(i){return{fieldPath:i.canonicalString()}}function Us(i){return kt.fromServerFormat(i.fieldPath)}function ry(i){return i instanceof mt?function(n){if(n.op==="=="){if(mm(n.value))return{unaryFilter:{field:Fs(n.field),op:"IS_NAN"}};if(pm(n.value))return{unaryFilter:{field:Fs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(mm(n.value))return{unaryFilter:{field:Fs(n.field),op:"IS_NOT_NAN"}};if(pm(n.value))return{unaryFilter:{field:Fs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fs(n.field),op:v1(n.op),value:n.value}}}(i):i instanceof Gn?function(n){const s=n.getFilters().map(a=>ry(a));return s.length===1?s[0]:{compositeFilter:{op:_1(n.op),filters:s}}}(i):we()}function E1(i){const e=[];return i.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function iy(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e,n,s,a,u=Te.min(),h=Te.min(),m=xt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new Kr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Kr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Kr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Kr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(e){this.ht=e}}function T1(i){const e=m1({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?Lh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(){this.ln=new I1}addToCollectionParentIndex(e,n){return this.ln.add(n),W.resolve()}getCollectionParents(e,n){return W.resolve(this.ln.getEntries(n))}addFieldIndex(e,n){return W.resolve()}deleteFieldIndex(e,n){return W.resolve()}deleteAllFieldIndexes(e){return W.resolve()}createTargetIndexes(e,n){return W.resolve()}getDocumentsMatchingTarget(e,n){return W.resolve(null)}getIndexType(e,n){return W.resolve(0)}getFieldIndexes(e,n){return W.resolve([])}getNextCollectionGroupToUpdate(e){return W.resolve(null)}getMinOffset(e,n){return W.resolve(ei.min())}getMinOffsetFromCollectionGroup(e,n){return W.resolve(ei.min())}updateCollectionGroup(e,n,s){return W.resolve()}updateIndexEntries(e,n){return W.resolve()}}class I1{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),a=this.index[n]||new yt(Je.comparator),u=!a.has(s);return this.index[n]=a.add(s),u}has(e){const n=e.lastSegment(),s=e.popLast(),a=this.index[n];return a&&a.has(s)}getEntries(e){return(this.index[e]||new yt(Je.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const km={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Xt{static withCacheSize(e){return new Xt(e,Xt.DEFAULT_COLLECTION_PERCENTILE,Xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xt.DEFAULT_COLLECTION_PERCENTILE=10,Xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xt.DEFAULT=new Xt(41943040,Xt.DEFAULT_COLLECTION_PERCENTILE,Xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xt.DISABLED=new Xt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new Hs(0)}static Qn(){return new Hs(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xm([i,e],[n,s]){const a=Ve(i,n);return a===0?Ve(e,s):a}class R1{constructor(e){this.Gn=e,this.buffer=new yt(xm),this.zn=0}jn(){return++this.zn}Hn(e){const n=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();xm(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class C1{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){se("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Zs(n)?se("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await Js(n)}await this.Yn(3e5)})}}class A1{constructor(e,n){this.Zn=e,this.params=n}calculateTargetCount(e,n){return this.Zn.Xn(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return W.resolve(yu.oe);const s=new R1(n);return this.Zn.forEachTarget(e,a=>s.Hn(a.sequenceNumber)).next(()=>this.Zn.er(e,a=>s.Hn(a))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.Zn.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.Zn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(se("LruGarbageCollector","Garbage collection skipped; disabled"),W.resolve(km)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(se("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),km):this.tr(e,n))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,n){let s,a,u,h,m,g,v;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(A=>(A>this.params.maximumSequenceNumbersToCollect?(se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),a=this.params.maximumSequenceNumbersToCollect):a=A,h=Date.now(),this.nthSequenceNumber(e,a))).next(A=>(s=A,m=Date.now(),this.removeTargets(e,s,n))).next(A=>(u=A,g=Date.now(),this.removeOrphanedDocuments(e,s))).next(A=>(v=Date.now(),Os()<=Oe.DEBUG&&se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-w}ms
	Determined least recently used ${a} in `+(m-h)+`ms
	Removed ${u} targets in `+(g-m)+`ms
	Removed ${A} documents in `+(v-g)+`ms
Total Duration: ${v-w}ms`),W.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:u,documentsRemoved:A})))}}function P1(i,e){return new A1(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1{constructor(){this.changes=new Bi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ft.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?W.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1{constructor(e,n,s,a){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(a=>(s=a,this.remoteDocumentCache.getEntry(e,n))).next(a=>(s!==null&&la(s.mutation,a,on.empty(),gt.now()),a))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,ke()).next(()=>s))}getLocalViewOfDocuments(e,n,s=ke()){const a=Fi();return this.populateOverlays(e,a,n).next(()=>this.computeViews(e,n,a,s).next(u=>{let h=na();return u.forEach((m,g)=>{h=h.insert(m,g.overlayedDocument)}),h}))}getOverlayedDocuments(e,n){const s=Fi();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,ke()))}populateOverlays(e,n,s){const a=[];return s.forEach(u=>{n.has(u)||a.push(u)}),this.documentOverlayCache.getOverlays(e,a).next(u=>{u.forEach((h,m)=>{n.set(h,m)})})}computeViews(e,n,s,a){let u=_r();const h=aa(),m=function(){return aa()}();return n.forEach((g,v)=>{const w=s.get(v.key);a.has(v.key)&&(w===void 0||w.mutation instanceof oi)?u=u.insert(v.key,v):w!==void 0?(h.set(v.key,w.mutation.getFieldMask()),la(w.mutation,v,w.mutation.getFieldMask(),gt.now())):h.set(v.key,on.empty())}),this.recalculateAndSaveOverlays(e,u).next(g=>(g.forEach((v,w)=>h.set(v,w)),n.forEach((v,w)=>{var A;return m.set(v,new x1(w,(A=h.get(v))!==null&&A!==void 0?A:null))}),m))}recalculateAndSaveOverlays(e,n){const s=aa();let a=new nt((h,m)=>h-m),u=ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(h=>{for(const m of h)m.keys().forEach(g=>{const v=n.get(g);if(v===null)return;let w=s.get(g)||on.empty();w=m.applyToLocalView(v,w),s.set(g,w);const A=(a.get(m.batchId)||ke()).add(g);a=a.insert(m.batchId,A)})}).next(()=>{const h=[],m=a.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),v=g.key,w=g.value,A=Bg();w.forEach(R=>{if(!u.has(R)){const L=Qg(n.get(R),s.get(R));L!==null&&A.set(R,L),u=u.add(R)}}),h.push(this.documentOverlayCache.saveOverlays(e,v,A))}return W.waitFor(h)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,a){return function(h){return ye.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Lw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,a):this.getDocumentsMatchingCollectionQuery(e,n,s,a)}getNextDocuments(e,n,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,a).next(u=>{const h=a-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,a-u.size):W.resolve(Fi());let m=-1,g=u;return h.next(v=>W.forEach(v,(w,A)=>(m<A.largestBatchId&&(m=A.largestBatchId),u.get(w)?W.resolve():this.remoteDocumentCache.getEntry(e,w).next(R=>{g=g.insert(w,R)}))).next(()=>this.populateOverlays(e,v,u)).next(()=>this.computeViews(e,g,v,ke())).next(w=>({batchId:m,changes:bg(w)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ye(n)).next(s=>{let a=na();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a})}getDocumentsMatchingCollectionGroupQuery(e,n,s,a){const u=n.collectionGroup;let h=na();return this.indexManager.getCollectionParents(e,u).next(m=>W.forEach(m,g=>{const v=function(A,R){return new Eu(R,null,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt)}(n,g.child(u));return this.getDocumentsMatchingCollectionQuery(e,v,s,a).next(w=>{w.forEach((A,R)=>{h=h.insert(A,R)})})}).next(()=>h))}getDocumentsMatchingCollectionQuery(e,n,s,a){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(h=>(u=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,u,a))).next(h=>{u.forEach((g,v)=>{const w=v.getKey();h.get(w)===null&&(h=h.insert(w,Ft.newInvalidDocument(w)))});let m=na();return h.forEach((g,v)=>{const w=u.get(g);w!==void 0&&la(w.mutation,v,on.empty(),gt.now()),Tu(n,v)&&(m=m.insert(g,v))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,n){return W.resolve(this.Tr.get(n))}saveBundleMetadata(e,n){return this.Tr.set(n.id,function(a){return{id:a.id,version:a.version,createTime:Wn(a.createTime)}}(n)),W.resolve()}getNamedQuery(e,n){return W.resolve(this.Ir.get(n))}saveNamedQuery(e,n){return this.Ir.set(n.name,function(a){return{name:a.name,query:T1(a.bundledQuery),readTime:Wn(a.readTime)}}(n)),W.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(){this.overlays=new nt(ye.comparator),this.Er=new Map}getOverlay(e,n){return W.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Fi();return W.forEach(n,a=>this.getOverlay(e,a).next(u=>{u!==null&&s.set(a,u)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((a,u)=>{this.Tt(e,n,u)}),W.resolve()}removeOverlaysForBatchId(e,n,s){const a=this.Er.get(s);return a!==void 0&&(a.forEach(u=>this.overlays=this.overlays.remove(u)),this.Er.delete(s)),W.resolve()}getOverlaysForCollection(e,n,s){const a=Fi(),u=n.length+1,h=new ye(n.child("")),m=this.overlays.getIteratorFrom(h);for(;m.hasNext();){const g=m.getNext().value,v=g.getKey();if(!n.isPrefixOf(v.path))break;v.path.length===u&&g.largestBatchId>s&&a.set(g.getKey(),g)}return W.resolve(a)}getOverlaysForCollectionGroup(e,n,s,a){let u=new nt((v,w)=>v-w);const h=this.overlays.getIterator();for(;h.hasNext();){const v=h.getNext().value;if(v.getKey().getCollectionGroup()===n&&v.largestBatchId>s){let w=u.get(v.largestBatchId);w===null&&(w=Fi(),u=u.insert(v.largestBatchId,w)),w.set(v.getKey(),v)}}const m=Fi(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((v,w)=>m.set(v,w)),!(m.size()>=a)););return W.resolve(m)}Tt(e,n,s){const a=this.overlays.get(s.key);if(a!==null){const h=this.Er.get(a.largestBatchId).delete(s.key);this.Er.set(a.largestBatchId,h)}this.overlays=this.overlays.insert(s.key,new Jw(n,s));let u=this.Er.get(n);u===void 0&&(u=ke(),this.Er.set(n,u)),this.Er.set(n,u.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1{constructor(){this.sessionToken=xt.EMPTY_BYTE_STRING}getSessionToken(e){return W.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,W.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(){this.dr=new yt(St.Ar),this.Rr=new yt(St.Vr)}isEmpty(){return this.dr.isEmpty()}addReference(e,n){const s=new St(e,n);this.dr=this.dr.add(s),this.Rr=this.Rr.add(s)}mr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.gr(new St(e,n))}pr(e,n){e.forEach(s=>this.removeReference(s,n))}yr(e){const n=new ye(new Je([])),s=new St(n,e),a=new St(n,e+1),u=[];return this.Rr.forEachInRange([s,a],h=>{this.gr(h),u.push(h.key)}),u}wr(){this.dr.forEach(e=>this.gr(e))}gr(e){this.dr=this.dr.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const n=new ye(new Je([])),s=new St(n,e),a=new St(n,e+1);let u=ke();return this.Rr.forEachInRange([s,a],h=>{u=u.add(h.key)}),u}containsKey(e){const n=new St(e,0),s=this.dr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class St{constructor(e,n){this.key=e,this.br=n}static Ar(e,n){return ye.comparator(e.key,n.key)||Ve(e.br,n.br)}static Vr(e,n){return Ve(e.br,n.br)||ye.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Dr=1,this.vr=new yt(St.Ar)}checkEmpty(e){return W.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,a){const u=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new Yw(u,n,s,a);this.mutationQueue.push(h);for(const m of a)this.vr=this.vr.add(new St(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return W.resolve(h)}lookupMutationBatch(e,n){return W.resolve(this.Cr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,a=this.Fr(s),u=a<0?0:a;return W.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return W.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return W.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new St(n,0),a=new St(n,Number.POSITIVE_INFINITY),u=[];return this.vr.forEachInRange([s,a],h=>{const m=this.Cr(h.br);u.push(m)}),W.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new yt(Ve);return n.forEach(a=>{const u=new St(a,0),h=new St(a,Number.POSITIVE_INFINITY);this.vr.forEachInRange([u,h],m=>{s=s.add(m.br)})}),W.resolve(this.Mr(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,a=s.length+1;let u=s;ye.isDocumentKey(u)||(u=u.child(""));const h=new St(new ye(u),0);let m=new yt(Ve);return this.vr.forEachWhile(g=>{const v=g.key.path;return!!s.isPrefixOf(v)&&(v.length===a&&(m=m.add(g.br)),!0)},h),W.resolve(this.Mr(m))}Mr(e){const n=[];return e.forEach(s=>{const a=this.Cr(s);a!==null&&n.push(a)}),n}removeMutationBatch(e,n){Be(this.Or(n.batchId,"removed")===0),this.mutationQueue.shift();let s=this.vr;return W.forEach(n.mutations,a=>{const u=new St(a.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.vr=s})}Ln(e){}containsKey(e,n){const s=new St(n,0),a=this.vr.firstAfterOrEqual(s);return W.resolve(n.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,W.resolve()}Or(e,n){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const n=this.Fr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(e){this.Nr=e,this.docs=function(){return new nt(ye.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,a=this.docs.get(s),u=a?a.size:0,h=this.Nr(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return W.resolve(s?s.document.mutableCopy():Ft.newInvalidDocument(n))}getEntries(e,n){let s=_r();return n.forEach(a=>{const u=this.docs.get(a);s=s.insert(a,u?u.document.mutableCopy():Ft.newInvalidDocument(a))}),W.resolve(s)}getDocumentsMatchingQuery(e,n,s,a){let u=_r();const h=n.path,m=new ye(h.child("")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:v,value:{document:w}}=g.getNext();if(!h.isPrefixOf(v.path))break;v.path.length>h.length+1||dw(hw(w),s)<=0||(a.has(w.key)||Tu(n,w))&&(u=u.insert(w.key,w.mutableCopy()))}return W.resolve(u)}getAllFromCollectionGroup(e,n,s,a){we()}Lr(e,n){return W.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new F1(this)}getSize(e){return W.resolve(this.size)}}class F1 extends k1{constructor(e){super(),this.hr=e}applyChanges(e){const n=[];return this.changes.forEach((s,a)=>{a.isValidDocument()?n.push(this.hr.addEntry(e,a)):this.hr.removeEntry(s)}),W.waitFor(n)}getFromCache(e,n){return this.hr.getEntry(e,n)}getAllFromCache(e,n){return this.hr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{constructor(e){this.persistence=e,this.Br=new Bi(n=>td(n),nd),this.lastRemoteSnapshotVersion=Te.min(),this.highestTargetId=0,this.kr=0,this.qr=new ud,this.targetCount=0,this.Qr=Hs.qn()}forEachTarget(e,n){return this.Br.forEach((s,a)=>n(a)),W.resolve()}getLastRemoteSnapshotVersion(e){return W.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return W.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),W.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.kr&&(this.kr=n),W.resolve()}Un(e){this.Br.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Qr=new Hs(n),this.highestTargetId=n),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,n){return this.Un(n),this.targetCount+=1,W.resolve()}updateTargetData(e,n){return this.Un(n),W.resolve()}removeTargetData(e,n){return this.Br.delete(n.target),this.qr.yr(n.targetId),this.targetCount-=1,W.resolve()}removeTargets(e,n,s){let a=0;const u=[];return this.Br.forEach((h,m)=>{m.sequenceNumber<=n&&s.get(m.targetId)===null&&(this.Br.delete(h),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),a++)}),W.waitFor(u).next(()=>a)}getTargetCount(e){return W.resolve(this.targetCount)}getTargetData(e,n){const s=this.Br.get(n)||null;return W.resolve(s)}addMatchingKeys(e,n,s){return this.qr.mr(n,s),W.resolve()}removeMatchingKeys(e,n,s){this.qr.pr(n,s);const a=this.persistence.referenceDelegate,u=[];return a&&n.forEach(h=>{u.push(a.markPotentiallyOrphaned(e,h))}),W.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this.qr.yr(n),W.resolve()}getMatchingKeysForTargetId(e,n){const s=this.qr.Sr(n);return W.resolve(s)}containsKey(e,n){return W.resolve(this.qr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy{constructor(e,n){this.Kr={},this.overlays={},this.$r=new yu(0),this.Ur=!1,this.Ur=!0,this.Wr=new L1,this.referenceDelegate=e(this),this.Gr=new U1(this),this.indexManager=new S1,this.remoteDocumentCache=function(a){return new M1(a)}(s=>this.referenceDelegate.zr(s)),this.serializer=new w1(n),this.jr=new D1(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new N1,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.Kr[e.toKey()];return s||(s=new O1(n,this.referenceDelegate),this.Kr[e.toKey()]=s),s}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,n,s){se("MemoryPersistence","Starting transaction:",e);const a=new z1(this.$r.next());return this.referenceDelegate.Hr(),s(a).next(u=>this.referenceDelegate.Jr(a).next(()=>u)).toPromise().then(u=>(a.raiseOnCommittedEvent(),u))}Yr(e,n){return W.or(Object.values(this.Kr).map(s=>()=>s.containsKey(e,n)))}}class z1 extends pw{constructor(e){super(),this.currentSequenceNumber=e}}class cd{constructor(e){this.persistence=e,this.Zr=new ud,this.Xr=null}static ei(e){return new cd(e)}get ti(){if(this.Xr)return this.Xr;throw we()}addReference(e,n,s){return this.Zr.addReference(s,n),this.ti.delete(s.toString()),W.resolve()}removeReference(e,n,s){return this.Zr.removeReference(s,n),this.ti.add(s.toString()),W.resolve()}markPotentiallyOrphaned(e,n){return this.ti.add(n.toString()),W.resolve()}removeTarget(e,n){this.Zr.yr(n.targetId).forEach(a=>this.ti.add(a.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(a=>{a.forEach(u=>this.ti.add(u.toString()))}).next(()=>s.removeTargetData(e,n))}Hr(){this.Xr=new Set}Jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return W.forEach(this.ti,s=>{const a=ye.fromPath(s);return this.ni(e,a).next(u=>{u||n.removeEntry(a,Te.min())})}).next(()=>(this.Xr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ni(e,n).next(s=>{s?this.ti.delete(n.toString()):this.ti.add(n.toString())})}zr(e){return 0}ni(e,n){return W.or([()=>W.resolve(this.Zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Yr(e,n)])}}class hu{constructor(e,n){this.persistence=e,this.ri=new Bi(s=>yw(s.path),(s,a)=>s.isEqual(a)),this.garbageCollector=P1(this,n)}static ei(e,n){return new hu(e,n)}Hr(){}Jr(e){return W.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}Xn(e){const n=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(a=>s+a))}nr(e){let n=0;return this.er(e,s=>{n++}).next(()=>n)}er(e,n){return W.forEach(this.ri,(s,a)=>this.ir(e,s,a).next(u=>u?W.resolve():n(a)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const a=this.persistence.getRemoteDocumentCache(),u=a.newChangeBuffer();return a.Lr(e,h=>this.ir(e,h,n).next(m=>{m||(s++,u.removeEntry(h,Te.min()))})).next(()=>u.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.ri.set(n,e.currentSequenceNumber),W.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.ri.set(s,e.currentSequenceNumber),W.resolve()}removeReference(e,n,s){return this.ri.set(s,e.currentSequenceNumber),W.resolve()}updateLimboDocument(e,n){return this.ri.set(n,e.currentSequenceNumber),W.resolve()}zr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Xl(e.data.value)),n}ir(e,n,s){return W.or([()=>this.persistence.Yr(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const a=this.ri.get(n);return W.resolve(a!==void 0&&a>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(e,n,s,a){this.targetId=e,this.fromCache=n,this.Wi=s,this.Gi=a}static zi(e,n){let s=ke(),a=ke();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}return new hd(e,n.fromCache,s,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return F0()?8:mw(O0())>0?6:4}()}initialize(e,n){this.Zi=e,this.indexManager=n,this.ji=!0}getDocumentsMatchingQuery(e,n,s,a){const u={result:null};return this.Xi(e,n).next(h=>{u.result=h}).next(()=>{if(!u.result)return this.es(e,n,a,s).next(h=>{u.result=h})}).next(()=>{if(u.result)return;const h=new b1;return this.ts(e,n,h).next(m=>{if(u.result=m,this.Hi)return this.ns(e,n,h,m.size)})}).next(()=>u.result)}ns(e,n,s,a){return s.documentReadCount<this.Ji?(Os()<=Oe.DEBUG&&se("QueryEngine","SDK will not create cache indexes for query:",Ms(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),W.resolve()):(Os()<=Oe.DEBUG&&se("QueryEngine","Query:",Ms(n),"scans",s.documentReadCount,"local documents and returns",a,"documents as results."),s.documentReadCount>this.Yi*a?(Os()<=Oe.DEBUG&&se("QueryEngine","The SDK decides to create cache indexes for query:",Ms(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Hn(n))):W.resolve())}Xi(e,n){if(_m(n))return W.resolve(null);let s=Hn(n);return this.indexManager.getIndexType(e,s).next(a=>a===0?null:(n.limit!==null&&a===1&&(n=Lh(n,null,"F"),s=Hn(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(u=>{const h=ke(...u);return this.Zi.getDocuments(e,h).next(m=>this.indexManager.getMinOffset(e,s).next(g=>{const v=this.rs(n,m);return this.ss(n,v,h,g.readTime)?this.Xi(e,Lh(n,null,"F")):this.os(e,v,n,g)}))})))}es(e,n,s,a){return _m(n)||a.isEqual(Te.min())?W.resolve(null):this.Zi.getDocuments(e,s).next(u=>{const h=this.rs(n,u);return this.ss(n,h,s,a)?W.resolve(null):(Os()<=Oe.DEBUG&&se("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Ms(n)),this.os(e,h,n,cw(a,-1)).next(m=>m))})}rs(e,n){let s=new yt(Ug(e));return n.forEach((a,u)=>{Tu(e,u)&&(s=s.add(u))}),s}ss(e,n,s,a){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(a)>0)}ts(e,n,s){return Os()<=Oe.DEBUG&&se("QueryEngine","Using full collection scan to execute query:",Ms(n)),this.Zi.getDocumentsMatchingQuery(e,n,ei.min(),s)}os(e,n,s,a){return this.Zi.getDocumentsMatchingQuery(e,s,a).next(u=>(n.forEach(h=>{u=u.insert(h.key,h)}),u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{constructor(e,n,s,a){this.persistence=e,this._s=n,this.serializer=a,this.us=new nt(Ve),this.cs=new Bi(u=>td(u),nd),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(s)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new V1(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.us))}}function $1(i,e,n,s){return new j1(i,e,n,s)}async function oy(i,e){const n=Se(i);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let a;return n.mutationQueue.getAllMutationBatches(s).next(u=>(a=u,n.Ps(e),n.mutationQueue.getAllMutationBatches(s))).next(u=>{const h=[],m=[];let g=ke();for(const v of a){h.push(v.batchId);for(const w of v.mutations)g=g.add(w.key)}for(const v of u){m.push(v.batchId);for(const w of v.mutations)g=g.add(w.key)}return n.localDocuments.getDocuments(s,g).next(v=>({Ts:v,removedBatchIds:h,addedBatchIds:m}))})})}function q1(i,e){const n=Se(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const a=e.batch.keys(),u=n.hs.newChangeBuffer({trackRemovals:!0});return function(m,g,v,w){const A=v.batch,R=A.keys();let L=W.resolve();return R.forEach(U=>{L=L.next(()=>w.getEntry(g,U)).next($=>{const b=v.docVersions.get(U);Be(b!==null),$.version.compareTo(b)<0&&(A.applyToRemoteDocument($,v),$.isValidDocument()&&($.setReadTime(v.commitVersion),w.addEntry($)))})}),L.next(()=>m.mutationQueue.removeMutationBatch(g,A))}(n,s,e,u).next(()=>u.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(m){let g=ke();for(let v=0;v<m.mutationResults.length;++v)m.mutationResults[v].transformResults.length>0&&(g=g.add(m.batch.mutations[v].key));return g}(e))).next(()=>n.localDocuments.getDocuments(s,a))})}function ay(i){const e=Se(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Gr.getLastRemoteSnapshotVersion(n))}function H1(i,e){const n=Se(i),s=e.snapshotVersion;let a=n.us;return n.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const h=n.hs.newChangeBuffer({trackRemovals:!0});a=n.us;const m=[];e.targetChanges.forEach((w,A)=>{const R=a.get(A);if(!R)return;m.push(n.Gr.removeMatchingKeys(u,w.removedDocuments,A).next(()=>n.Gr.addMatchingKeys(u,w.addedDocuments,A)));let L=R.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(A)!==null?L=L.withResumeToken(xt.EMPTY_BYTE_STRING,Te.min()).withLastLimboFreeSnapshotVersion(Te.min()):w.resumeToken.approximateByteSize()>0&&(L=L.withResumeToken(w.resumeToken,s)),a=a.insert(A,L),function($,b,Q){return $.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-$.snapshotVersion.toMicroseconds()>=3e8?!0:Q.addedDocuments.size+Q.modifiedDocuments.size+Q.removedDocuments.size>0}(R,L,w)&&m.push(n.Gr.updateTargetData(u,L))});let g=_r(),v=ke();if(e.documentUpdates.forEach(w=>{e.resolvedLimboDocuments.has(w)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(u,w))}),m.push(W1(u,h,e.documentUpdates).next(w=>{g=w.Is,v=w.Es})),!s.isEqual(Te.min())){const w=n.Gr.getLastRemoteSnapshotVersion(u).next(A=>n.Gr.setTargetsMetadata(u,u.currentSequenceNumber,s));m.push(w)}return W.waitFor(m).next(()=>h.apply(u)).next(()=>n.localDocuments.getLocalViewOfDocuments(u,g,v)).next(()=>g)}).then(u=>(n.us=a,u))}function W1(i,e,n){let s=ke(),a=ke();return n.forEach(u=>s=s.add(u)),e.getEntries(i,s).next(u=>{let h=_r();return n.forEach((m,g)=>{const v=u.get(m);g.isFoundDocument()!==v.isFoundDocument()&&(a=a.add(m)),g.isNoDocument()&&g.version.isEqual(Te.min())?(e.removeEntry(m,g.readTime),h=h.insert(m,g)):!v.isValidDocument()||g.version.compareTo(v.version)>0||g.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(g),h=h.insert(m,g)):se("LocalStore","Ignoring outdated watch update for ",m,". Current version:",v.version," Watch version:",g.version)}),{Is:h,Es:a}})}function Q1(i,e){const n=Se(i);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function K1(i,e){const n=Se(i);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let a;return n.Gr.getTargetData(s,e).next(u=>u?(a=u,W.resolve(a)):n.Gr.allocateTargetId(s).next(h=>(a=new Kr(e,h,"TargetPurposeListen",s.currentSequenceNumber),n.Gr.addTargetData(s,a).next(()=>a))))}).then(s=>{const a=n.us.get(s.targetId);return(a===null||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(n.us=n.us.insert(s.targetId,s),n.cs.set(e,s.targetId)),s})}async function zh(i,e,n){const s=Se(i),a=s.us.get(e),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,h=>s.persistence.referenceDelegate.removeTarget(h,a))}catch(h){if(!Zs(h))throw h;se("LocalStore",`Failed to update sequence numbers for target ${e}: ${h}`)}s.us=s.us.remove(e),s.cs.delete(a.target)}function Vm(i,e,n){const s=Se(i);let a=Te.min(),u=ke();return s.persistence.runTransaction("Execute query","readwrite",h=>function(g,v,w){const A=Se(g),R=A.cs.get(w);return R!==void 0?W.resolve(A.us.get(R)):A.Gr.getTargetData(v,w)}(s,h,Hn(e)).next(m=>{if(m)return a=m.lastLimboFreeSnapshotVersion,s.Gr.getMatchingKeysForTargetId(h,m.targetId).next(g=>{u=g})}).next(()=>s._s.getDocumentsMatchingQuery(h,e,n?a:Te.min(),n?u:ke())).next(m=>(G1(s,Mw(e),m),{documents:m,ds:u})))}function G1(i,e,n){let s=i.ls.get(e)||Te.min();n.forEach((a,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)}),i.ls.set(e,s)}class Dm{constructor(){this.activeTargetIds=jw()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class X1{constructor(){this._o=new Dm,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,n,s){this.ao[e]=n}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new Dm,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){se("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){se("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wl=null;function vh(){return Wl===null?Wl=function(){return 268435456+Math.round(2147483648*Math.random())}():Wl++,"0x"+Wl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ot="WebChannelConnection";class eT extends class{get Co(){return!1}constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const s=n.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),u=encodeURIComponent(this.databaseId.database);this.Fo=s+"://"+n.host,this.Mo=`projects/${a}/databases/${u}`,this.xo=this.databaseId.database==="(default)"?`project_id=${a}`:`project_id=${a}&database_id=${u}`}Oo(n,s,a,u,h){const m=vh(),g=this.No(n,s.toUriEncodedString());se("RestConnection",`Sending RPC '${n}' ${m}:`,g,a);const v={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Lo(v,u,h),this.Bo(n,g,v,a).then(w=>(se("RestConnection",`Received RPC '${n}' ${m}: `,w),w),w=>{throw Bs("RestConnection",`RPC '${n}' ${m} failed with error: `,w,"url: ",g,"request:",a),w})}ko(n,s,a,u,h,m){return this.Oo(n,s,a,u,h)}Lo(n,s,a){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ys}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach((u,h)=>n[h]=u),a&&a.headers.forEach((u,h)=>n[h]=u)}No(n,s){const a=J1[n];return`${this.Fo}/v1/${s}:${a}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Bo(e,n,s,a){const u=vh();return new Promise((h,m)=>{const g=new wg;g.setWithCredentials(!0),g.listenOnce(Tg.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case Gl.NO_ERROR:const w=g.getResponseJson();se(Ot,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(w)),h(w);break;case Gl.TIMEOUT:se(Ot,`RPC '${e}' ${u} timed out`),m(new he(Y.DEADLINE_EXCEEDED,"Request time out"));break;case Gl.HTTP_ERROR:const A=g.getStatus();if(se(Ot,`RPC '${e}' ${u} failed with status:`,A,"response text:",g.getResponseText()),A>0){let R=g.getResponseJson();Array.isArray(R)&&(R=R[0]);const L=R==null?void 0:R.error;if(L&&L.status&&L.message){const U=function(b){const Q=b.toLowerCase().replace(/_/g,"-");return Object.values(Y).indexOf(Q)>=0?Q:Y.UNKNOWN}(L.status);m(new he(U,L.message))}else m(new he(Y.UNKNOWN,"Server responded with status "+g.getStatus()))}else m(new he(Y.UNAVAILABLE,"Connection failed."));break;default:we()}}finally{se(Ot,`RPC '${e}' ${u} completed.`)}});const v=JSON.stringify(a);se(Ot,`RPC '${e}' ${u} sending request:`,a),g.send(n,"POST",v,s,15)})}qo(e,n,s){const a=vh(),u=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=Rg(),m=Ig(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(g.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(g.useFetchStreams=!0),this.Lo(g.initMessageHeaders,n,s),g.encodeInitMessageHeaders=!0;const w=u.join("");se(Ot,`Creating RPC '${e}' stream ${a}: ${w}`,g);const A=h.createWebChannel(w,g);let R=!1,L=!1;const U=new Z1({Eo:b=>{L?se(Ot,`Not sending because RPC '${e}' stream ${a} is closed:`,b):(R||(se(Ot,`Opening RPC '${e}' stream ${a} transport.`),A.open(),R=!0),se(Ot,`RPC '${e}' stream ${a} sending:`,b),A.send(b))},Ao:()=>A.close()}),$=(b,Q,K)=>{b.listen(Q,re=>{try{K(re)}catch(ce){setTimeout(()=>{throw ce},0)}})};return $(A,ta.EventType.OPEN,()=>{L||(se(Ot,`RPC '${e}' stream ${a} transport opened.`),U.So())}),$(A,ta.EventType.CLOSE,()=>{L||(L=!0,se(Ot,`RPC '${e}' stream ${a} transport closed`),U.Do())}),$(A,ta.EventType.ERROR,b=>{L||(L=!0,Bs(Ot,`RPC '${e}' stream ${a} transport errored:`,b),U.Do(new he(Y.UNAVAILABLE,"The operation could not be completed")))}),$(A,ta.EventType.MESSAGE,b=>{var Q;if(!L){const K=b.data[0];Be(!!K);const re=K,ce=(re==null?void 0:re.error)||((Q=re[0])===null||Q===void 0?void 0:Q.error);if(ce){se(Ot,`RPC '${e}' stream ${a} received error:`,ce);const Ce=ce.status;let Ie=function(C){const k=ut[C];if(k!==void 0)return Gg(k)}(Ce),x=ce.message;Ie===void 0&&(Ie=Y.INTERNAL,x="Unknown error status: "+Ce+" with message "+ce.message),L=!0,U.Do(new he(Ie,x)),A.close()}else se(Ot,`RPC '${e}' stream ${a} received:`,K),U.vo(K)}}),$(m,Sg.STAT_EVENT,b=>{b.stat===kh.PROXY?se(Ot,`RPC '${e}' stream ${a} detected buffering proxy`):b.stat===kh.NOPROXY&&se(Ot,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{U.bo()},0),U}}function _h(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cu(i){return new a1(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ly{constructor(e,n,s=1e3,a=1.5,u=6e4){this.li=e,this.timerId=n,this.Qo=s,this.Ko=a,this.$o=u,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const n=Math.floor(this.Uo+this.Ho()),s=Math.max(0,Date.now()-this.Go),a=Math.max(0,n-s);a>0&&se("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Uo} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,a,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(e,n,s,a,u,h,m,g){this.li=e,this.Yo=s,this.Zo=a,this.connection=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new ly(e,n)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,n){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():n&&n.code===Y.RESOURCE_EXHAUSTED?(vr(n.toString()),vr("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):n&&n.code===Y.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(n)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),n=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,a])=>{this.Xo===n&&this.I_(s,a)},s=>{e(()=>{const a=new he(Y.UNKNOWN,"Fetching auth token failed: "+s.message);return this.E_(a)})})}I_(e,n){const s=this.T_(this.Xo);this.stream=this.d_(e,n),this.stream.Ro(()=>{s(()=>this.listener.Ro())}),this.stream.mo(()=>{s(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(a=>{s(()=>this.E_(a))}),this.stream.onMessage(a=>{s(()=>++this.n_==1?this.A_(a):this.onNext(a))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}E_(e){return se("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return n=>{this.li.enqueueAndForget(()=>this.Xo===e?n():(se("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class tT extends uy{constructor(e,n,s,a,u,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,a,h),this.serializer=u}d_(e,n){return this.connection.qo("Listen",e,n)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const n=c1(this.serializer,e),s=function(u){if(!("targetChange"in u))return Te.min();const h=u.targetChange;return h.targetIds&&h.targetIds.length?Te.min():h.readTime?Wn(h.readTime):Te.min()}(e);return this.listener.R_(n,s)}V_(e){const n={};n.database=Uh(this.serializer),n.addTarget=function(u,h){let m;const g=h.target;if(m=Nh(g)?{documents:f1(u,g)}:{query:p1(u,g).ct},m.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){m.resumeToken=Jg(u,h.resumeToken);const v=Oh(u,h.expectedCount);v!==null&&(m.expectedCount=v)}else if(h.snapshotVersion.compareTo(Te.min())>0){m.readTime=cu(u,h.snapshotVersion.toTimestamp());const v=Oh(u,h.expectedCount);v!==null&&(m.expectedCount=v)}return m}(this.serializer,e);const s=g1(this.serializer,e);s&&(n.labels=s),this.c_(n)}m_(e){const n={};n.database=Uh(this.serializer),n.removeTarget=e,this.c_(n)}}class nT extends uy{constructor(e,n,s,a,u,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,a,h),this.serializer=u}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}d_(e,n){return this.connection.qo("Write",e,n)}A_(e){return Be(!!e.streamToken),this.lastStreamToken=e.streamToken,Be(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){Be(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const n=d1(e.writeResults,e.commitTime),s=Wn(e.commitTime);return this.listener.y_(s,n)}w_(){const e={};e.database=Uh(this.serializer),this.c_(e)}g_(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>h1(this.serializer,s))};this.c_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT extends class{}{constructor(e,n,s,a){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=a,this.S_=!1}b_(){if(this.S_)throw new he(Y.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,n,s,a){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,h])=>this.connection.Oo(e,Mh(n,s),a,u,h)).catch(u=>{throw u.name==="FirebaseError"?(u.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new he(Y.UNKNOWN,u.toString())})}ko(e,n,s,a,u){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,m])=>this.connection.ko(e,Mh(n,s),a,h,m,u)).catch(h=>{throw h.name==="FirebaseError"?(h.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new he(Y.UNKNOWN,h.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class iT{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(vr(n),this.C_=!1):se("OnlineStateTracker",n)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(e,n,s,a,u){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.L_=[],this.B_=new Map,this.k_=new Set,this.q_=[],this.Q_=u,this.Q_.uo(h=>{s.enqueueAndForget(async()=>{ji(this)&&(se("RemoteStore","Restarting streams for network reachability change."),await async function(g){const v=Se(g);v.k_.add(4),await Sa(v),v.K_.set("Unknown"),v.k_.delete(4),await Au(v)}(this))})}),this.K_=new iT(s,a)}}async function Au(i){if(ji(i))for(const e of i.q_)await e(!0)}async function Sa(i){for(const e of i.q_)await e(!1)}function cy(i,e){const n=Se(i);n.B_.has(e.targetId)||(n.B_.set(e.targetId,e),md(n)?pd(n):eo(n).s_()&&fd(n,e))}function dd(i,e){const n=Se(i),s=eo(n);n.B_.delete(e),s.s_()&&hy(n,e),n.B_.size===0&&(s.s_()?s.a_():ji(n)&&n.K_.set("Unknown"))}function fd(i,e){if(i.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Te.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}eo(i).V_(e)}function hy(i,e){i.U_.xe(e),eo(i).m_(e)}function pd(i){i.U_=new r1({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>i.B_.get(e)||null,nt:()=>i.datastore.serializer.databaseId}),eo(i).start(),i.K_.F_()}function md(i){return ji(i)&&!eo(i).i_()&&i.B_.size>0}function ji(i){return Se(i).k_.size===0}function dy(i){i.U_=void 0}async function oT(i){i.K_.set("Online")}async function aT(i){i.B_.forEach((e,n)=>{fd(i,e)})}async function lT(i,e){dy(i),md(i)?(i.K_.O_(e),pd(i)):i.K_.set("Unknown")}async function uT(i,e,n){if(i.K_.set("Online"),e instanceof Yg&&e.state===2&&e.cause)try{await async function(a,u){const h=u.cause;for(const m of u.targetIds)a.B_.has(m)&&(await a.remoteSyncer.rejectListen(m,h),a.B_.delete(m),a.U_.removeTarget(m))}(i,e)}catch(s){se("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),await du(i,s)}else if(e instanceof Zl?i.U_.$e(e):e instanceof Xg?i.U_.Je(e):i.U_.Ge(e),!n.isEqual(Te.min()))try{const s=await ay(i.localStore);n.compareTo(s)>=0&&await function(u,h){const m=u.U_.it(h);return m.targetChanges.forEach((g,v)=>{if(g.resumeToken.approximateByteSize()>0){const w=u.B_.get(v);w&&u.B_.set(v,w.withResumeToken(g.resumeToken,h))}}),m.targetMismatches.forEach((g,v)=>{const w=u.B_.get(g);if(!w)return;u.B_.set(g,w.withResumeToken(xt.EMPTY_BYTE_STRING,w.snapshotVersion)),hy(u,g);const A=new Kr(w.target,g,v,w.sequenceNumber);fd(u,A)}),u.remoteSyncer.applyRemoteEvent(m)}(i,n)}catch(s){se("RemoteStore","Failed to raise snapshot:",s),await du(i,s)}}async function du(i,e,n){if(!Zs(e))throw e;i.k_.add(1),await Sa(i),i.K_.set("Offline"),n||(n=()=>ay(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{se("RemoteStore","Retrying IndexedDB access"),await n(),i.k_.delete(1),await Au(i)})}function fy(i,e){return e().catch(n=>du(i,n,e))}async function Pu(i){const e=Se(i),n=ii(e);let s=e.L_.length>0?e.L_[e.L_.length-1].batchId:-1;for(;cT(e);)try{const a=await Q1(e.localStore,s);if(a===null){e.L_.length===0&&n.a_();break}s=a.batchId,hT(e,a)}catch(a){await du(e,a)}py(e)&&my(e)}function cT(i){return ji(i)&&i.L_.length<10}function hT(i,e){i.L_.push(e);const n=ii(i);n.s_()&&n.f_&&n.g_(e.mutations)}function py(i){return ji(i)&&!ii(i).i_()&&i.L_.length>0}function my(i){ii(i).start()}async function dT(i){ii(i).w_()}async function fT(i){const e=ii(i);for(const n of i.L_)e.g_(n.mutations)}async function pT(i,e,n){const s=i.L_.shift(),a=od.from(s,e,n);await fy(i,()=>i.remoteSyncer.applySuccessfulWrite(a)),await Pu(i)}async function mT(i,e){e&&ii(i).f_&&await async function(s,a){if(function(h){return e1(h)&&h!==Y.ABORTED}(a.code)){const u=s.L_.shift();ii(s).__(),await fy(s,()=>s.remoteSyncer.rejectFailedWrite(u.batchId,a)),await Pu(s)}}(i,e),py(i)&&my(i)}async function Lm(i,e){const n=Se(i);n.asyncQueue.verifyOperationInProgress(),se("RemoteStore","RemoteStore received new credentials");const s=ji(n);n.k_.add(3),await Sa(n),s&&n.K_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.k_.delete(3),await Au(n)}async function gT(i,e){const n=Se(i);e?(n.k_.delete(2),await Au(n)):e||(n.k_.add(2),await Sa(n),n.K_.set("Unknown"))}function eo(i){return i.W_||(i.W_=function(n,s,a){const u=Se(n);return u.b_(),new tT(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,a)}(i.datastore,i.asyncQueue,{Ro:oT.bind(null,i),mo:aT.bind(null,i),po:lT.bind(null,i),R_:uT.bind(null,i)}),i.q_.push(async e=>{e?(i.W_.__(),md(i)?pd(i):i.K_.set("Unknown")):(await i.W_.stop(),dy(i))})),i.W_}function ii(i){return i.G_||(i.G_=function(n,s,a){const u=Se(n);return u.b_(),new nT(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,a)}(i.datastore,i.asyncQueue,{Ro:()=>Promise.resolve(),mo:dT.bind(null,i),po:mT.bind(null,i),p_:fT.bind(null,i),y_:pT.bind(null,i)}),i.q_.push(async e=>{e?(i.G_.__(),await Pu(i)):(await i.G_.stop(),i.L_.length>0&&(se("RemoteStore",`Stopping write stream with ${i.L_.length} pending writes`),i.L_=[]))})),i.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(e,n,s,a,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=a,this.removalCallback=u,this.deferred=new gr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,a,u){const h=Date.now()+s,m=new gd(e,n,h,a,u);return m.start(s),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(Y.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function yd(i,e){if(vr("AsyncQueue",`${e}: ${i}`),Zs(i))return new he(Y.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{static emptySet(e){return new bs(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||ye.comparator(n.key,s.key):(n,s)=>ye.comparator(n.key,s.key),this.keyedMap=na(),this.sortedSet=new nt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof bs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const a=n.getNext().key,u=s.getNext().key;if(!a.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new bs;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(){this.z_=new nt(ye.comparator)}track(e){const n=e.doc.key,s=this.z_.get(n);s?e.type!==0&&s.type===3?this.z_=this.z_.insert(n,e):e.type===3&&s.type!==1?this.z_=this.z_.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.z_=this.z_.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.z_=this.z_.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.z_=this.z_.remove(n):e.type===1&&s.type===2?this.z_=this.z_.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.z_=this.z_.insert(n,{type:2,doc:e.doc}):we():this.z_=this.z_.insert(n,e)}j_(){const e=[];return this.z_.inorderTraversal((n,s)=>{e.push(s)}),e}}class Ws{constructor(e,n,s,a,u,h,m,g,v){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=v}static fromInitialDocuments(e,n,s,a,u){const h=[];return n.forEach(m=>{h.push({type:0,doc:m})}),new Ws(e,n,bs.emptySet(n),h,s,a,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&wu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let a=0;a<n.length;a++)if(n[a].type!==s[a].type||!n[a].doc.isEqual(s[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class vT{constructor(){this.queries=Mm(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(n,s){const a=Se(n),u=a.queries;a.queries=Mm(),u.forEach((h,m)=>{for(const g of m.J_)g.onError(s)})})(this,new he(Y.ABORTED,"Firestore shutting down"))}}function Mm(){return new Bi(i=>Fg(i),wu)}async function gy(i,e){const n=Se(i);let s=3;const a=e.query;let u=n.queries.get(a);u?!u.Y_()&&e.Z_()&&(s=2):(u=new yT,s=e.Z_()?0:1);try{switch(s){case 0:u.H_=await n.onListen(a,!0);break;case 1:u.H_=await n.onListen(a,!1);break;case 2:await n.onFirstRemoteStoreListen(a)}}catch(h){const m=yd(h,`Initialization of query '${Ms(e.query)}' failed`);return void e.onError(m)}n.queries.set(a,u),u.J_.push(e),e.ea(n.onlineState),u.H_&&e.ta(u.H_)&&vd(n)}async function yy(i,e){const n=Se(i),s=e.query;let a=3;const u=n.queries.get(s);if(u){const h=u.J_.indexOf(e);h>=0&&(u.J_.splice(h,1),u.J_.length===0?a=e.Z_()?0:1:!u.Y_()&&e.Z_()&&(a=2))}switch(a){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function _T(i,e){const n=Se(i);let s=!1;for(const a of e){const u=a.query,h=n.queries.get(u);if(h){for(const m of h.J_)m.ta(a)&&(s=!0);h.H_=a}}s&&vd(n)}function ET(i,e,n){const s=Se(i),a=s.queries.get(e);if(a)for(const u of a.J_)u.onError(n);s.queries.delete(e)}function vd(i){i.X_.forEach(e=>{e.next()})}var bh,Fm;(Fm=bh||(bh={})).na="default",Fm.Cache="cache";class vy{constructor(e,n,s){this.query=e,this.ra=n,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=s||{}}ta(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)a.type!==3&&s.push(a);e=new Ws(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ia?this.oa(e)&&(this.ra.next(e),n=!0):this._a(e,this.onlineState)&&(this.aa(e),n=!0),this.sa=e,n}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let n=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),n=!0),n}_a(e,n){if(!e.fromCache||!this.Z_())return!0;const s=n!=="Offline";return(!this.options.ua||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const n=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}aa(e){e=Ws.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==bh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y{constructor(e){this.key=e}}class Ey{constructor(e){this.key=e}}class wT{constructor(e,n){this.query=e,this.da=n,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=ke(),this.mutatedKeys=ke(),this.Va=Ug(e),this.ma=new bs(this.Va)}get fa(){return this.da}ga(e,n){const s=n?n.pa:new Om,a=n?n.ma:this.ma;let u=n?n.mutatedKeys:this.mutatedKeys,h=a,m=!1;const g=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,v=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((w,A)=>{const R=a.get(w),L=Tu(this.query,A)?A:null,U=!!R&&this.mutatedKeys.has(R.key),$=!!L&&(L.hasLocalMutations||this.mutatedKeys.has(L.key)&&L.hasCommittedMutations);let b=!1;R&&L?R.data.isEqual(L.data)?U!==$&&(s.track({type:3,doc:L}),b=!0):this.ya(R,L)||(s.track({type:2,doc:L}),b=!0,(g&&this.Va(L,g)>0||v&&this.Va(L,v)<0)&&(m=!0)):!R&&L?(s.track({type:0,doc:L}),b=!0):R&&!L&&(s.track({type:1,doc:R}),b=!0,(g||v)&&(m=!0)),b&&(L?(h=h.add(L),u=$?u.add(w):u.delete(w)):(h=h.delete(w),u=u.delete(w)))}),this.query.limit!==null)for(;h.size>this.query.limit;){const w=this.query.limitType==="F"?h.last():h.first();h=h.delete(w.key),u=u.delete(w.key),s.track({type:1,doc:w})}return{ma:h,pa:s,ss:m,mutatedKeys:u}}ya(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,a){const u=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const h=e.pa.j_();h.sort((w,A)=>function(L,U){const $=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we()}};return $(L)-$(U)}(w.type,A.type)||this.Va(w.doc,A.doc)),this.wa(s),a=a!=null&&a;const m=n&&!a?this.Sa():[],g=this.Ra.size===0&&this.current&&!a?1:0,v=g!==this.Aa;return this.Aa=g,h.length!==0||v?{snapshot:new Ws(this.query,e.ma,u,h,e.mutatedKeys,g===0,v,!1,!!s&&s.resumeToken.approximateByteSize()>0),ba:m}:{ba:m}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new Om,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.da.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(n=>this.da=this.da.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.da=this.da.delete(n)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=ke(),this.ma.forEach(s=>{this.Da(s.key)&&(this.Ra=this.Ra.add(s.key))});const n=[];return e.forEach(s=>{this.Ra.has(s)||n.push(new Ey(s))}),this.Ra.forEach(s=>{e.has(s)||n.push(new _y(s))}),n}va(e){this.da=e.ds,this.Ra=ke();const n=this.ga(e.documents);return this.applyChanges(n,!0)}Ca(){return Ws.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class TT{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class ST{constructor(e){this.key=e,this.Fa=!1}}class IT{constructor(e,n,s,a,u,h){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=a,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.Ma={},this.xa=new Bi(m=>Fg(m),wu),this.Oa=new Map,this.Na=new Set,this.La=new nt(ye.comparator),this.Ba=new Map,this.ka=new ud,this.qa={},this.Qa=new Map,this.Ka=Hs.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function RT(i,e,n=!0){const s=Cy(i);let a;const u=s.xa.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),a=u.view.Ca()):a=await wy(s,e,n,!0),a}async function CT(i,e){const n=Cy(i);await wy(n,e,!0,!1)}async function wy(i,e,n,s){const a=await K1(i.localStore,Hn(e)),u=a.targetId,h=i.sharedClientState.addLocalQueryTarget(u,n);let m;return s&&(m=await AT(i,e,u,h==="current",a.resumeToken)),i.isPrimaryClient&&n&&cy(i.remoteStore,a),m}async function AT(i,e,n,s,a){i.Ua=(A,R,L)=>async function($,b,Q,K){let re=b.view.ga(Q);re.ss&&(re=await Vm($.localStore,b.query,!1).then(({documents:x})=>b.view.ga(x,re)));const ce=K&&K.targetChanges.get(b.targetId),Ce=K&&K.targetMismatches.get(b.targetId)!=null,Ie=b.view.applyChanges(re,$.isPrimaryClient,ce,Ce);return zm($,b.targetId,Ie.ba),Ie.snapshot}(i,A,R,L);const u=await Vm(i.localStore,e,!0),h=new wT(e,u.ds),m=h.ga(u.documents),g=Ta.createSynthesizedTargetChangeForCurrentChange(n,s&&i.onlineState!=="Offline",a),v=h.applyChanges(m,i.isPrimaryClient,g);zm(i,n,v.ba);const w=new TT(e,n,h);return i.xa.set(e,w),i.Oa.has(n)?i.Oa.get(n).push(e):i.Oa.set(n,[e]),v.snapshot}async function PT(i,e,n){const s=Se(i),a=s.xa.get(e),u=s.Oa.get(a.targetId);if(u.length>1)return s.Oa.set(a.targetId,u.filter(h=>!wu(h,e))),void s.xa.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(a.targetId),s.sharedClientState.isActiveQueryTarget(a.targetId)||await zh(s.localStore,a.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(a.targetId),n&&dd(s.remoteStore,a.targetId),Bh(s,a.targetId)}).catch(Js)):(Bh(s,a.targetId),await zh(s.localStore,a.targetId,!0))}async function kT(i,e){const n=Se(i),s=n.xa.get(e),a=n.Oa.get(s.targetId);n.isPrimaryClient&&a.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),dd(n.remoteStore,s.targetId))}async function xT(i,e,n){const s=FT(i);try{const a=await function(h,m){const g=Se(h),v=gt.now(),w=m.reduce((L,U)=>L.add(U.key),ke());let A,R;return g.persistence.runTransaction("Locally write mutations","readwrite",L=>{let U=_r(),$=ke();return g.hs.getEntries(L,w).next(b=>{U=b,U.forEach((Q,K)=>{K.isValidDocument()||($=$.add(Q))})}).next(()=>g.localDocuments.getOverlayedDocuments(L,U)).next(b=>{A=b;const Q=[];for(const K of m){const re=Gw(K,A.get(K.key).overlayedDocument);re!=null&&Q.push(new oi(K.key,re,xg(re.value.mapValue),Nn.exists(!0)))}return g.mutationQueue.addMutationBatch(L,v,Q,m)}).next(b=>{R=b;const Q=b.applyToLocalDocumentSet(A,$);return g.documentOverlayCache.saveOverlays(L,b.batchId,Q)})}).then(()=>({batchId:R.batchId,changes:bg(A)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),function(h,m,g){let v=h.qa[h.currentUser.toKey()];v||(v=new nt(Ve)),v=v.insert(m,g),h.qa[h.currentUser.toKey()]=v}(s,a.batchId,n),await Ia(s,a.changes),await Pu(s.remoteStore)}catch(a){const u=yd(a,"Failed to persist write");n.reject(u)}}async function Ty(i,e){const n=Se(i);try{const s=await H1(n.localStore,e);e.targetChanges.forEach((a,u)=>{const h=n.Ba.get(u);h&&(Be(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?h.Fa=!0:a.modifiedDocuments.size>0?Be(h.Fa):a.removedDocuments.size>0&&(Be(h.Fa),h.Fa=!1))}),await Ia(n,s,e)}catch(s){await Js(s)}}function Um(i,e,n){const s=Se(i);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const a=[];s.xa.forEach((u,h)=>{const m=h.view.ea(e);m.snapshot&&a.push(m.snapshot)}),function(h,m){const g=Se(h);g.onlineState=m;let v=!1;g.queries.forEach((w,A)=>{for(const R of A.J_)R.ea(m)&&(v=!0)}),v&&vd(g)}(s.eventManager,e),a.length&&s.Ma.R_(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function VT(i,e,n){const s=Se(i);s.sharedClientState.updateQueryState(e,"rejected",n);const a=s.Ba.get(e),u=a&&a.key;if(u){let h=new nt(ye.comparator);h=h.insert(u,Ft.newNoDocument(u,Te.min()));const m=ke().add(u),g=new Ru(Te.min(),new Map,new nt(Ve),h,m);await Ty(s,g),s.La=s.La.remove(u),s.Ba.delete(e),_d(s)}else await zh(s.localStore,e,!1).then(()=>Bh(s,e,n)).catch(Js)}async function DT(i,e){const n=Se(i),s=e.batch.batchId;try{const a=await q1(n.localStore,e);Iy(n,s,null),Sy(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Ia(n,a)}catch(a){await Js(a)}}async function NT(i,e,n){const s=Se(i);try{const a=await function(h,m){const g=Se(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let w;return g.mutationQueue.lookupMutationBatch(v,m).next(A=>(Be(A!==null),w=A.keys(),g.mutationQueue.removeMutationBatch(v,A))).next(()=>g.mutationQueue.performConsistencyCheck(v)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(v,w,m)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,w)).next(()=>g.localDocuments.getDocuments(v,w))})}(s.localStore,e);Iy(s,e,n),Sy(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Ia(s,a)}catch(a){await Js(a)}}function Sy(i,e){(i.Qa.get(e)||[]).forEach(n=>{n.resolve()}),i.Qa.delete(e)}function Iy(i,e,n){const s=Se(i);let a=s.qa[s.currentUser.toKey()];if(a){const u=a.get(e);u&&(n?u.reject(n):u.resolve(),a=a.remove(e)),s.qa[s.currentUser.toKey()]=a}}function Bh(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.Oa.get(e))i.xa.delete(s),n&&i.Ma.Wa(s,n);i.Oa.delete(e),i.isPrimaryClient&&i.ka.yr(e).forEach(s=>{i.ka.containsKey(s)||Ry(i,s)})}function Ry(i,e){i.Na.delete(e.path.canonicalString());const n=i.La.get(e);n!==null&&(dd(i.remoteStore,n),i.La=i.La.remove(e),i.Ba.delete(n),_d(i))}function zm(i,e,n){for(const s of n)s instanceof _y?(i.ka.addReference(s.key,e),LT(i,s)):s instanceof Ey?(se("SyncEngine","Document no longer in limbo: "+s.key),i.ka.removeReference(s.key,e),i.ka.containsKey(s.key)||Ry(i,s.key)):we()}function LT(i,e){const n=e.key,s=n.path.canonicalString();i.La.get(n)||i.Na.has(s)||(se("SyncEngine","New document in limbo: "+n),i.Na.add(s),_d(i))}function _d(i){for(;i.Na.size>0&&i.La.size<i.maxConcurrentLimboResolutions;){const e=i.Na.values().next().value;i.Na.delete(e);const n=new ye(Je.fromString(e)),s=i.Ka.next();i.Ba.set(s,new ST(n)),i.La=i.La.insert(n,s),cy(i.remoteStore,new Kr(Hn(rd(n.path)),s,"TargetPurposeLimboResolution",yu.oe))}}async function Ia(i,e,n){const s=Se(i),a=[],u=[],h=[];s.xa.isEmpty()||(s.xa.forEach((m,g)=>{h.push(s.Ua(g,e,n).then(v=>{var w;if((v||n)&&s.isPrimaryClient){const A=v?!v.fromCache:(w=n==null?void 0:n.targetChanges.get(g.targetId))===null||w===void 0?void 0:w.current;s.sharedClientState.updateQueryState(g.targetId,A?"current":"not-current")}if(v){a.push(v);const A=hd.zi(g.targetId,v);u.push(A)}}))}),await Promise.all(h),s.Ma.R_(a),await async function(g,v){const w=Se(g);try{await w.persistence.runTransaction("notifyLocalViewChanges","readwrite",A=>W.forEach(v,R=>W.forEach(R.Wi,L=>w.persistence.referenceDelegate.addReference(A,R.targetId,L)).next(()=>W.forEach(R.Gi,L=>w.persistence.referenceDelegate.removeReference(A,R.targetId,L)))))}catch(A){if(!Zs(A))throw A;se("LocalStore","Failed to update sequence numbers: "+A)}for(const A of v){const R=A.targetId;if(!A.fromCache){const L=w.us.get(R),U=L.snapshotVersion,$=L.withLastLimboFreeSnapshotVersion(U);w.us=w.us.insert(R,$)}}}(s.localStore,u))}async function OT(i,e){const n=Se(i);if(!n.currentUser.isEqual(e)){se("SyncEngine","User change. New user:",e.toKey());const s=await oy(n.localStore,e);n.currentUser=e,function(u,h){u.Qa.forEach(m=>{m.forEach(g=>{g.reject(new he(Y.CANCELLED,h))})}),u.Qa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Ia(n,s.Ts)}}function MT(i,e){const n=Se(i),s=n.Ba.get(e);if(s&&s.Fa)return ke().add(s.key);{let a=ke();const u=n.Oa.get(e);if(!u)return a;for(const h of u){const m=n.xa.get(h);a=a.unionWith(m.view.fa)}return a}}function Cy(i){const e=Se(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ty.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=MT.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=VT.bind(null,e),e.Ma.R_=_T.bind(null,e.eventManager),e.Ma.Wa=ET.bind(null,e.eventManager),e}function FT(i){const e=Se(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=DT.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=NT.bind(null,e),e}class fu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Cu(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,n){return null}Ya(e,n){return null}Ha(e){return $1(this.persistence,new B1,e.initialUser,this.serializer)}ja(e){return new sy(cd.ei,this.serializer)}za(e){return new X1}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}fu.provider={build:()=>new fu};class UT extends fu{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,n){Be(this.persistence.referenceDelegate instanceof hu);const s=this.persistence.referenceDelegate.garbageCollector;return new C1(s,e.asyncQueue,n)}ja(e){const n=this.cacheSizeBytes!==void 0?Xt.withCacheSize(this.cacheSizeBytes):Xt.DEFAULT;return new sy(s=>hu.ei(s,n),this.serializer)}}class jh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Um(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=OT.bind(null,this.syncEngine),await gT(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new vT}()}createDatastore(e){const n=Cu(e.databaseInfo.databaseId),s=function(u){return new eT(u)}(e.databaseInfo);return function(u,h,m,g){return new rT(u,h,m,g)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,a,u,h,m){return new sT(s,a,u,h,m)}(this.localStore,this.datastore,e.asyncQueue,n=>Um(this.syncEngine,n,0),function(){return Nm.p()?new Nm:new Y1}())}createSyncEngine(e,n){return function(a,u,h,m,g,v,w){const A=new IT(a,u,h,m,g,v);return w&&(A.$a=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(a){const u=Se(a);se("RemoteStore","RemoteStore shutting down."),u.k_.add(5),await Sa(u),u.Q_.shutdown(),u.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}jh.provider={build:()=>new jh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ay{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):vr("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(e,n,s,a,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=a,this.user=Mt.UNAUTHENTICATED,this.clientId=Ag.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,async h=>{se("FirestoreClient","Received user=",h.uid),await this.authCredentialListener(h),this.user=h}),this.appCheckCredentials.start(s,h=>(se("FirestoreClient","Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new gr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=yd(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Eh(i,e){i.asyncQueue.verifyOperationInProgress(),se("FirestoreClient","Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let s=n.initialUser;i.setCredentialChangeListener(async a=>{s.isEqual(a)||(await oy(e.localStore,a),s=a)}),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}async function bm(i,e){i.asyncQueue.verifyOperationInProgress();const n=await bT(i);se("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener(s=>Lm(e.remoteStore,s)),i.setAppCheckTokenChangeListener((s,a)=>Lm(e.remoteStore,a)),i._onlineComponents=e}async function bT(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){se("FirestoreClient","Using user provided OfflineComponentProvider");try{await Eh(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(a){return a.name==="FirebaseError"?a.code===Y.FAILED_PRECONDITION||a.code===Y.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(n))throw n;Bs("Error using user provided cache. Falling back to memory cache: "+n),await Eh(i,new fu)}}else se("FirestoreClient","Using default OfflineComponentProvider"),await Eh(i,new UT(void 0));return i._offlineComponents}async function Py(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(se("FirestoreClient","Using user provided OnlineComponentProvider"),await bm(i,i._uninitializedComponentsProvider._online)):(se("FirestoreClient","Using default OnlineComponentProvider"),await bm(i,new jh))),i._onlineComponents}function BT(i){return Py(i).then(e=>e.syncEngine)}async function ky(i){const e=await Py(i),n=e.eventManager;return n.onListen=RT.bind(null,e.syncEngine),n.onUnlisten=PT.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=CT.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=kT.bind(null,e.syncEngine),n}function jT(i,e,n={}){const s=new gr;return i.asyncQueue.enqueueAndForget(async()=>function(u,h,m,g,v){const w=new Ay({next:R=>{w.eu(),h.enqueueAndForget(()=>yy(u,A));const L=R.docs.has(m);!L&&R.fromCache?v.reject(new he(Y.UNAVAILABLE,"Failed to get document because the client is offline.")):L&&R.fromCache&&g&&g.source==="server"?v.reject(new he(Y.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(R)},error:R=>v.reject(R)}),A=new vy(rd(m.path),w,{includeMetadataChanges:!0,ua:!0});return gy(u,A)}(await ky(i),i.asyncQueue,e,n,s)),s.promise}function $T(i,e,n={}){const s=new gr;return i.asyncQueue.enqueueAndForget(async()=>function(u,h,m,g,v){const w=new Ay({next:R=>{w.eu(),h.enqueueAndForget(()=>yy(u,A)),R.fromCache&&g.source==="server"?v.reject(new he(Y.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(R)},error:R=>v.reject(R)}),A=new vy(m,w,{includeMetadataChanges:!0,ua:!0});return gy(u,A)}(await ky(i),i.asyncQueue,e,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xy(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bm=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vy(i,e,n){if(!n)throw new he(Y.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function qT(i,e,n,s){if(e===!0&&s===!0)throw new he(Y.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function jm(i){if(!ye.isDocumentKey(i))throw new he(Y.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function $m(i){if(ye.isDocumentKey(i))throw new he(Y.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Ed(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":we()}function Er(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new he(Y.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ed(i);throw new he(Y.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(e){var n,s;if(e.host===void 0){if(e.ssl!==void 0)throw new he(Y.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new he(Y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}qT("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=xy((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new he(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new he(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new he(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,a){return s.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ku{constructor(e,n,s,a){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qm({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(Y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(Y.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qm(e),e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new tw;switch(s.type){case"firstParty":return new sw(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new he(Y.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=Bm.get(n);s&&(se("ComponentProvider","Removing Datastore"),Bm.delete(n),s.terminate())}(this),Promise.resolve()}}function HT(i,e,n,s={}){var a;const u=(i=Er(i,ku))._getSettings(),h=`${e}:${n}`;if(u.host!=="firestore.googleapis.com"&&u.host!==h&&Bs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},u),{host:h,ssl:!1})),s.mockUserToken){let m,g;if(typeof s.mockUserToken=="string")m=s.mockUserToken,g=Mt.MOCK_USER;else{m=L0(s.mockUserToken,(a=i._app)===null||a===void 0?void 0:a.options.projectId);const v=s.mockUserToken.sub||s.mockUserToken.user_id;if(!v)throw new he(Y.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Mt(v)}i._authCredentials=new nw(new Cg(m,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new xu(this.firestore,e,this._query)}}class an{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Yr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new an(this.firestore,e,this._key)}}class Yr extends xu{constructor(e,n,s){super(e,n,rd(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new an(this.firestore,null,new ye(e))}withConverter(e){return new Yr(this.firestore,e,this._path)}}function Hm(i,e,...n){if(i=Zr(i),Vy("collection","path",e),i instanceof ku){const s=Je.fromString(e,...n);return $m(s),new Yr(i,null,s)}{if(!(i instanceof an||i instanceof Yr))throw new he(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(Je.fromString(e,...n));return $m(s),new Yr(i.firestore,null,s)}}function Mi(i,e,...n){if(i=Zr(i),arguments.length===1&&(e=Ag.newId()),Vy("doc","path",e),i instanceof ku){const s=Je.fromString(e,...n);return jm(s),new an(i,null,new ye(s))}{if(!(i instanceof an||i instanceof Yr))throw new he(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(Je.fromString(e,...n));return jm(s),new an(i.firestore,i instanceof Yr?i.converter:null,new ye(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(e=Promise.resolve()){this.Iu=[],this.Eu=!1,this.du=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new ly(this,"async_queue_retry"),this.fu=()=>{const s=_h();s&&se("AsyncQueue","Visibility state changed to "+s.visibilityState),this.r_.Jo()},this.gu=e;const n=_h();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.Eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.Eu){this.Eu=!0,this.Vu=e||!1;const n=_h();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.Eu)return new Promise(()=>{});const n=new gr;return this.yu(()=>this.Eu&&this.Vu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!Zs(e))throw e;se("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const n=this.gu.then(()=>(this.Ru=!0,e().catch(s=>{this.Au=s,this.Ru=!1;const a=function(h){let m=h.message||"";return h.stack&&(m=h.stack.includes(h.message)?h.stack:h.message+`
`+h.stack),m}(s);throw vr("INTERNAL UNHANDLED ERROR: ",a),s}).then(s=>(this.Ru=!1,s))));return this.gu=n,n}enqueueAfterDelay(e,n,s){this.pu(),this.mu.indexOf(e)>-1&&(n=0);const a=gd.createAndSchedule(this,e,n,s,u=>this.Su(u));return this.du.push(a),a}pu(){this.Au&&we()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const n of this.du)if(n.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.du.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.du)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const n=this.du.indexOf(e);this.du.splice(n,1)}}class to extends ku{constructor(e,n,s,a){super(e,n,s,a),this.type="firestore",this._queue=new Wm,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Wm(e),this._firestoreClient=void 0,await e}}}function WT(i,e){const n=typeof i=="object"?i:$E(),s=typeof i=="string"?i:"(default)",a=zE(n,"firestore").getImmediate({identifier:s});if(!a._initialized){const u=D0("firestore");u&&HT(a,...u)}return a}function wd(i){if(i._terminated)throw new he(Y.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||QT(i),i._firestoreClient}function QT(i){var e,n,s;const a=i._freezeSettings(),u=function(m,g,v,w){return new Ew(m,g,v,w.host,w.ssl,w.experimentalForceLongPolling,w.experimentalAutoDetectLongPolling,xy(w.experimentalLongPollingOptions),w.useFetchStreams)}(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,a);i._componentsProvider||!((n=a.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=a.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(i._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),i._firestoreClient=new zT(i._authCredentials,i._appCheckCredentials,i._queue,u,i._componentsProvider&&function(m){const g=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(g),_online:g}}(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Qs(xt.fromBase64String(e))}catch(n){throw new he(Y.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Qs(xt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new he(Y.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new kt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new he(Y.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new he(Y.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ve(this._lat,e._lat)||Ve(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,a){if(s.length!==a.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==a[u])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KT=/^__.*__$/;class GT{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new oi(e,this.data,this.fieldMask,n,this.fieldTransforms):new wa(e,this.data,n,this.fieldTransforms)}}class Dy{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new oi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Ny(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we()}}class Rd{constructor(e,n,s,a,u,h){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=a,u===void 0&&this.Fu(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new Rd(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),a=this.xu({path:s,Nu:!1});return a.Lu(e),a}Bu(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),a=this.xu({path:s,Nu:!1});return a.Fu(),a}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return pu(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Lu(this.path.get(e))}Lu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(Ny(this.Mu)&&KT.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class XT{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||Cu(e)}$u(e,n,s,a=!1){return new Rd({Mu:e,methodName:n,Ku:s,path:kt.emptyPath(),Nu:!1,Qu:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ly(i){const e=i._freezeSettings(),n=Cu(i._databaseId);return new XT(i._databaseId,!!e.ignoreUndefinedProperties,n)}function YT(i,e,n,s,a,u={}){const h=i.$u(u.merge||u.mergeFields?2:0,e,n,a);Cd("Data must be an object, but it was:",h,s);const m=Oy(s,h);let g,v;if(u.merge)g=new on(h.fieldMask),v=h.fieldTransforms;else if(u.mergeFields){const w=[];for(const A of u.mergeFields){const R=$h(e,A,n);if(!h.contains(R))throw new he(Y.INVALID_ARGUMENT,`Field '${R}' is specified in your field mask but missing from your input data.`);Fy(w,R)||w.push(R)}g=new on(w),v=h.fieldTransforms.filter(A=>g.covers(A.field))}else g=null,v=h.fieldTransforms;return new GT(new Yt(m),g,v)}class Du extends Td{_toFieldTransform(e){if(e.Mu!==2)throw e.Mu===1?e.qu(`${this._methodName}() can only appear at the top level of your update data`):e.qu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Du}}function JT(i,e,n,s){const a=i.$u(1,e,n);Cd("Data must be an object, but it was:",a,s);const u=[],h=Yt.empty();si(s,(g,v)=>{const w=Ad(e,g,n);v=Zr(v);const A=a.Bu(w);if(v instanceof Du)u.push(w);else{const R=Nu(v,A);R!=null&&(u.push(w),h.set(w,R))}});const m=new on(u);return new Dy(h,m,a.fieldTransforms)}function ZT(i,e,n,s,a,u){const h=i.$u(1,e,n),m=[$h(e,s,n)],g=[a];if(u.length%2!=0)throw new he(Y.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let R=0;R<u.length;R+=2)m.push($h(e,u[R])),g.push(u[R+1]);const v=[],w=Yt.empty();for(let R=m.length-1;R>=0;--R)if(!Fy(v,m[R])){const L=m[R];let U=g[R];U=Zr(U);const $=h.Bu(L);if(U instanceof Du)v.push(L);else{const b=Nu(U,$);b!=null&&(v.push(L),w.set(L,b))}}const A=new on(v);return new Dy(w,A,h.fieldTransforms)}function Nu(i,e){if(My(i=Zr(i)))return Cd("Unsupported field value:",e,i),Oy(i,e);if(i instanceof Td)return function(s,a){if(!Ny(a.Mu))throw a.qu(`${s._methodName}() can only be used with update() and set()`);if(!a.path)throw a.qu(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(a);u&&a.fieldTransforms.push(u)}(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(s,a){const u=[];let h=0;for(const m of s){let g=Nu(m,a.ku(h));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),h++}return{arrayValue:{values:u}}}(i,e)}return function(s,a){if((s=Zr(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return $w(a.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=gt.fromDate(s);return{timestampValue:cu(a.serializer,u)}}if(s instanceof gt){const u=new gt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:cu(a.serializer,u)}}if(s instanceof Sd)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Qs)return{bytesValue:Jg(a.serializer,s._byteString)};if(s instanceof an){const u=a.databaseId,h=s.firestore._databaseId;if(!h.isEqual(u))throw a.qu(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:ld(s.firestore._databaseId||a.databaseId,s._key.path)}}if(s instanceof Id)return function(h,m){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:h.toArray().map(g=>{if(typeof g!="number")throw m.qu("VectorValues must only contain numeric values.");return id(m.serializer,g)})}}}}}}(s,a);throw a.qu(`Unsupported field value: ${Ed(s)}`)}(i,e)}function Oy(i,e){const n={};return Pg(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):si(i,(s,a)=>{const u=Nu(a,e.Ou(s));u!=null&&(n[s]=u)}),{mapValue:{fields:n}}}function My(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof gt||i instanceof Sd||i instanceof Qs||i instanceof an||i instanceof Td||i instanceof Id)}function Cd(i,e,n){if(!My(n)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(n)){const s=Ed(n);throw s==="an object"?e.qu(i+" a custom object"):e.qu(i+" "+s)}}function $h(i,e,n){if((e=Zr(e))instanceof Vu)return e._internalPath;if(typeof e=="string")return Ad(i,e);throw pu("Field path arguments must be of type string or ",i,!1,void 0,n)}const eS=new RegExp("[~\\*/\\[\\]]");function Ad(i,e,n){if(e.search(eS)>=0)throw pu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new Vu(...e.split("."))._internalPath}catch{throw pu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function pu(i,e,n,s,a){const u=s&&!s.isEmpty(),h=a!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(u||h)&&(g+=" (found",u&&(g+=` in field ${s}`),h&&(g+=` in document ${a}`),g+=")"),new he(Y.INVALID_ARGUMENT,m+i+g)}function Fy(i,e){return i.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uy{constructor(e,n,s,a,u){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=a,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new an(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new tS(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(zy("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class tS extends Uy{data(){return super.data()}}function zy(i,e){return typeof e=="string"?Ad(i,e):e instanceof Vu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nS(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new he(Y.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class rS{convertValue(e,n="none"){switch(ri(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ot(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ni(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw we()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return si(e,(a,u)=>{s[a]=this.convertValue(u,n)}),s}convertVectorValue(e){var n,s,a;const u=(a=(s=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||s===void 0?void 0:s.values)===null||a===void 0?void 0:a.map(h=>ot(h.doubleValue));return new Id(u)}convertGeoPoint(e){return new Sd(ot(e.latitude),ot(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=_u(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(fa(e));default:return null}}convertTimestamp(e){const n=ti(e);return new gt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=Je.fromString(e);Be(iy(s));const a=new pa(s.get(1),s.get(3)),u=new ye(s.popFirst(5));return a.isEqual(n)||vr(`Document ${u} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iS(i,e,n){let s;return s=i?i.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class by extends Uy{constructor(e,n,s,a,u,h){super(e,n,s,a,h),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new eu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(zy("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class eu extends by{data(e={}){return super.data(e)}}class sS{constructor(e,n,s,a){this._firestore=e,this._userDataWriter=n,this._snapshot=a,this.metadata=new ia(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new eu(this._firestore,this._userDataWriter,s.key,s,new ia(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new he(Y.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(a,u){if(a._snapshot.oldDocs.isEmpty()){let h=0;return a._snapshot.docChanges.map(m=>{const g=new eu(a._firestore,a._userDataWriter,m.doc.key,m.doc,new ia(a._snapshot.mutatedKeys.has(m.doc.key),a._snapshot.fromCache),a.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}})}{let h=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(m=>u||m.type!==3).map(m=>{const g=new eu(a._firestore,a._userDataWriter,m.doc.key,m.doc,new ia(a._snapshot.mutatedKeys.has(m.doc.key),a._snapshot.fromCache),a.query.converter);let v=-1,w=-1;return m.type!==0&&(v=h.indexOf(m.doc.key),h=h.delete(m.doc.key)),m.type!==1&&(h=h.add(m.doc),w=h.indexOf(m.doc.key)),{type:oS(m.type),doc:g,oldIndex:v,newIndex:w}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function oS(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aS(i){i=Er(i,an);const e=Er(i.firestore,to);return jT(wd(e),i._key).then(n=>hS(e,i,n))}class By extends rS{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new an(this.firestore,null,n)}}function lS(i){i=Er(i,xu);const e=Er(i.firestore,to),n=wd(e),s=new By(e);return nS(i._query),$T(n,i._query).then(a=>new sS(e,s,i,a))}function ea(i,e,n,...s){i=Er(i,an);const a=Er(i.firestore,to),u=Ly(a);let h;return h=typeof(e=Zr(e))=="string"||e instanceof Vu?ZT(u,"updateDoc",i._key,e,n,s):JT(u,"updateDoc",i._key,e),Pd(a,[h.toMutation(i._key,Nn.exists(!0))])}function uS(i){return Pd(Er(i.firestore,to),[new sd(i._key,Nn.none())])}function cS(i,e){const n=Er(i.firestore,to),s=Mi(i),a=iS(i.converter,e);return Pd(n,[YT(Ly(i.firestore),"addDoc",s._key,a,i.converter!==null,{}).toMutation(s._key,Nn.exists(!1))]).then(()=>s)}function Pd(i,e){return function(s,a){const u=new gr;return s.asyncQueue.enqueueAndForget(async()=>xT(await BT(s),a,u)),u.promise}(wd(i),e)}function hS(i,e,n){const s=n.docs.get(e._key),a=new By(i);return new by(i,a,e._key,s,new ia(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(a){Ys=a})(jE),iu(new ca("firestore",(s,{instanceIdentifier:a,options:u})=>{const h=s.getProvider("app").getImmediate(),m=new to(new rw(s.getProvider("auth-internal")),new aw(s.getProvider("app-check-internal")),function(v,w){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new he(Y.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pa(v.options.projectId,w)}(h,a),h);return u=Object.assign({useFetchStreams:n},u),m._setSettings(u),m},"PUBLIC").setMultipleInstances(!0)),zs(lm,"4.7.5",e),zs(lm,"4.7.5","esm2017")})();const dS={apiKey:"AIzaSyC8k0ER-iA6rbkDAAcNTDFTl5OW4AXrogY",authDomain:"tobuy-271a6.firebaseapp.com",projectId:"tobuy-271a6",storageBucket:"tobuy-271a6.firebasestorage.app",messagingSenderId:"811289547975",appId:"1:811289547975:web:aa5dffacc9c60c56175ae2",measurementId:"G-VW48BWMLM6"},fS=yg(dS),Qr=WT(fS);function pS(){const[i,e]=q.useState([]),[n,s]=q.useState(""),[a,u]=q.useState(""),[h,m]=q.useState(!1),[g,v]=q.useState(!1),[w,A]=q.useState(null),[R,L]=q.useState(0),[U,$]=q.useState("");q.useState({}),q.useState(0),q.useState([]);const[b,Q]=q.useState(""),K=async()=>{const ve=(await lS(Hm(Qr,"items"))).docs.map(_e=>({..._e.data(),id:_e.id}));e(ve),m(!0)};q.useEffect(()=>{K()},[]);const re=async()=>{if(n.trim()===""||a.trim()===""){alert("Please enter both item name and price!");return}const T={name:n,price:parseFloat(a),quantity:1,completed:!1,isChecked:!1,timestamp:new Date},ve=await cS(Hm(Qr,"items"),T);e([...i,{...T,id:ve.id,timestamp:new Date}]),s(""),u(""),K()},ce=async(T,ve)=>{try{const _e=i.map(pe=>pe.id===T?{...pe,quantity:Math.max(1,ve)}:pe);e(_e);const je=Mi(Qr,"items",T);await ea(je,{quantity:Math.max(1,ve)})}catch(_e){console.error("Error updating quantity:",_e)}},Ce=async T=>{if(window.confirm("Are you sure you want to remove this item?")){const ve=i[T];await uS(Mi(Qr,"items",ve.id));const _e=i.filter((je,pe)=>pe!==T);e(_e)}},Ie=async(T,ve)=>{const _e=i.map(async(pe,ee)=>{if(ee===T)if(pe.completed){const de=Mi(Qr,"items",pe.id),ne=await aS(de);if(ne.exists()){const N=ne.data().originalPrice||pe.price,H=ne.data().originalQuantity||pe.quantity;return await ea(de,{completed:!1,price:N,quantity:H}),K(),{...pe,completed:!1,price:N,quantity:H}}}else return await ea(Mi(Qr,"items",pe.id),{completed:!0,originalPrice:pe.price,originalQuantity:pe.quantity,price:0,quantity:0}),K(),{...pe,completed:!0,price:0,quantity:0};return K(),pe}),je=await Promise.all(_e);e(je),K()},x=i.reduce((T,ve)=>{const _e=ve.price*ve.quantity;return T+_e},0),S=async(T,ve,_e)=>{const je=i.map(pe=>{if(pe.id===T.id){const ee={...pe,name:ve,price:parseFloat(_e)};return ea(Mi(Qr,"items",pe.id),ee),ee}return pe});e(je)},C=async T=>{const ve=i.map(_e=>{if(_e.id===T.id){const je={..._e,isChecked:!_e.isChecked};return ea(Mi(Qr,"items",T.id),{isChecked:je.isChecked}),K(),je}return K(),_e});e(ve)},k=i.filter(T=>T.isChecked).reduce((T,ve)=>T+ve.price*ve.quantity,0),D=(T,ve)=>{if(!ve)return T;const _e=new RegExp(`(${ve})`,"gi");return T.replace(_e,'<span style= "color: blue; fontWeight: bold">$1</span>')},O=i.sort((T,ve)=>{var je,pe;const _e=(((je=ve.timestamp)==null?void 0:je.seconds)||0)-(((pe=T.timestamp)==null?void 0:pe.seconds)||0);return _e!==0?_e:ve.isChecked-T.isChecked}).filter(T=>T.name.toLowerCase().includes(b.toLowerCase()));return Ue.jsxs("div",{style:{fontFamily:"Arial, sans-serif",maxWidth:"400px",padding:"10px",border:"1px solid #ddd",borderRadius:"8px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",gap:5,display:"flex",flexDirection:"column"},children:[Ue.jsxs("div",{style:{position:"fixed",top:0,left:0,backgroundColor:"#fff",padding:"10px",zIndex:1,display:"flex",flexDirection:"column",gap:5},children:[Ue.jsxs("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[Ue.jsx("h1",{style:{fontSize:"16px",margin:0},children:"To-Buy List"}),Ue.jsxs("h2",{style:{textAlign:"right",margin:0,fontSize:16},children:["Total: ",x.toFixed(2),"/ ",k.toFixed(2)]})]}),Ue.jsxs("div",{style:{display:"flex",gap:"5px",alignItems:"center",justifyContent:"space-between"},children:[Ue.jsx("input",{type:"text",value:n,onChange:T=>s(T.target.value),placeholder:"Enter item",style:{padding:10,border:"1px solid #ccc",borderRadius:5,width:"31%"}}),Ue.jsx("input",{type:"number",value:a,onChange:T=>u(T.target.value),placeholder:"Enter price",style:{width:"31%",padding:10,border:"1px solid #ccc",borderRadius:5}}),Ue.jsx("button",{onClick:re,style:{padding:10,backgroundColor:"#007BFF",color:"#fff",border:"none",borderRadius:5,cursor:"pointer",width:"31%"},children:"Add"})]}),Ue.jsx("input",{type:"text",placeholder:"Search items...",value:b,onChange:T=>Q(T.target.value),style:{padding:"8px",width:"90%",alignSelf:"center"}})]}),Ue.jsx("ul",{style:{listStyleType:"none",padding:0,margin:0,marginTop:105,display:"flex",flexDirection:"column",gap:5},children:O.map((T,ve)=>Ue.jsxs("li",{style:{padding:3,border:"1px solid #ddd",borderRadius:"4px",backgroundColor:T.completed?"grey":"#f9f9f9",display:"flex",justifyContent:"space-between",alignItems:"center",textDecoration:T.completed?"line-through":"none"},children:[Ue.jsx("input",{type:"checkbox",checked:T.isChecked||!1,onChange:()=>C(T),style:{margin:0},disabled:T.completed}),Ue.jsx("div",{style:{maxWidth:"25%",overflowX:"auto",whiteSpace:"nowrap",display:"flex",alignItems:"center",gap:5,scrollbarWidth:"none"},children:g&&w===T?Ue.jsx("input",{value:U,onChange:_e=>$(_e.target.value),style:{width:"100%"},type:"text"}):Ue.jsx("span",{style:{fontSize:14,textAlign:"center",cursor:"pointer",display:"inline-block"},onClick:()=>Ie(ve),dangerouslySetInnerHTML:{__html:D(T.name,b)}})}),g&&w===T?Ue.jsxs("div",{children:[Ue.jsx("input",{onChange:_e=>{L(_e.target.value)},value:R,style:{width:15,marginLeft:-10},type:"text"}),Ue.jsx("button",{style:{padding:3,fontSize:10,marginLeft:2,backgroundColor:"green",border:"none",color:"white",borderRadius:3},onClick:()=>{S(T,U,R),v(!1)},children:"Save"})]}):Ue.jsxs("span",{onClick:()=>{v(!0),A(T),$(T.name),L(T.price),console.log("yes")},style:{fontSize:12,color:"blue",backgroundColor:"yellow"},children:["",T.price]}),Ue.jsxs("strong",{style:{fontSize:12},children:["",(T.price*T.quantity).toFixed(2)]}),Ue.jsxs("div",{style:{display:"flex",alignItems:"center",gap:5},children:[Ue.jsxs("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",gap:5},children:[Ue.jsx("button",{onClick:()=>ce(T.id,T.quantity-1),style:{padding:"4px 8px",backgroundColor:"red",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:"-"}),Ue.jsx("input",{type:"number",value:T.quantity,onChange:_e=>ce(T.id,parseInt(_e.target.value)||1),style:{fontSize:12,width:15,textAlign:"center"}}),Ue.jsx("button",{onClick:()=>ce(T.id,T.quantity+1),style:{padding:"4px 8px",backgroundColor:"green",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:"+"})]}),Ue.jsx("button",{onClick:()=>Ce(ve),style:{padding:3,backgroundColor:"red",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",marginLeft:10},children:"R"})]})]},T.id))})]})}Jv.createRoot(document.getElementById("root")).render(Ue.jsx(q.StrictMode,{children:Ue.jsx(f0,{children:Ue.jsx($_,{children:Ue.jsx(ig,{path:"/toBuy/",element:Ue.jsx(pS,{})})})})}));
